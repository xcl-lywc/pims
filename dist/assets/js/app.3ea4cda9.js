(function(e){function t(t){for(var s,o,n=t[0],l=t[1],c=t[2],m=0,d=[];m<n.length;m++)o=n[m],r[o]&&d.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,n=1;n<a.length;n++){var l=a[n];0!==r[l]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},r={app:0},i=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"02c8":function(e,t,a){},"0310":function(e,t,a){},"0569":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAABGdBTUEAALGOfPtRkwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAC7klEQVR42mL8//8/w2AAAAHExDBIAEAADRqHAATQoHEIQAANGocABNCgcQhAALFgE3TYOROfHk4g3gXENmjij4HYC4iv4NN8wD0dqzhAAJETIpZYHAECskAcSW6IAAQQOQ5RxSOnQq5DAAKIkENAQT0LiH2BmA2IC4C4GY/6ACCeBsSCQGwIxJOAuAiIGQk5BCCAWPDIKQLxWiDmAOJUIP4KxNwEzAM5NhOI44GYC0n8DRAvwqcRIIDwhUgv1BEwwE1CSHOh8duAmAefBoAAwuUQRyAOJGDZNyA+DMQ7gfgZAbXSQFyJTwFAAOFySCcePf+g6UQCiO2A2AOaY6KB+B0efaC0IopLEiCAWPD4ABfIhSZIHWhaYIWWK8uA+DoQH4WWNeiAA+qQ19gMBQggXCESAcQvsIifhjrCDYjPAHEJEOcD8VYgbgTi80Dch0XfbyDOA+JruHwHEEC4HAKKe3Ms4qugdBcQs6PJVQGxJBCvwaIPVJxOxpdGAAIIX675iEXsKZTWxRHNakD8BIvcd0LZDCCA8JUjfFjEpKD0VSTHgEJvOhD/AeKLQPwLiMPQ9B0h5BCAAMLlEGscQRwKLV9AaWMztADLKtKyuwukvYHYFYd5NkihvAubAoAAwuWQdUAshkXcHFpygkLABJprngOxERCvJqKgA2V9ZmwSAAGEyyGPcDiEAZroJKBlTQlU7A+RJe5vXBIAAYQrsZbjMQzkozogfgVqXgCxSN+1QyehdZMyAayAy1CAAMIVIvuAeAO0NsUFQHWPPaheAaYRUOF2AVewI4HXuEIaIICYCBTJP5H4X/GoFSDCEQz4iniAAMKXfe8DcRAQB0NDB1S5ZUErL3RfXYFGJ6F2x0dcEgABxEJA4zYohoEJ0FoXvVHLDk0jhBpa73FJAAQQCwPp4A6O5mMGkforsAkCBBA5DjkOLSlt0BLhXSKiBmeIAAQQ42DphAME0KDpYAEE0KBxCEAADRqHAATQoHEIQIABAOENb9/Bh2GkAAAAAElFTkSuQmCC"},"096c":function(e,t,a){},"0cd9":function(e,t,a){"use strict";var s=a("3d6d"),r=a.n(s);r.a},"0ec0":function(e,t,a){"use strict";var s=a("9304"),r=a.n(s);r.a},1381:function(e,t,a){},1520:function(e,t,a){},1569:function(e,t,a){e.exports=a.p+"c9b28e3dbfdcd98c2054edabcfdef17b.jpg"},"15a8":function(e,t,a){},1778:function(e,t,a){"use strict";var s=a("e564"),r=a.n(s);r.a},"1b6e":function(e,t,a){"use strict";var s=a("5f36"),r=a.n(s);r.a},"1bf1":function(e,t,a){"use strict";var s=a("46bd"),r=a.n(s);r.a},"1de5":function(e,t,a){},"1f01":function(e,t,a){"use strict";var s=a("15a8"),r=a.n(s);r.a},"1feb":function(e,t,a){"use strict";var s=a("f20e"),r=a.n(s);r.a},"206e":function(e,t,a){},"212a":function(e,t,a){"use strict";var s=a("e467"),r=a.n(s);r.a},"22db":function(e,t,a){"use strict";var s=a("c531"),r=a.n(s);r.a},"29cc":function(e,t,a){},"2a25":function(e,t,a){e.exports=a.p+"007ef70730367afa59080a77577a75c9.jpg"},"2aec":function(e,t,a){"use strict";var s=a("8825"),r=a.n(s);r.a},3109:function(e,t,a){},3244:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACAAIADASIAAhEBAxEB/8QAGwABAAIDAQEAAAAAAAAAAAAAAAYHAQUIBAP/xAA2EAABAwMCBAQFAwIHAQAAAAABAgMEAAURBhIHITFREyJBcRRhgZGhFTJCCBcWI1JiscHRJP/EABkBAQADAQEAAAAAAAAAAAAAAAACAwQFAf/EAB0RAQACAwEBAQEAAAAAAAAAAAABAgMRITESBGH/2gAMAwEAAhEDEQA/AJ3SlKyOSUpSgUpWrvWoLdp+OmRclutMqOA4llS0g9iQMD6169iJmdQ2lKq678XI8OUldqMa4xVdWltuMuoPvzChUdncXrsbsJduQGoykJC4kjDiNw6lJABGeVSjHMro/PeV50qgonFO6wLquRGZR8C6dy4DiytCFfy8MnmkE88cwKsqBxO0/NgNSVurjqLiW3mnMZZznCj3TnlkdM8wKTSYeXwXqmdKwkhSQpJBBGQQc5FZqKkpSleBSlKBSlKBSlYUSEkpSVEDISDjPyoNFq6/jTtjclJdjIfUdrXxCiBnvtHNWOw+uK52u9/ul7kqeuM56QonopWEj2T0Fe7Wd1uF11JJcuD7S3G1FCUMub22h/pSRyOPUjqajtaKV1DoYsUUj+lKUqa4pmlKCwLDxXu9mgRoDkWNLjR07Ele5K9voNwPp7VdNhvCL7aGbg22ltLg/al5LmPqn/g4NcrVYOgOILmnnW7dPSlVscVzWlIC2Sf5ZH7h3B59qrvTccZ82GJjdY6vqlYQtLiErQoKQoApUDkEHoRWapYSlKV4FKUoFRHiRcZdt0dJciPoYLhDSnCfNg/xQP8AUe/oMmpdVUcaXn1M2yK2FFlIW+5gchzCE5+5+9TpG5WYY3eFNmlKsrTXBq/3m6Ialf8AxwksNSJEgpKikLTuCEj+S9pGR0GedaHSVrSuhdNcA40ya5PvxejQivLFuQ5l3Z6F1wdCepCe/UdKln9jdLSZypE5Dq2k+VmJHPgstJ7cvMo91FRJoOTqV2dG4V6HiNhDemoCgPV1BcP3UTXzn8JNDXBktuaeitZ/lH3NKH1SRQca0rpXWXAiyJ01Id0008zc2AXUBx9Sw8AOaOfQn0PeuaiMGg6N4aSJT+iYYkkL8PKGnArIU36D3HNJHyqXVXnB4PjSbxW6hbBkqLYBO5BwNwI+xHvVh1mt65uWNXkpSlRVlKUoFQfitEek6KdVHZK1NvIW4UjmltOSST2BxU4qI63upVGOmYVvkXG6XRhaW2GOqU4/efbH4PSpV94sxb+4050QhTiwhIJUogAfOu9YTPgQmGT1bbSn7ACuP9D6NnzuJNrss+I9HW28H5LbqSkpbR5ieffGB710Br7iFftOTBDsOk59yWjCnpSo7hYAPPCSkeY9z0HzrS6SyKVUVk46xJH+VetOXW3upHnW0yXkJ9+QUPsasux363ajtiLja3y9GWSkKKFIII6ghQBBFBsqVrr3fbfp22LuN0f8GMghJUEKWSTyAASCSTVZ3vjrEjnwrLpy63B5Q8inWSyhXzHIqP2FBbihlJHcYrgiW2WpbzahgpcUkj2NdYaB4hX7UUwwr9pOfbVrypmUmM4GCBzwoqHlPY9D8qobXWh7hG4o3CyWuK5LckuGTGaZG5Xhryr8cx9KCweElvehaN8V1SCiW+Xm9pzhOAnn2OUmp5UP0Ncksxv8LyrbJttytjKfEjyOZWk894PzJ/NTCs1t765uXf3OylKVFWUpSgVBtTw1I19Y3TIXHYu7K7Q683+5veeRHvux7Zqc1EuIsF+Rpf42ICZVsfRNbA/2Hn+Of0qVJ1ZZht83h4tC/pi/6iLw3aYvw0OLFeZQ3kkbkFCFEZ6AnOBVy6k03D1PAaiTVvJbaeQ8PDXjcUn9qh0UkjIIPfvVKWOVAt/HGzX+C4f07VMVbqT12POZC0fRxI9s10JWl0lRWjgs5aNU3O7w9QPxEub1QExklJYUVZG8Z2rSOm3oQfSphdS6jXulW1uZKo03xNuUpUQlrnjPfNS2oEq8M3nX+nnmGnEIYVdIuV485b8NKlDB6ZB+1BOJKHVx3EsuJbdKCELUncEqxyJHrg+lVPduCn6rqi2XZ++vyUNbFTxKBWqSpJySOeEpV024wB0q3aUGn03p2Lpm1mBEceW2XVOkur3HKj0A6JAGAAOXKqZ12LYn+oizN3aL8TDlxmWVt5OCpZWhJOOoBxkVf1c93yVb7hxyvF+muH9O0tFQ8o9At5sDYj3Lijy9cUH30zDUviBfHRIXIYtDKLQ08v8Ac4UHmT7bce2KnNRLh1Cfj6YM6WkiVc5C5rgP+88vxz+tS2s953Zzs1t3kpSlQVFKUoFYUkKSUqAKSMEH1FZpQU9r3SjGkxCv1qkSG2WpyViKTlDKj5tyO3NI5e1dQR30SY7bzZyhxAWk9wRkVTev7Yq7aJucdAJcQ2HkADmSg7sfbNTXhTfU6g4cWiRv3OsMiK93C2/Lz9wAfrWjHO4dDBebV6mlV/YrjF0u+u036I5DX8fKXEuL6E/Duh11TgSl3PlUQcbVYyRjnU/UoIGSQB3JrQ3y7wvg3o7UeLdngoJdgCQyFkZ58lkDI64OKmueRzWCZ9yRA0/CduZS+huTMbx8KwnI35czhSgn+Kc88A4qVVFtK3PwoHw1y+BgSFyXfhoSXWQpDRUS2nagkbtvXFShKgsZSQR3BzQfOQ8iPHcecOENpK1H5AZrl/QelWNW/HX66yJC2XZylmKDhDyh5ty++Co8very4q31On+HN3k79rzzJjM46lbnl5ewJP0qE6AtirToi2R1pKXFt+OsEcwVnd/xioXnUKc95rXiSABKQlIASBgADkBWaUqhzylKV4FKUoFKUoBAIIIBB9D61AdK3b+1evn7TOUUabvK/EYdV+1hfQE9sZ2n5bT6VPq1WotPwtS2ly3zU+VXmbcA8zavRQ/89RU6W1K3Dk+J74s6bCiXaC5EmMNSIrycLbcTuSsdefeofd9DtoW0i0ae0q/BSjBjTYexQVk5UlxIV17FP1qAaT4gXPh3Ka01rNLjtrHlhXJCSran0B9SkduqfmKu223a33iImVbpjEthQyHGHAsfitDoRMTG4RC0aGbWt1F307pViCpGBGhRCtalZGCXFBPTsE/WpjChRLTBbiQ2Go8VlOENNjalA68hWLldrfaIqpVxmMRGEjJcfcCB+apLVnEC58RJTumdFpcath8s25rBTuR6geoSfurpyFCZiOy8uq7t/dPXzFogqK9OWdfiPuj9r7nQkH1zjaPluNT4AAYAAA6AelarTun4WmrS3b4SfKPM44R5nFeqj/56CttWe9ty5+bJ9zzwpSlQVFKUoFKUoFKUoFKUoPNOt8O5xFRZ0ZqQwrq24nI9/kfnUJf4TWpMhT1ruVxtqldUsuZH/R/NT+lSi0x4lXJavkoAxwntSn0vXS5XG5KT0S85tH/Z/NTaBb4dsiJiwYzUdhPRttOB7/M/OvTSk2mfS2S1vZKUpUUSlKUClKUH/9k="},3342:function(e,t,a){},"3ac8":function(e,t,a){},"3c0a":function(e,t,a){},"3c8f":function(e,t,a){"use strict";var s=a("a853"),r=a.n(s);r.a},"3d6d":function(e,t,a){},"3da2":function(e,t,a){e.exports=a.p+"cf4978e790f17c98a46f8d24c3814acf.jpg"},"3dfd":function(e,t,a){},43621:function(e,t,a){"use strict";var s=a("e4af"),r=a.n(s);r.a},4413:function(e,t,a){"use strict";var s=a("b34b"),r=a.n(s);r.a},"46bd":function(e,t,a){},"49a2":function(e,t,a){"use strict";var s=a("ba69"),r=a.n(s);r.a},"4b78":function(e,t,a){"use strict";var s=a("9d14"),r=a.n(s);r.a},"4cd8":function(e,t,a){},"4def":function(e,t,a){},"4e88":function(e,t,a){"use strict";var s=a("4def"),r=a.n(s);r.a},"51da":function(e,t,a){},"524d":function(e,t,a){},5316:function(e,t,a){},5687:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a(e.layout,{tag:"component"})],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"blank-wrap"}},[a("router-view")],1)},n=[],l={},c=l,u=(a("d0d8"),a("2877")),m=Object(u["a"])(c,o,n,!1,null,"2df31f4c",null);m.options.__file="BlankLayout.vue";var d,p,h,f,g=m.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"wapper"}},[s("div",{staticClass:"header-wrap"},[s("img",{staticClass:"header-img",attrs:{alt:"天津市和平区",src:a("fb22")},on:{click:function(t){e.$router.push({name:"Dashboard"})}}}),e._m(0),s("div",{staticClass:"user-management"},[s("el-dropdown",{staticClass:"fl",attrs:{trigger:"click"},on:{command:e.handleCommand}},[s("span",{staticClass:"el-dropdown-link username-style"},[e._v("\n            "+e._s(e.userData.name)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"personal"}},[e._v("个人资料")]),s("el-dropdown-item",{attrs:{command:"avatar"}},[e._v("修改头像")]),s("el-dropdown-item",{attrs:{command:"exchange"}},[e._v("切换导航")]),s("el-dropdown-item",{attrs:{command:"resetPass"}},[e._v("重置密码")]),s("el-dropdown-item",{attrs:{divided:"",command:"signOutLogin"}},[e._v("退出登录")])],1)],1)],1),s("div",{staticClass:"button-group"},[s("el-tooltip",{attrs:{effect:"light",content:"搜索",placement:"top-end"}},[s("el-badge",{attrs:{value:null}},[s("i",{staticClass:"fa fa-search nav-icon-button no-badge",on:{click:e.goToProjectQuery}})])],1),s("el-tooltip",{attrs:{effect:"light",content:"未读消息",placement:"top-end"}},[s("el-badge",{attrs:{value:e.$store.state.noticeNum}},[s("i",{staticClass:"fa fa-bell nav-icon-button",on:{click:e.skipNoticesList}})])],1)],1)]),s("el-dialog",{attrs:{title:"和平区信息化项目管理办法",visible:e.methodDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.methodDialogVisible=t}}},[s("div",{staticStyle:{height:"500px"}},[e._v("和平区信息化项目管理办法的内容......")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.methodDialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.methodDialogVisible=!1}}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"个人资料",visible:e.personalDialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.personalDialogVisible=t}}},[s("el-row",[s("el-col",{attrs:{span:6}},[e.userData.picture?s("img",{attrs:{width:"120",height:"120",src:"/pics/"+e.userData.picture,onerror:e.headimg}}):e._e(),e.userData.picture?e._e():s("img",{attrs:{width:"120",height:"120",src:a("3244")}})]),s("el-col",{attrs:{span:18}},[s("p",{staticClass:"mar10"},[e._v("账号："+e._s(e.userData.account))]),s("p",{staticClass:"mar10"},[e._v("姓名："+e._s(e.userData.name))]),s("p",{staticClass:"mar10"},[e._v("手机："+e._s(e.userData.phoneNum))]),s("p",{staticClass:"mar10"},[e._v("邮箱："+e._s(e.userData.email))])]),s("el-col",{attrs:{span:24}},[s("p",{staticClass:"mar10"},[e._v("角色列表："),e._l(e.rolesList,function(t,a){return s("span",[e._v(e._s(t.name)+"，")])})],2)]),s("el-col",{attrs:{span:24}},[s("h4",{staticClass:"block-title"}),s("p",{staticClass:"fr mar10"})])],1)],1),s("el-dialog",{attrs:{title:"修改密码",visible:e.resetPassDialogVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.resetPassDialogVisible=t}}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[s("el-form",{ref:"resetPasswordForm",staticClass:"demo-ruleForm add-task-left",attrs:{rules:e.resetPasswordFormRules,model:e.resetPasswordForm,"label-width":"100px"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{label:"旧密码：",prop:"password"}},[s("el-input",{attrs:{type:"text"},model:{value:e.resetPasswordForm.password,callback:function(t){e.$set(e.resetPasswordForm,"password",t)},expression:"resetPasswordForm.password"}})],1),s("el-form-item",{attrs:{label:"新密码：",prop:"newPassword"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.resetPasswordForm.newPassword,callback:function(t){e.$set(e.resetPasswordForm,"newPassword",t)},expression:"resetPasswordForm.newPassword"}})],1),s("el-form-item",{attrs:{label:"确认密码：",prop:"confirmPassword"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.resetPasswordForm.confirmPassword,callback:function(t){e.$set(e.resetPasswordForm,"confirmPassword",t)},expression:"resetPasswordForm.confirmPassword"}})],1)],1)],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{disabled:e.loading},on:{click:function(t){e.resetPassDialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){e.resetPassword("resetPasswordForm")}}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"帮助",visible:e.helpDialogVisible,width:"20%"},on:{"update:visible":function(t){e.helpDialogVisible=t}}},[s("div",{staticStyle:{height:"300px"}},[e._v("帮助的内容......")])]),s("el-dialog",{attrs:{title:"修改头像",visible:e.avaterDialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.avaterDialogVisible=t}}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"show-file-list":!1,"auto-upload":!0,multiple:"",limit:1,"before-upload":e.beforeUpload,"on-success":e.uploadSuccessFileAvater,"on-error":e.uploadErrorFileAvater}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl_}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.avaterDialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.modify}},[e._v("修改头像")])],1)],1),s("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content-wrap-row"},[s("transition",{attrs:{name:"el-zoom-in-center"}},["horizontal"==e.navMode?s("nav-bar",{attrs:{showType:e.navMode,resource:e.resourceList}}):e._e()],1),"vertical"==e.navMode?s("el-col",{staticClass:"nav-bar-vertical nav-bg",attrs:{span:3}},[s("nav-bar",{attrs:{showType:e.navMode,resource:e.resourceList}})],1):e._e(),s("el-col",{class:{"content-vertical":"vertical"==e.navMode},attrs:{span:"vertical"==e.navMode?21:24}},[s("div",{staticClass:"content-wrap",class:{"vertical-box":"vertical"==e.navMode,"horizontal-box":"horizontal"==e.navMode}},[s("router-view")],1)])],1)],1)},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h1",{staticClass:"header-title"},[a("span",{staticClass:"fl main-title"},[e._v("国家机关事务管理局")]),a("span",{staticClass:"fl sub-title"},[e._v("内审信息平台")])])}],_=(a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{class:{"vertical-nav":"vertical"==e.showType},attrs:{id:"nav","default-active":e.getActiveIndex(),mode:e.showType,"background-color":"rgba(255,255,255,0.6)","popper-class":"popper-class","text-color":"#1f3140","active-text-color":"#1e90f0","unique-opened":"","collapse-transition":""},on:{select:e.navClicked}},e._l(e.navArray,function(t){return a("el-submenu",{key:t.path,attrs:{index:t.path,"show-timeout":10,"hide-timeout":10}},[a("template",{slot:"title"},[a("i",{staticClass:"nav-icon",class:t.navIcon}),e._v(e._s(t.navName))]),e._l(t.children,function(s){return a("el-menu-item",{key:t.path+"/"+s.path,attrs:{index:t.path+"/"+s.path}},[e._v("\n        "+e._s(s.navName)+"\n      ")])})],2)}))}),y=[],w=(a("7f7f"),new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六")),x=new Date,C=new Array(100),F=new Array(12),k="甲乙丙丁戊己庚辛壬癸",S="子丑寅卯辰巳午未申酉戌亥",D="一二三四五六七八九十",P="正二三四五六七八九十冬腊";function $(e,t){return e>>t&1}function N(){var e,t,a,s;f=3!=arguments.length?new Date:new Date(arguments[0],arguments[1],arguments[2]);var r=!1,i=f.getFullYear();for(e=365*(i-1921)+Math.floor((i-1921)/4)+F[f.getMonth()]+f.getDate()-38,f.getYear()%4==0&&f.getMonth()>1&&e++,t=0;;t++){for(s=C[t]<4095?11:12,a=s;a>=0;a--){if(e<=29+$(C[t],a)){r=!0;break}e=e-29-$(C[t],a)}if(r)break}d=1921+t,p=s-a+1,h=e,12==s&&(p==Math.floor(C[t]/65536)+1&&(p=1-p),p>Math.floor(C[t]/65536)+1&&p--)}function I(){var e="";return e+=k.charAt((d-4)%10),e+=S.charAt((d-4)%12),e+="年 ",p<1?(e+="(闰)",e+=P.charAt(-p-1)):e+=P.charAt(p-1),e+="月",e+=h<11?"初":h<20?"十":h<30?"廿":"三十",h%10==0&&10!=h||(e+=D.charAt((h-1)%10)),e}function j(e,t,a){return e<1921||e>2020?"":(t=parseInt(t)>0?t-1:11,N(e,t,a),I())}C=new Array(2635,333387,1701,1748,267701,694,2391,133423,1175,396438,3402,3749,331177,1453,694,201326,2350,465197,3221,3402,400202,2901,1386,267611,605,2349,137515,2709,464533,1738,2901,330421,1242,2651,199255,1323,529706,3733,1706,398762,2741,1206,267438,2647,1318,204070,3477,461653,1386,2413,330077,1197,2637,268877,3365,531109,2900,2922,398042,2395,1179,267415,2635,661067,1701,1748,398772,2742,2391,330031,1175,1611,200010,3749,527717,1452,2742,332397,2350,3222,268949,3402,3493,133973,1386,464219,605,2349,334123,2709,2890,267946,2773,592565,1210,2651,395863,1323,2707,265877),F[0]=0,F[1]=31,F[2]=59,F[3]=90,F[4]=120,F[5]=151,F[6]=181,F[7]=212,F[8]=243,F[9]=273,F[10]=304,F[11]=334;var T=new Date,A=T.getFullYear(),z=T.getMonth()+1,B=T.getDate();T.getDay(),parseInt(T.getTime()/1e3);function L(e){var t=e.getYear();return t<1e3&&(t+=1900),t}function O(){var e=L(x)+"年"+(x.getMonth()+1)+"月"+x.getDate()+"日 "+w[x.getDay()]+" ";return e+=j(A,z,B),e}var V=O(),E=V,M={data:function(){return{navArray:[],activeNav:null,lunarDateText:null,noOrg:window.noOrg}},props:{showType:{required:!0,type:String,default:"vertical"},resource:{required:!0,default:"vertical"}},watch:{resource:{handler:function(e,t){this.initNavBar()},deep:!0}},created:function(){this.initNavBar(),this.lunarDateText=E},mounted:function(){},methods:{initNavBar:function(){sessionStorage.getItem("userData")?this.buildNavArray():(this.$message.error("当前用户未登录, 请登录"),this.$router.push({name:"LoginIndex"}))},getActiveIndex:function(){return this.$route.path},navClicked:function(e,t){this.$router.push(e),this.activeNav=e},buildNavArray:function(){var e=this,t=JSON.parse(JSON.stringify(this.$router.options.routes));e.navArray=[],t.forEach(function(t,a){if("/"!=t.path&&"/login"!=t.path&&"/reg"!=t.path&&"/notices"!=t.path){var s=[];t.children.forEach(function(t,a){e.checkResource(t)&&s.push(t)}),t.children=s,s.length>0&&e.navArray.push(t)}})},checkResource:function(e){var t=this,a=!1;return t.resource.forEach(function(t,s){e.navName==t.name&&t.isSelect&&(a=!0)}),a},handleScroll:function(e){window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}}},R=M,J=Object(u["a"])(R,_,y,!1,null,null,null);J.options.__file="NavBar.vue";var U=J.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{class:{active:e.isfull},on:{click:e.toggle}},[a("i",{staticClass:"full-icon text"}),a("i",{staticClass:"full-icon text-active"})])},Q=[],H={data:function(){return{isfull:!1}},methods:{fullscreenElement:function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;return e},toggle:function(){if(this.fullscreenElement())document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.isfull=!1;else{var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.isfull=!0}}}},K=H,W=(a("c34c"),Object(u["a"])(K,q,Q,!1,null,null,null));W.options.__file="FullScreen.vue";var G=W.exports,X={data:function(){var e=this,t=function(t,a,s){a?a.length<6?s(new Error("密码长度必须是6位以上!")):(""!==e.resetPasswordForm.confirmPassword&&e.$refs.resetPasswordForm.validateField("confirmPassword"),s()):s(new Error("请输入密码"))},s=function(t,a,s){a?a!==e.resetPasswordForm.newPassword?s(new Error("两次输入密码不一致!")):a.length<6?s(new Error("密码长度必须是6位以上!")):s():s(new Error("请再次输入密码"))};return{resetPassDialogVisible:!1,methodDialogVisible:!1,personalDialogVisible:!1,helpDialogVisible:!1,avaterDialogVisible:!1,loading:!1,navMode:"vertical",activeIndex:"1",activeIndex2:"1",dialogVisible:!1,resourceList:[],rolesList:[],noticesTotal:null,userData:JSON.parse(sessionStorage.getItem("userData")),resourceDtos:JSON.parse(sessionStorage.getItem("userData")).resourceDtos,picture:JSON.parse(sessionStorage.getItem("userData")).picture,headimg:'this.src="'+a("3244")+'"',myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},imageUrl:"",imageUrl_:"",aId:JSON.parse(sessionStorage.getItem("userData")).id,sliderValue:100,resetPasswordForm:{confirmPassword:null,oldPassword:null,password:null},resetPasswordFormRules:{password:[{required:!0,message:"请输入旧密码"}],newPassword:[{required:!0,message:"请输入新密码"},{validator:t,trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码"},{validator:s,trigger:"blur"}]},timeInterval:null}},components:{"nav-bar":U,"v-fullscreen":G},watch:{navMode:{handler:function(e,t){},deep:!0}},created:function(){var e=this,t=JSON.parse(sessionStorage.getItem("userData")).resourceDtos;JSON.parse(sessionStorage.getItem("userData")).resourceDtos&&t.forEach(function(a,s){e.traverseTree(t[s])}),this.disapperDialog()},mounted:function(){"/login"!=this.$route.path&&this.$store.state.interval&&this.initWebSocket(),this.getNoticesTotal(),this.getQueryRolesListByUserId()},methods:{getQueryRolesListByUserId:function(e){var t=this;this.axios.get("".concat(this.common.basePath,"/user_roles/roles"),{params:{userId:this.userData.id}}).then(function(e){t.rolesList=e.data.data}).catch(function(e){reject(e)})},resetPassword:function(e){var t=this,a=this;a.$refs[e].validate(function(e){if(!e)return!1;t.axios.post("".concat(t.common.basePath,"/hr_users/pwd/update"),t.resetPasswordForm).then(function(e){t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e)}),t.resetPassDialogVisible=!1})},resetPassClick:function(){this.resetPassDialogVisible=!0,this.resetPasswordForm.userId=this.userData.id,this.$refs.resetPasswordForm&&this.$refs.resetPasswordForm.resetFields()},modifyAvatar:function(){this.avaterDialogVisible=!0},modify:function(){var e=this,t={id:this.aId,picture:this.imageUrl};this.axios.patch("".concat(this.common.basePath,"/hr_users/user/update/").concat(this.aId),t).then(function(t){0===t.data.meta.code?(e.$message.success(t.data.meta.message,20),e.avaterDialogVisible=!1):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;return t||a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),t||a},uploadSuccessFileAvater:function(e,t){console.log(e),this.imageUrl=e.data.path,this.imageUrl_=URL.createObjectURL(t.raw)},uploadErrorFileAvater:function(e,t,a){this.$message.error("上传失败!!",20)},disapperDialog:function(){"1"==sessionStorage.getItem("noticeIds")&&(this.methodDialogVisible=!1,sessionStorage.removeItem("noticeIds"))},traverseTree:function(e){if(e&&(this.resourceList.push(e),e.childrens&&e.childrens.length>0)){var t=0;for(t=0;t<e.childrens.length;t++)this.traverseTree(e.childrens[t])}},changeMode:function(){var e=this;this.loading=!0,"horizontal"==this.navMode?(this.navMode="vertical",this.loading=!1,sessionStorage.setItem("navMode","vertical"),document.getElementsByClassName("top-fixed")&&(document.getElementsByClassName("top-fixed")[0].style.width="calc(100% - 268px)")):(this.navMode="horizontal",this.loading=!1,sessionStorage.setItem("navMode","horizontal"),document.getElementsByClassName("top-fixed")&&(document.getElementsByClassName("top-fixed")[0].style.width="calc(100% - 28px)")),setTimeout(function(){e.loading=!1},500)},handleSelect:function(e,t){console.log(e,t)},handleCommand:function(e){"setUp"==e?this.$router.push({path:"/system_management/dictionary"}):"signOutLogin"==e?this.loginOut():"personal"==e?this.personalDialogVisible=!0:"help"==e?this.helpDialogVisible=!0:"resetPass"==e?this.resetPassClick():"avatar"==e?this.modifyAvatar():"exchange"==e&&this.changeMode()},loginOut:function(){var e=this,t=JSON.parse(sessionStorage.getItem("token"));e.axios.post("".concat(e.common.basePath,"/login/out"),t),e.common.startInterval=!1,sessionStorage.removeItem("userData"),sessionStorage.removeItem("token"),sessionStorage.removeItem("navMode"),e.$router.push({name:"loginIndex"}),e.$store.state.ws.close()},skipNoticesList:function(){this.$router.push({path:"/notices"})},goToProjectQuery:function(){var e="ProjectReporting";this.resourceDtos.forEach(function(t,a){29==t.id&&t.childrens.forEach(function(t,a){33==t.id&&t.isSelect&&(e="ProjectDirector")})}),this.$router.push({name:e})},getNoticesTotal:function(){var e=this;window.nl=this,JSON.parse(sessionStorage.getItem("userData")).token?e.timeInterval=setInterval(function(){"/login"!=e.$route.path&&e.$store.state.interval&&e.initWebSocket()},59e3):Vue.$message.error("获取未读信息失败")},initWebSocket:function(){var e=this;if(console.log(e.$store.state.interval),JSON.parse(sessionStorage.getItem("userData"))){var t="ws://".concat(e.common.webSocketSever,"/userNotice/").concat(JSON.parse(sessionStorage.getItem("userData")).token);e.$store.state.ws=new WebSocket(t),e.$store.state.ws.onopen=function(e){console.log(e)},e.$store.state.ws.onmessage=function(t){e.$store.commit("changeInterval",!0),e.$store.commit("change","0"==t.data?null:t.data),console.log(t.data)},e.$store.state.ws.onclose=function(t){e.$store.commit("changeInterval",!1),clearInterval(e.timeInterval),setTimeout(function(){e.initWebSocket()},59e3)},e.$store.state.ws.onerror=function(t){"/login"!=e.$route.path&&e.$store.state.interval&&(e.$message.error("与服务器断开连接, 刷新页面重试"),console.log(t))}}else console.log("当前用户并未登录")},_noticesParams:function(){return{params:{}}},changeView:function(e){var t=document.getElementsByTagName("html")[0];t.style.zoom="".concat(e/100),t.style.height="".concat(e/100*100,"%")}}},Y=X,Z=(a("1feb"),Object(u["a"])(Y,b,v,!1,null,"40123ac4",null));Z.options.__file="NavLayout.vue";var ee=Z.exports,te={props:{layout:{type:String,default:"nav-layout"}},watch:{$route:{handler:function(e,t){t.path&&sessionStorage.setItem("historyPath",t.path)},deep:!0}},components:{"nav-layout":ee,"blank-layout":g},data:function(){return{}},mounted:function(){window.app=this,sessionStorage.getItem("token")||this.$router.push({path:"/login"})}},ae=te,se=Object(u["a"])(ae,r,i,!1,null,null,null);se.options.__file="App.vue";var re=se.exports,ie=a("8c4f"),oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard"},[a("h2",{staticClass:"page-title"},[e._v("项目统计")]),a("DashBoard")],1)},ne=[],le=a("4328"),ce=a.n(le),ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-editor-container"},[a("panel-group",{on:{handleSetLineChartData:e.handleSetLineChartData}}),a("el-row",{staticStyle:{background:"rgba(255, 255, 255, 0.7)",padding:"16px 16px 0","margin-bottom":"32px"}},[a("line-chart",{attrs:{"chart-data":e.lineChartData}})],1),a("el-row",{attrs:{gutter:32}},[a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("raddar-chart")],1)]),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("pie-chart")],1)]),a("el-col",{attrs:{xs:24,sm:24,lg:8}},[a("div",{staticClass:"chart-wrapper"},[a("bar-chart")],1)])],1)],1)},me=[],de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.cardsLoading,expression:"cardsLoading"}],staticClass:"panel-group",attrs:{gutter:40}},[e._l(e.resourceAdmin,function(t,s){return a("div",{key:""+t.id},[t.isSelect?a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:8,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper background",class:e.totalColor(e.totalNumber(t))}),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(e._s(t.name.split("-")[1]))]),a("count",{attrs:{state:e.totalNumber(t),userId:null},on:{finish:function(t){e.cardsLoading=!1}}})],1),a("div",{staticClass:"background-pop-up"})])]):e._e()],1)}),e._l(e.resourceUser,function(t,s){return a("div",{key:""+t.id},[t.isSelect?a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:8,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-icon-wrapper background",class:e.totalColor(e.totalNumber(t))},[a("i",{staticClass:"fa fa-user fl"})]),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[e._v(e._s(t.name.split("-")[1]))]),a("count",{attrs:{state:e.totalNumber(t),userId:e.userId},on:{finish:function(t){e.cardsLoading=!1}}})],1),a("div",{staticClass:"background-pop-up"})])]):e._e()],1)})],2)},pe=[],he=(a("6b54"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fr"},[e._v("\n  "+e._s(e.number)+"\n")])}),fe=[],ge={data:function(){return{number:0}},props:{state:{type:String},userId:{}},mounted:function(){this.getTotalNumber()},methods:{getTotalNumber:function(){var e=this,t={method:"get",url:"".concat(e.common.basePath,"/project/count/").concat(this.state),params:{}};e.axios(t).then(function(t){e.number=t.data.data,e.$emit("finish")})}}},be=ge,ve=(a("df63"),Object(u["a"])(be,he,fe,!1,null,"510c5c90",null));ve.options.__file="Count.vue";var _e=ve.exports,ye={data:function(){return{userId:JSON.parse(sessionStorage.getItem("userData")).id,cardsLoading:!1,reviewTotal:"",total:"",declareTotal:"",noticesTotal:"",statesList:[{type:"projects_finished",name:"系统已完结项目-已完结",status:9},{type:"project-review",name:"需要专家评审的项目-专家评审",status:4},{type:"project-pretrial",name:"需要专家预审的项目-专家预审",status:3},{type:"project-leader",name:"需要领导会议审议的项目-网信会议",status:5},{type:"project-inhand",name:"实施中项目-实施中",status:8},{type:"project-finance",name:"待申报单位录入财政意见-财政意见",status:6},{type:"project-file",name:"待归档项目-待归档",status:7},{type:"project-apply",name:"待申报单位申报项目-待申报项目",status:1},{type:"project-all",name:"系统中项目数-项目",status:null},{type:"project-accept",name:"需要我受理的项目-项目受理",status:2},{type:"mine_projects_finished",name:"我的已完成项目-已完结",status:9},{type:"mine-projects",name:"我的项目数-项目",status:null},{type:"mine-project-review",name:"我的待评审项目-专家评审",status:4},{type:"mine-project-pretrial",name:"我的待预审项目-专家预审",status:3},{type:"mine-project-leader",name:"我的待领导审批项目-网信会议",status:5},{type:"mine-project-inhand",name:"我的实施中项目-实施中",status:8},{type:"mine-project-finance",name:"待我录入财政意见项目-财政意见",status:6},{type:"mine-project-file",name:"我的待归档项目-待归档",status:7},{type:"mine-project-apply",name:"驳回给我的项目-被驳回项目",status:1},{type:"mine-project-accept",name:"我的待受理项目-项目受理",status:2}],resourceAdmin:[],resourceUser:[]}},components:{count:_e},computed:{totalNumber:function(e){var t=this;return function(e){var a;return t.statesList.forEach(function(t,s){e.url==t.type&&(a=t.type)}),a}},totalColor:function(e){var t=this;return function(e){return t.common.showStatusText(e).stageColor}}},mounted:function(){this.getActiveResource()},methods:{traverseTree:function(e){var t=this;if(e&&e.childrens&&e.childrens.length>0){var a=0;for(a=0;a<e.childrens.length;a++)this.traverseTree(e.childrens[a]),88==e.childrens[a].id&&(t.resourceUser=e.childrens[a].childrens),89==e.childrens[a].id&&(t.resourceAdmin=e.childrens[a].childrens,console.log(t.resourceAdmin))}},getActiveResource:function(){var e=this;JSON.parse(sessionStorage.getItem("userData")).resourceDtos.forEach(function(t,a){e.traverseTree(t)})},handleSetLineChartData:function(e){this.$emit("handleSetLineChartData",e)},getReviewTotal:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/page"),this._reviewParams()).then(function(t){0===t.data.meta.code?e.reviewTotal=t.data.data.total:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_reviewParams:function(){return{params:{status:6}}},getNoticesTotal:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/notices"),this._noticesParams()).then(function(t){0===t.data.meta.code?e.noticesTotal=t.data.data.total:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_noticesParams:function(){return{params:{cur_status:1,recipients:sessionStorage.getItem("assignee").toString()}}},getTotal:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/his/page"),this._allParams()).then(function(t){0===t.data.meta.code?e.total=t.data.data.total:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_allParams:function(){return{params:{status:""}}},getDeclareTotal:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/page"),this._declareParams()).then(function(t){0===t.data.meta.code?e.declareTotal=t.data.data.total:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_declareParams:function(){return{params:{status:2}}}}},we=ye,xe=(a("ce39"),Object(u["a"])(we,de,pe,!1,null,"55660274",null));xe.options.__file="PanelGroup.vue";var Ce=xe.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},ke=[],Se=a("313e"),De=a.n(Se);a("817d");var Pe={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object}},data:function(){return{chart:null}},mounted:function(){this.initChart(),this.autoResize&&window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},watch:{chartData:{deep:!0,handler:function(e){this.setOptions(e)}}},methods:{setOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.month,a=e.projectComplete,s=e.projectDeclare,r=[];if(t)for(var i=0;i<t.length;i++)r.push(t[i]);this.chart.setOption({title:{text:""},xAxis:[{data:r,boundaryGap:!1,axisTick:{show:!1}}],grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:["项目申报","项目结项"]},series:[{name:"项目申报",itemStyle:{normal:{color:"#FF005A",lineStyle:{color:"#FF005A",width:2}}},smooth:!0,type:"line",data:s,animationDuration:2800,animationEasing:"cubicInOut"},{name:"项目结项",smooth:!0,type:"line",itemStyle:{normal:{color:"#3888fa",lineStyle:{color:"#3888fa",width:2},areaStyle:{color:"#f3f8ff"}}},data:a,animationDuration:2800,animationEasing:"quadraticOut"}]})},initChart:function(){this.chart=De.a.init(this.$el,"macarons"),this.setOptions(this.chartData)}}},$e=Pe,Ne=Object(u["a"])($e,Fe,ke,!1,null,null,null);Ne.options.__file="LineChart.vue";var Ie=Ne.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},Te=[];a("817d");var Ae=3e3,ze={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},mounted:function(){this.initChart(),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=De.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},radar:{radius:"66%",center:["50%","42%"],splitNumber:8,splitArea:{areaStyle:{color:"rgba(127,95,132,.3)",opacity:1,shadowBlur:45,shadowColor:"rgba(0,0,0,.5)",shadowOffsetX:0,shadowOffsetY:15}},indicator:[{name:"教育",max:1e4},{name:"公共服务",max:2e4},{name:"卫生",max:2e4},{name:"政务",max:2e4},{name:"环卫",max:2e4},{name:"劳保",max:2e4}]},legend:{left:"center",bottom:"10",data:["国家专项资金","市财政资金","区财政资金","其他资金"]},series:[{type:"radar",symbolSize:0,areaStyle:{normal:{shadowBlur:13,shadowColor:"rgba(0,0,0,.2)",shadowOffsetX:0,shadowOffsetY:10,opacity:1}},data:[{value:[5e3,7e3,12e3,11e3,15e3,14e3],name:"国家专项资金"},{value:[4e3,9e3,15e3,15e3,13e3,11e3],name:"市财政资金"},{value:[5500,11e3,12e3,15e3,12e3,12e3],name:"区财政资金"},{value:[5600,100,22e3,15500,16200,8e3],name:"其他资金"}],animationDuration:Ae}]})}}},Be=ze,Le=Object(u["a"])(Be,je,Te,!1,null,null,null);Le.options.__file="RaddarChart.vue";var Oe=Le.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},Ee=[];a("817d");var Me={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},mounted:function(){this.initChart(),window.addEventListener("resize",this.__resizeHanlder)},created:function(){this.getPieData()},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=De.a.init(this.$el,"macarons")},getPieData:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/pie"),this._lineParams()).then(function(t){if(0===t.data.meta.code){var a=t.data.data;e.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["未受理","预审中","专家审批","上会审批","财政审批","已立项","已结项"]},calculable:!0,series:[{name:"项目进度",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:a,animationEasing:"cubicInOut",animationDuration:2600}]})}else e.$message.error(t.data.meta.message,20)}).catch(function(e){})},_lineParams:function(){return{params:{}}}}},Re=Me,Je=Object(u["a"])(Re,Ve,Ee,!1,null,null,null);Je.options.__file="PieChart.vue";var Ue=Je.exports,qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.className,style:{height:e.height,width:e.width}})},Qe=[];a("817d");var He=6e3,Ke={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"}},data:function(){return{chart:null}},mounted:function(){this.initChart(),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},methods:{initChart:function(){var e=this,t=[],a=[];this.axios.get("".concat(this.common.basePath,"/project/budget"),this._lineParams()).then(function(s){if(0===s.data.meta.code){e.barData=s.data.data;for(var r=0;r<s.data.data.length;r++)a.push(s.data.data[r].name);for(r=0;r<s.data.data.length;r++)t.push(s.data.data[r].money);e.chart=De.a.init(e.$el,"macarons"),e.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:10,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:a,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value",axisTick:{show:!1}}],series:[{itemStyle:{normal:{color:function(e){var t=["#B74AE5","#16A085","#BA4A00"];return t[e.dataIndex]}}},name:"资金/万元",type:"bar",stack:"vistors",barWidth:"60%",data:t,animationDuration:He}]})}else e.$message.error(s.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_lineParams:function(){return{params:{}}}}},We=Ke,Ge=Object(u["a"])(We,qe,Qe,!1,null,null,null);Ge.options.__file="BarChart.vue";var Xe=Ge.exports,Ye={name:"dashboard-admin",components:{PanelGroup:Ce,LineChart:Ie,RaddarChart:Oe,PieChart:Ue,BarChart:Xe},data:function(){return{lineChartData:{}}},methods:{handleSetLineChartData:function(e){this.lineChartData=lineChartData[e]},getLineData:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/curve"),this._lineParams()).then(function(t){if(0===t.data.meta.code){for(var a=t.data.data.projectComplete,s=t.data.data.projectDeclare,r=[],i=0;i<a.length;i++)r.push(a[i].count);var o=[];for(i=0;i<a.length;i++)o.push(a[i].month+"月份");var n=[];for(i=0;i<s.length;i++)n.push(s[i].count);var l=[];for(i=0;i<s.length;i++)l.push(s[i].month+"月份");var c={};c.projectDeclare=n,c.projectComplete=r,c.month=l,e.lineChartData=c}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_lineParams:function(){return{params:{}}}},mounted:function(){this.getLineData()}},Ze=Ye,et=(a("a101"),Object(u["a"])(Ze,ue,me,!1,null,"5acf6563",null));et.options.__file="DashBoard.vue";var tt=et.exports,at={name:"dashboard",components:{DashBoard:tt},mounted:function(){}},st=at,rt=Object(u["a"])(st,oe,ne,!1,null,null,null);rt.options.__file="Dashboard.vue";var it=rt.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._m(1),a("div",{staticClass:"login-box"},[a("div",{staticClass:"box-title"},[e._v("\n        欢迎登录\n      ")]),a("div",{staticClass:"box-form"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"0"}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",palcehoder:"请输入用户名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}},[a("i",{staticClass:"el-input__icon fa fa-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",palcehoder:"请输入密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}},[a("i",{staticClass:"el-input__icon fa fa-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",[a("el-checkbox",{staticClass:"fl",on:{change:e.rememberClick},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[a("span",{staticClass:"text-dark-blue"},[e._v("记住密码")])]),a("el-button",{staticClass:"text-dark-blue fr",attrs:{type:"text"}},[e._v("忘记密码")])],1),a("el-form-item",[a("el-button",{staticClass:"fill-width",attrs:{loading:e.buttonLoading,type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("\n            "+e._s(e.buttonLoading?"登录中":"登录"))])],1),a("el-form-item",[a("el-button",{staticClass:"fill-width",attrs:{disabled:e.buttonLoading},on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])])},nt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"background-wrap"},[a("div",{staticClass:"login-background"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("img",{attrs:{id:"title-img",src:a("e0a8"),alt:"1"}}),s("div",{attrs:{id:"title-text"}},[s("p",{staticClass:"main-title"},[e._v("国家机关事务管理局")]),s("p",{staticClass:"sub-title"},[e._v("National Government Offices Administration")]),s("p",{staticClass:"min-title"},[e._v("内审信息平台")])])])}],lt=a("bc3a"),ct=a.n(lt),ut=(new s["default"],a("606a")),mt={data:function(){var e=function(e,t,a){""===t?a(new Error("请输入密码")):a()},t=function(e,t,a){""===t?a(new Error("请输入用户名")):a()};return{checked:!1,buttonLoading:!1,ruleForm:{password:"",username:""},rules:{password:[{validator:e,trigger:"blur"}],username:[{validator:t,trigger:"blur"}]}}},components:{"vue-particles":ut["a"]},created:function(){var e=this;e.common.startInterval=!1},mounted:function(){var e=this;e._remember(),document.onkeydown=function(t){13===t.keyCode&&e.login()}},methods:{initCanvas:function(){var e=document.getElementById("canvas"),t=e.getContext("2d");t.fillStyle="#FF0000",t.fillRect(0,0,150,75)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.warning("您还未填写账号或密码!!!",20),!1;t.login()})},login:function(){var e=this;e.buttonLoading=!0,e.axios.post(e.common.basePath+"/login/in",ce.a.stringify(this.ruleForm)).then(function(t){var a=t.data;0===a.meta.code?(e.axios.defaults.headers.common["Authorization"]="Bearer ".concat(t.data.data.token),sessionStorage.setItem("userData",JSON.stringify(t.data.data)),sessionStorage.setItem("token",JSON.stringify(t.data.data.token)),sessionStorage.setItem("assignee",t.data.data.id),setTimeout(function(){e.goToPage(a.data)},1010),e._getDictionary().then(function(e){e.data.data&&sessionStorage.setItem("controlTable",JSON.stringify(e.data.data.rows))}).catch(function(t){e.$message.error("查询字典失败!!!")})):(e.buttonLoading=!1,e.$message.error(a.meta.message))}).catch(function(t){e.$message.error("登录失败!!!"),e.buttonLoading=!1})},goToPage:function(e){var t=this,a=e.roleIds[0]||null;if(6==a||5==a)switch(a){case 5:t.$router.push({name:"Dashboard"});break;case 6:t.$router.push({name:"Dashboard"});break}else t.$router.push({name:"Dashboard"})},_getDictionary:function(){var e=this;return new Promise(function(t,a){e.axios.get(e.common.basePath+"/contrast/choice/list","").then(function(e){t(e)}).catch(function(e){a(e)})})},resetForm:function(e){this.$refs[e].resetFields()},rememberClick:function(){console.log(this.checked),this.checked?localStorage.setItem("remember","true"):localStorage.setItem("remember","false"),localStorage.setItem("username",this.ruleForm.username),localStorage.setItem("password",this.ruleForm.password)},_remember:function(){"true"===localStorage.getItem("remember")&&localStorage.getItem("username")&&localStorage.getItem("password")&&(this.ruleForm.username=localStorage.getItem("username"),this.ruleForm.password=localStorage.getItem("password"),this.checked=!0)},skipReg:function(){this.$router.push({path:"/reg"})}}},dt=mt,pt=(a("7d70"),a("b95e"),Object(u["a"])(dt,ot,nt,!1,null,"0f821b00",null));pt.options.__file="Login.vue";var ht=pt.exports,ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-bg"},[a("div",{staticClass:"login-box"},[a("div",{staticClass:"box-title"},[e._v("\n\t\t\t  天津市和平区信息化项目监督管理平台\n\t\t  ")]),a("div",{staticClass:"box-form"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"name","label-width":"80px"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"账户",prop:"account","label-width":"80px"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password","label-width":"80px"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email","label-width":"80px"}},[a("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),a("el-form-item",[a("el-button",{staticClass:"fl btn-w",attrs:{type:""},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("注册")]),a("el-button",{staticClass:"fr btn-w",attrs:{type:""},on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"box-footer",on:{click:e.skipLogin}},[e._v("\n\t\t\t  已有账号，直接登录"),a("i",{staticClass:"el-icon-d-arrow-right"})])])])},gt=[],bt={data:function(){return{headImg:"../assets/img/a8.jpg",ruleForm:{account:null,curStatus:0,email:null,name:null,password:null,picture:null},rules:{password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!1,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],name:[{required:!0,message:"请输入用户名",trigger:"blur"}],account:[{required:!0,message:"请输入账户",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.warning("您的信息还未填写完整!!!",20),!1;t.reg()})},reg:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/hr_users/register"),ce.a.parse(this.ruleForm)).then(function(t){0===t.data.meta.code?e.$router.push({name:"LoginIndex"}):(e.$message.error(t.data.meta.message,20),e.$router.push({path:"/reg"}))}).catch(function(t){e.$message.error(t,20),e.$router.push({path:"/reg"})})},resetForm:function(e){this.$refs[e].resetFields()},skipLogin:function(){this.$router.push({name:"LoginIndex"})}},mounted:function(){var e=this;document.onkeydown=function(t){13===t.keyCode&&e.reg()}}},vt=bt,_t=(a("ac9b"),Object(u["a"])(vt,ft,gt,!1,null,"074dda06",null));_t.options.__file="Reg.vue";var yt=_t.exports,wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notices"},[a("h2",{staticClass:"page-title"},[e._v("相关通知列表")]),a("NoticesList")],1)},xt=[],Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notices"},[a("h2",{staticClass:"page-title mart60 padt10"},[e._v("相关通知")]),a("el-button",{staticClass:"back-button",attrs:{type:"primary",icon:"el-icon-back",size:"middle"},on:{click:e.back}},[e._v("返回")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("相关通知列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod,width:"50",fixed:"","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"sending_time",label:"发件时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("formatDate")(t.row.sending_time))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"title",label:"消息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"",size:"small"},on:{click:function(a){e.openDetails(t.row)}}},[a("i",{staticClass:"fa fa-eye"}),e._v(" 查看")])]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{title:e.detailNotice.title,visible:e.detailDialogVisible,width:"50%","show-close":!0},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("ul",{staticClass:"notice-content"},[a("li",[e._v(e._s(e.detailNotice.infromation)),a("el-button",{staticClass:"fr",attrs:{type:"text",size:"small"},on:{click:function(t){e.checkNotice(e.detailNotice)}}},[e._v("》点击查看《")])],1),a("li")]),a("template",{slot:"footer"},[a("span",[e._v(e._s(e._f("formatDate")(e.detailNotice.sending_time)))])])],2),a("el-dialog",{attrs:{title:"添加消息",visible:e.addDialogVisible,width:"50%","show-close":!0},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),a("el-form-item",{attrs:{label:"发送人",prop:"sender"}},[a("el-input",{model:{value:e.ruleForm.sender,callback:function(t){e.$set(e.ruleForm,"sender",t)},expression:"ruleForm.sender"}})],1),a("el-form-item",{attrs:{label:"信息",prop:"infromation"}},[a("el-input",{model:{value:e.ruleForm.infromation,callback:function(t){e.$set(e.ruleForm,"infromation",t)},expression:"ruleForm.infromation"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")]),a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.config("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},Ft=[];a("3b2b"),a("a481");function kt(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var s in a)if(new RegExp("(".concat(s,")")).test(t)){var r=a[s]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:St(r))}return t}function St(e){return("00"+e).substr(e.length)}var Dt={name:"notices",data:function(){return{detailDialogVisible:!1,addDialogVisible:!1,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1,detailNotice:{},nId:null,dId:null,ruleForm:{title:"",sender:"",infromation:""},rules:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],sender:[{required:!0,message:"请填写发送人",trigger:"blur"}],infromation:[{required:!0,message:"请填写信息",trigger:"blur"}]}}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")}},computed:{getNoticeNum:function(){return this.$store.state.noticeNum}},watch:{getNoticeNum:{handler:function(e,t){this.getNoticesList()}}},mounted:function(){this.getNoticesList()},methods:{back:function(){sessionStorage.setItem("noticeIds","1"),this.$router.back(-1)},openDetails:function(e){this.nId=e.id,this.detailDialogVisible=!0,this.getNoticesDetail()},addDiolog:function(){this.addDialogVisible=!0},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getNoticesList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getNoticesList()},getNoticesList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/notices"),this._noticesParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_noticesParams:function(){return{params:{cur_status:1,recipients:sessionStorage.getItem("assignee").toString(),pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}}},getNoticesDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/notices/").concat(this.nId),this._noticeDetailParams()).then(function(t){0===t.data.meta.code?(e.detailNotice=t.data.data,e.getNoticesList()):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_noticeDetailParams:function(){return{params:{id:this.nId}}},del:function(e){var t=this;this.dId=e.id,this.$confirm("确认要删除该消息吗？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.patch("".concat(t.common.basePath,"/notices/delete/").concat(t.dId),{params:{id:t.dId}}).then(function(e){t.getNoticesList()}).catch(function(e){t.$message.error(e)})}).catch(function(e){})},add:function(){var e=this,t={cur_status:1,infromation:this.ruleForm.infromation,recipients:sessionStorage.getItem("assignee").toString(),sender:this.ruleForm.sender,title:this.ruleForm.title};this.axios.post("".concat(this.common.basePath,"/notices"),t).then(function(t){0===t.data.meta.code?(e.addDialogVisible=!1,e.getNoticesList()):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},config:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.warning("未填写完整！！！",60),!1;t.add()})},resetForm:function(e){this.$refs[e].resetFields()},checkNotice:function(e){var t;switch(e.project_stage){case null:t="/project_set_up/reporting";break;case 1:t="/project_set_up/declare";break;case 2:t="/project_set_up/acceptance";break;case 3:t="/project_set_up/pretrial";break;case 4:t="/project_set_up/review";break;case 5:t="/project_set_up/leader";break;case 6:t="/project_set_up/financial";break;case 7:t="/project_set_up/file";break;case 8:t="/project_set_up/track";break;default:t="";break}this.$router.push({path:t})}}},Pt=Dt,$t=(a("ca5d"),Object(u["a"])(Pt,Ct,Ft,!1,null,null,null));$t.options.__file="NoticesList.vue";var Nt=$t.exports,It={name:"notices",components:{NoticesList:Nt},mounted:function(){}},jt=It,Tt=(a("8a6a"),Object(u["a"])(jt,wt,xt,!1,null,null,null));Tt.options.__file="NoticesList.vue";var At=Tt.exports,zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Bt=[],Lt={},Ot=Lt,Vt=Object(u["a"])(Ot,zt,Bt,!1,null,null,null);Vt.options.__file="Index.vue";var Et=Vt.exports,Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Rt=[],Jt={},Ut=Jt,qt=Object(u["a"])(Ut,Mt,Rt,!1,null,null,null);qt.options.__file="Index.vue";var Qt=qt.exports,Ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目申报")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("项目申报列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,fixed:"","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"processVariables.projectNum",label:"项目编号",width:"120"}}),a("el-table-column",{attrs:{prop:"processVariables.name",label:"项目名称",width:"240","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"name-style",on:{click:function(a){e.openDetails(t.row)}}},[e._v("\n                      "+e._s(t.row.processVariables.name)+"\n                    ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.company",label:"申报单位",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                      "+e._s(e._f("convertToText")(t.row.processVariables.company))+"\n                      ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.applyTime",label:"申报时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                      "+e._s(e._f("formatDate")(t.row.processVariables.applyTime))+"\n                    ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.budgetMoney",label:"项目金额",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                      "+e._s(t.row.processVariables.budgetMoney+"万元")+"\n                    ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.cur_status",label:"当前状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[6==t.row.processVariables.cur_status||13==t.row.processVariables.cur_status||14==t.row.processVariables.cur_status?a("span",[e._v("待修改")]):e._e(),20==t.row.processVariables.cur_status?a("span",[e._v("被驳回")]):e._e(),1==t.row.processVariables.cur_status?a("span",[e._v("再次申报失败")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"300",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[18==t.row.processVariables.cur_status?a("el-button",{ref:"btn",staticClass:"btn",attrs:{type:"warning",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.showInfo(t.row)}}},[e._v("申报审核意见")]):e._e(),16==t.row.processVariables.cur_status?a("el-button",{ref:"btn0",staticClass:"btn",attrs:{type:"warning",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.showInfo(t.row)}}},[e._v("财政意见")]):e._e(),6==t.row.processVariables.cur_status?a("el-button",{ref:"btn1",staticClass:"btn",attrs:{type:"warning",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.showInfo(t.row)}}},[e._v("领导意见")]):e._e(),13==t.row.processVariables.cur_status?a("el-button",{ref:"btn2",staticClass:"btn",attrs:{type:"warning",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.showInfo(t.row)}}},[e._v("专家预审意见")]):e._e(),14==t.row.processVariables.cur_status?a("el-button",{ref:"btn3",staticClass:"btn",attrs:{type:"warning",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.showInfo(t.row)}}},[e._v("专家评审意见")]):e._e(),20==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.resetDeclare(t.row)}}},[e._v("继续申报\n                    ")]):e._e(),18==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.modify(t.row,"acceptance")}}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t提交改进方案\n\t\t\t\t\t\t\t\t\t\t")]):e._e(),16==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.modify(t.row,"financial")}}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t修改财政意见\n\t\t\t\t\t\t\t\t\t\t")]):e._e(),17==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.modify(t.row,"plan")}}},[e._v("提交项目方案(简版)\n                    ")]):e._e(),6==t.row.processVariables.cur_status||13==t.row.processVariables.cur_status||14==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.modify(t.row,"improve")}}},[e._v("提交改进方案\n                    ")]):e._e(),1==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.onceMore(t.row)}}},[e._v("再次申报\n                    ")]):e._e()]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{title:"查看意见",visible:e.infoDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.infoDialogVisible=t}}},[e.detail?a("el-form",[a("el-form-item",{attrs:{label:"返回原因：","label-width":"120px"}},[e._v(e._s(e.detail.rejectReason))]),13==e.detail.curStatus?a("el-form-item",{attrs:{label:"预审专家意见：","label-width":"120px"}},e._l(e.expertOpinion,function(t,s){return e.expertOpinion?a("div",{staticClass:"expert"},[a("span",{staticClass:"fl"},[e._v(e._s("专家"+(s+1)+"："))]),a("p",{staticClass:"advice"},[a("span",{staticClass:"fl"},[e._v("一审意见：")]),!t.childrens[0].comment?a("span",{staticClass:"fl"},[e._v("未上传意见")]):a("a",{staticClass:"fl",attrs:{href:t.childrens[0].comment?"/pics"+JSON.parse(t.childrens[0].comment).path:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(JSON.parse(t.childrens[0].comment).name)+"\n\t\t\t\t\t\t\t")])]),2==t.childrens.length?a("p",{staticClass:"advice advice-two"},[a("span",{staticClass:"fl"},[e._v("    二审意见：")]),!t.childrens[1].comment?a("span",{staticClass:"fl"},[e._v("未上传意见")]):a("a",{staticClass:"fl",attrs:{href:t.childrens[1].comment?"/pics"+JSON.parse(t.childrens[1].comment).path:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(JSON.parse(t.childrens[1].comment).name)+"\n\t\t\t\t\t\t\t")])]):e._e()]):e._e()})):e._e(),14==e.detail.curStatus?a("el-form-item",{attrs:{label:"评审专家意见：","label-width":"120px"}},e._l(e.expertOpinion,function(t,s){return e.expertOpinion?a("div",{staticClass:"expert"},[a("span",{staticClass:"fl"},[e._v(e._s("专家"+(s+1)+"："))]),a("p",{staticClass:"advice"},[a("span",{staticClass:"fl"},[e._v("一审意见：")]),!t.childrens[0].comment?a("span",{staticClass:"fl"},[e._v("未上传意见")]):a("a",{staticClass:"fl",attrs:{href:t.childrens[0].comment?"/pics"+JSON.parse(t.childrens[0].comment).path:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(JSON.parse(t.childrens[0].comment).name)+"\n\t\t\t\t\t\t\t")])]),2==t.childrens.length?a("p",{staticClass:"advice advice-two"},[a("span",{staticClass:"fl"},[e._v("    二审意见：")]),!t.childrens[1].comment?a("span",{staticClass:"fl"},[e._v("未上传意见")]):a("a",{staticClass:"fl",attrs:{href:t.childrens[1].comment?"/pics"+JSON.parse(t.childrens[1].comment).path:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(JSON.parse(t.childrens[1].comment).name)+"\n\t\t\t\t\t\t\t")])]):e._e()]):e._e()})):e._e()],1):e._e()],1)],1)},Kt=[];function Wt(e,t){for(var a="",s=null,r=0;r<t.length;r++)t[r].id===e&&(s=t[r],a=s.name);return a}var Gt={data:function(){return{infoDialogVisible:!1,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1,detail:null,expertOpinion:null,el:null}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")},convertToText:function(e){return Wt(e,JSON.parse(sessionStorage.getItem("unitArr")))}},methods:{showInfo:function(e){var t=this;console.log(this.$refs.btn),this.infoDialogVisible=!0,this.axios.get("".concat(this.common.basePath,"/project/detail/").concat(e.processVariables.projectId),{params:{id:e.processVariables.projectId}}).then(function(e){0===e.data.meta.code?t.detail=e.data.data:t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e)}),this.axios.get("".concat(this.common.basePath,"/assessment_expert/all/").concat(e.processVariables.projectId),{params:{type:13==e.processVariables.cur_status?1:2}}).then(function(e){0===e.data.meta.code?t.expertOpinion=e.data.data:t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e)})},getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){if(0===t.data.meta.code){var a=t.data.data;sessionStorage.setItem("unitArr",JSON.stringify(a))}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},resetDeclare:function(e){var t=this;sessionStorage.setItem("rowDeclareInfo",JSON.stringify(e)),this.$confirm("是否继续申报该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"删除",type:"warning",showClose:!1}).then(function(){t.again1(e)}).catch(function(){t.again0()})},onceMore:function(e){sessionStorage.setItem("rowDeclareInfo",JSON.stringify(e)),this.$router.push({name:"DeclareAgain",params:{id:e.processVariables.projectId}})},modify:function(e,t){sessionStorage.setItem("rowDeclareInfo",JSON.stringify(e)),this.$router.push({name:"DeclareAgain",params:{id:e.processVariables.projectId,type:t?"acceptance"==t?"acceptance":e.processVariables.cur_status:"edit",budgetRotation:e.processVariables.budgetRotation,expertRotation:e.processVariables.expertRotation}})},again0:function(){var e=this,t={read_status:0,curStatus:20,instanceId:JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.instanceId,assignee:JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.assignee};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?(e.$message({type:"info",message:"已删除该项目啦@！！"}),e.getList()):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},again1:function(e){var t=this,a={read_status:1,curStatus:20,instanceId:JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.instanceId,assignee:JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.assignee};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),a).then(function(a){0===a.data.meta.code?(t.againDialogVisible=!1,t.$router.push({name:"DeclareAgain",params:{id:e.processVariables.projectId}})):t.$message.error(a.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})},openDetails:function(e){sessionStorage.setItem("rowDeclareDetailInfo",JSON.stringify(e)),sessionStorage.setItem("declareProjectIsEdit",0),this.$router.push({name:"DeclareDetail",params:{id:e.processVariables.projectId}})},addProject:function(){this.$router.push({path:"/project_set_up/declare/form"})},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList()},getList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/page"),this._acceptanceListParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_acceptanceListParams:function(){return{params:{status:1,pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum,company:JSON.parse(sessionStorage.getItem("userData")).id}}}},mounted:function(){this.getList(),this.getDeclareUnit()}},Xt=Gt,Yt=(a("49a2"),Object(u["a"])(Xt,Ht,Kt,!1,null,"550da362",null));Yt.options.__file="DeclareList.vue";var Zt=Yt.exports,ea=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",{staticClass:"page-title"},[e._v("项目申报")]),s("div",{staticClass:"block-wrap"},[s("h4",{staticClass:"block-title"},[e._v("项目申报表单")]),s("div",{staticClass:"block-body"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm base-info",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"180px",size:"middle",enctype:"multipart/form-data"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("基本信息")])]),s("el-form-item",{attrs:{label:"项目名称：",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),s("el-form-item",{attrs:{label:"申报单位：",prop:"company"}},[s("span",[e._v(e._s(e.ruleForm.company.name))])]),s("el-form-item",{attrs:{label:"项目负责人：",prop:"people"}},[s("el-input",{attrs:{placeholder:"请输入项目负责人"},model:{value:e.ruleForm.people,callback:function(t){e.$set(e.ruleForm,"people",t)},expression:"ruleForm.people"}})],1),s("el-form-item",{attrs:{label:"项目联系人：",prop:"contacts"}},[s("el-input",{attrs:{placeholder:"请输入项目联系人"},model:{value:e.ruleForm.contacts,callback:function(t){e.$set(e.ruleForm,"contacts",t)},expression:"ruleForm.contacts"}})],1),s("el-form-item",{attrs:{label:"联系手机：",prop:"tel"}},[s("el-input",{attrs:{placeholder:"请输入联系手机"},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",t)},expression:"ruleForm.tel"}})],1),s("el-form-item",{attrs:{label:"联系固话：",prop:"phone"}},[s("el-input",{attrs:{placeholder:"请输入联系固话"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),s("el-form-item",{attrs:{label:"邮箱：",prop:"mail"}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.ruleForm.mail,callback:function(t){e.$set(e.ruleForm,"mail",t)},expression:"ruleForm.mail"}})],1)],1)]),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("项目预算")])]),s("el-form-item",{attrs:{label:"预算金额：",prop:"budgetMoney"}},[s("el-input",{attrs:{placeholder:"请输入预算金额"},model:{value:e.ruleForm.budgetMoney,callback:function(t){e.$set(e.ruleForm,"budgetMoney",t)},expression:"ruleForm.budgetMoney"}},[s("template",{slot:"append"},[e._v("万元")])],2)],1),s("el-form-item",{attrs:{label:"预算来源：",prop:"type"}},[s("el-checkbox-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[e._l(e.type,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\t\t")])}),e._l(e.elsetype,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id},on:{change:e.elseCheckboxBoolean}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\t\t")])})],2)],1),e.elseCheckbox?s("el-form-item",{attrs:{label:"其他资金来源备注：",prop:"budgetRemarks",id:"mark"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入来源备注"},model:{value:e.ruleForm.budgetRemarks,callback:function(t){e.$set(e.ruleForm,"budgetRemarks",t)},expression:"ruleForm.budgetRemarks"}})],1):e._e(),s("el-form-item",{attrs:{label:"资金落实情况：",prop:"resource"}},[s("el-radio-group",{model:{value:e.ruleForm.resource,callback:function(t){e.$set(e.ruleForm,"resource",t)},expression:"ruleForm.resource"}},[s("el-radio",{attrs:{label:"已落实"}}),s("el-radio",{attrs:{label:"未落实"}})],1)],1),e.ruleForm.resource?s("el-form-item",{attrs:{label:"情况说明：",prop:"resourceRemarks"}},[s("el-input",{attrs:{type:"textarea",placeholder:"已落实"==e.ruleForm.resource?"请填写落实请款会议名称或领导签字意见":"请填写请款过程中或尚未请款，并简要说明"},model:{value:e.ruleForm.resourceRemarks,callback:function(t){e.$set(e.ruleForm,"resourceRemarks",t)},expression:"ruleForm.resourceRemarks"}})],1):e._e(),e.ruleForm.resource?s("el-form-item",{staticClass:"is-required",attrs:{label:"落实情况附件材料：",prop:"situationFlie"}},[s("el-upload",{ref:"uploadSituationFlie",staticClass:"upload-demo",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"","on-success":e.uploadSuccessSituationFlie,"on-error":e.uploadErrorSituationFlie}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("允许上传多个文件")])],1)],1):e._e()],1)])],1),s("div",{staticClass:"grid-content bg-gray grid-content_"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("项目情况")])]),s("el-form-item",{attrs:{label:"项目类型：",prop:"projectType"}},[s("el-checkbox-group",{model:{value:e.ruleForm.projectType,callback:function(t){e.$set(e.ruleForm,"projectType",t)},expression:"ruleForm.projectType"}},[s("el-checkbox",{attrs:{label:"自建项目"},on:{change:e.self_}}),s("el-checkbox",{attrs:{label:"督察督办项目"},on:{change:e.supervise_}}),s("el-checkbox",{attrs:{label:"民心工程项目"},on:{change:e.heart_}}),s("el-checkbox",{attrs:{label:"绩效考核项目"},on:{change:e.achievements_}}),s("el-checkbox",{attrs:{label:"其他项目"},on:{change:e.else_}})],1)],1),e.selfBasis?s("el-form-item",{attrs:{label:"自建项目立项依据：",prop:"projectSelfBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写备注"},model:{value:e.ruleForm.projectSelfBasis,callback:function(t){e.$set(e.ruleForm,"projectSelfBasis",t)},expression:"ruleForm.projectSelfBasis"}})],1):e._e(),e.superviseBasis?s("el-form-item",{attrs:{label:"督察督办项目立项依据：",prop:"projectSuperviseBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写备注"},model:{value:e.ruleForm.projectSuperviseBasis,callback:function(t){e.$set(e.ruleForm,"projectSuperviseBasis",t)},expression:"ruleForm.projectSuperviseBasis"}})],1):e._e(),e.heartBasis?s("el-form-item",{attrs:{label:"民心工程项目立项依据：",prop:"projectHeartBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写文件依据文号"},model:{value:e.ruleForm.projectHeartBasis,callback:function(t){e.$set(e.ruleForm,"projectHeartBasis",t)},expression:"ruleForm.projectHeartBasis"}})],1):e._e(),e.achievementsBasis?s("el-form-item",{attrs:{label:"绩效考核项目立项依据：",prop:"projectAchievementsBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写文件依据文号"},model:{value:e.ruleForm.projectAchievementsBasis,callback:function(t){e.$set(e.ruleForm,"projectAchievementsBasis",t)},expression:"ruleForm.projectAchievementsBasis"}})],1):e._e(),e.elseBasis?s("el-form-item",{attrs:{label:"其他项目立项依据：",prop:"projectElseBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写文件依据文号"},model:{value:e.ruleForm.projectElseBasis,callback:function(t){e.$set(e.ruleForm,"projectElseBasis",t)},expression:"ruleForm.projectElseBasis"}})],1):e._e(),s("el-form-item",{staticClass:"is-required",attrs:{label:"'三重一大'会议纪要：",prop:"file1"}},[s("el-upload",{staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file1,"before-upload":e.beforeUpload,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"","on-success":e.uploadSuccessFile1,"on-error":e.uploadErrorFile1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传关于本项目“三重一大”会议纪要节选(加盖公章, 仅限.jpg/.png格式),允许上传多个文件")])],1)],1),s("el-form-item",{staticClass:"is-required",attrs:{label:"项目方案：",prop:"file3"}},[s("el-upload",{ref:"uploadFlie3",staticClass:"upload-demo",attrs:{"before-upload":e.beforeUploadWord,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile3,"on-error":e.uploadErrorFile3}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传项目建设方案详版(.word格式)")])],1)],1),s("el-form-item",{attrs:{label:"附件材料：",prop:"file6"}},[s("el-upload",{ref:"uploadFlie6",staticClass:"upload-demo",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"","on-success":e.uploadSuccessFile6,"on-error":e.uploadErrorFile6}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("允许上传多个文件")])],1)],1)],1),s("div",{staticClass:"text-center"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交申报")]),s("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重填")])],1)],1)],1)]),s("el-dialog",{attrs:{visible:e.msgDialogVisible,center:"","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.msgDialogVisible=t}}},[s("span",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[e._v("和平区信息化项目建设管理办法"),s("i",{staticClass:"el-icon-close close-button",on:{click:function(t){e.buttonClicked(!1)}}})]),s("div",{staticClass:"manage-law-wrap"},[s("img",{attrs:{src:a("a32e"),alt:"和平区信息化项目建设管理办法"}})]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",disabled:e.restTime>0},on:{click:function(t){t.stopPropagation(),e.buttonClicked(!0)}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.restTime>0,expression:"restTime > 0"}]},[e._v("("+e._s(e.restTime)+"s)")]),e._v("已阅知")])],1)])],1)},ta=[],aa={data:function(){var e=function(e,t,a){!t||/(^1[3|4|5|7|8]\d{9}$)|(^09\d{8}$)/.test(t)&&/^[1-9]\d*$/.test(t)&&11===t.length?a():a(new Error("手机号码不符合规范"))};return{heartBasis:!1,achievementsBasis:!1,elseBasis:!1,selfBasis:!1,superviseBasis:!1,myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},msgDialogVisible:!0,restTime:20,uploadForm:{},type:[{name:"国家专项资金",id:1},{name:"市财政资金",id:2},{name:"区财政资金",id:3}],elsetype:[{name:"其他资金",id:4}],ruleForm:{name:null,company:{id:JSON.parse(sessionStorage.getItem("userData")).id,name:JSON.parse(sessionStorage.getItem("userData")).name},people:null,contacts:null,tel:null,phone:null,mail:null,budgetMoney:null,type:[],resource:null,resourceRemarks:null,budgetRemarks:null,projectType:[],projectSelfBasis:null,projectSuperviseBasis:null,projectHeartBasis:null,projectAchievementsBasis:null,projectElseBasis:null,flie1:null,file3:null,file4:null,file6:null,situationFlie:null},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],company:[{required:!0,message:"请选择申报单位",trigger:"change"}],people:[{required:!0,message:"请选择项目负责人",trigger:"blur"}],contacts:[{required:!0,message:"请输入项目联系人",trigger:"blur"}],tel:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}],phone:[{required:!0,message:"请输入固话",trigger:"blur"}],mail:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],budgetMoney:[{required:!0,message:"请输入预算金额",trigger:"blur"}],type:[{type:"array",required:!0,message:"请至少选择一个预算来源",trigger:"change"}],budgetRemarks:[{required:!0,message:"请输入内容",trigger:"blur"}],resource:[{required:!0,message:"请选择资金落实情况",trigger:"change"}],resourceRemarks:[{required:!0,message:"请填写情况说明",trigger:"blur"}],projectType:[{required:!0,message:"请选择至少一个项目类型",trigger:"change"}],projectSelfBasis:[{required:!0,message:"请输入内容",trigger:"change"}],projectSuperviseBasis:[{required:!0,message:"请输入内容",trigger:"change"}],projectHeartBasis:[{required:!0,message:"请输入内容",trigger:"change"}],projectAchievementsBasis:[{required:!0,message:"请输入内容",trigger:"change"}],projectElseBasis:[{required:!0,message:"请输入内容",trigger:"change"}]},elseCheckbox:!1}},mounted:function(){var e=this;window.df=this,setInterval(function(){e.restTime>0?e.restTime-=1:clearInterval()},1e3)},watch:{"ruleForm.resource":{handler:function(e,t){console.log(e),this.ruleForm.resourceRemarks=null,this.$refs.ruleForm.clearValidate("resourceRemarks")},deep:!0}},methods:{elseCheckboxBoolean:function(e){!0===e?(this.elseCheckbox=!0,this.$nextTick(function(){document.getElementById("mark").setAttribute("class","is-required el-form-item el-form-item--small"),sessionStorage.setItem("mark","1")})):(this.elseCheckbox=!1,this.ruleForm.budgetRemarks=null,document.getElementById("mark").setAttribute("class","el-form-item el-form-item--small"),sessionStorage.setItem("mark","2"))},self_:function(e){this.selfBasis=e,0==e&&(this.ruleForm.projectSelfBasis=null)},supervise_:function(e){this.superviseBasis=e,0==e&&(this.ruleForm.projectSuperviseBasis=null)},achievements_:function(e){this.achievementsBasis=e,0==e&&(this.ruleForm.projectAchievementsBasis=null)},else_:function(e){this.elseBasis=e,0==e&&(this.ruleForm.projectElseBasis=null)},heart_:function(e){this.heartBasis=e,0==e&&(this.ruleForm.projectHeartBasis=null)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("申报信息不完整 或 填写错误",60),!1;t.uploadForm.name=t.ruleForm.name,t.uploadForm.company=t.ruleForm.company.id,t.uploadForm.companyName=t.ruleForm.company.name,t.uploadForm.people=t.ruleForm.people,t.uploadForm.contacts=t.ruleForm.contacts,t.uploadForm.tel=t.ruleForm.tel,t.uploadForm.phone=t.ruleForm.phone,t.uploadForm.mail=t.ruleForm.mail,t.uploadForm.budgetMoney=t.ruleForm.budgetMoney,t.uploadForm.type=t.ruleForm.type,t.uploadForm.resource=t.ruleForm.resource,t.uploadForm.resourceRemarks=t.ruleForm.resourceRemarks,t.uploadForm.projectType=t.ruleForm.projectType,t.uploadForm.projectSelfBasis=t.ruleForm.projectSelfBasis||null,t.uploadForm.projectSuperviseBasis=t.ruleForm.projectSuperviseBasis||null,t.uploadForm.projectHeartBasis=t.ruleForm.projectHeartBasis||null,t.uploadForm.projectAchievementsBasis=t.ruleForm.projectAchievementsBasis||null,t.uploadForm.projectElseBasis=t.ruleForm.projectElseBasis||null,t.uploadForm.budgetRemarks=t.ruleForm.budgetRemarks,t.uploadForm.assignee=sessionStorage.getItem("assignee").toString(),t.uploadForm.curStatus=1,t.uploadForm.file2=null,t.uploadForm.file5=null,t.$confirm("请再次确认申报内容，是否申报该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.declare()}).catch(function(){})})},resetForm:function(e){this.$refs[e].resetFields()},buttonClicked:function(e){e?this.msgDialogVisible=!1:this.$router.push({path:"/project_set_up/declare"})},declare:function(){var e=this;if(void 0===this.uploadForm.file1||void 0===this.uploadForm.file3||void 0===this.uploadForm.situationFlie){if(void 0===this.uploadForm.file1)return void this.$message.error("上传的 “三重一大”会议纪要 缺失!!!",60);if(void 0===this.uploadForm.file3)return void this.$message.error("上传的 项目方案 缺失!!!",60);if(void 0===this.uploadForm.situationFlie)return void this.$message.error("上传的 落实情况附件材料 缺失!!!",60)}this.axios.post("".concat(this.common.basePath,"/activiti/start"),this.uploadForm).then(function(t){0===t.data.meta.code?(e.$message.success("提交成功",20),e.$router.push({path:"/project_set_up/declare"})):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;return t||a||this.$message.error("上传文件只能是 JPG/PNG 格式!"),t||a},beforeUploadWord:function(e){var t="doc"===e.name.substring(e.name.lastIndexOf(".")+1),a="docx"===e.name.substring(e.name.lastIndexOf(".")+1);return t||a?console.log("15151"):this.$message.error("上传文件只能是 doc/docx 格式!"),t||a},uploadSuccessFile1:function(e,t,a){this.uploadForm.file1=a},uploadSuccessFile3:function(e){this.uploadForm.file3=[{name:e.data.name,url:e.data.path}]},uploadSuccessFile4:function(e){this.uploadForm.file4=[{name:e.data.name,url:e.data.path}]},uploadSuccessFile6:function(e,t,a){this.uploadForm.file6=a},uploadSuccessSituationFlie:function(e,t,a){this.uploadForm.situationFlie=a},uploadErrorFile1:function(e,t,a){this.$message.error("上传失败!!",20),this.uploadForm.file1=null},uploadErrorFile3:function(e,t,a){this.$message.error("上传失败!!",20),this.uploadForm.file3=null},uploadErrorFile4:function(e,t,a){this.$message.error("上传失败!!",20),this.uploadForm.file4=null},uploadErrorFile6:function(e,t,a){this.$message.error("上传失败!!",20),this.uploadForm.file6=null},uploadErrorSituationFlie:function(e,t,a){this.$message.error("上传失败!!",20),this.uploadForm.situationFlie=null},getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){if(0===t.data.meta.code){var a=t.data.data;sessionStorage.setItem("unitArr",JSON.stringify(a))}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})}}},sa=aa,ra=(a("a10b"),a("212a"),Object(u["a"])(sa,ea,ta,!1,null,"4dcbcfff",null));ra.options.__file="DeclareForm.vue";var ia=ra.exports,oa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",{staticClass:"page-title"},[e._v("项目申报")]),s("div",{staticClass:"block-wrap"},[s("h4",{staticClass:"block-title"},[e._v("补充申报材料表单")]),s("div",{staticClass:"block-body"},[e.detailData?s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm base-info",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"180px",size:"middle",enctype:"multipart/form-data"}},["edit"==e.typeName||"acceptance"==e.typeName?s("div",[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("基本信息")])]),s("el-form-item",{attrs:{label:"项目名称：",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),s("el-form-item",{attrs:{label:"申报单位："}},[s("span",[e._v(" "+e._s(e.ruleForm.orgName)+" ")])]),s("el-form-item",{attrs:{label:"项目负责人：",prop:"people"}},[s("el-input",{attrs:{placeholder:"请输入项目负责人"},model:{value:e.ruleForm.people,callback:function(t){e.$set(e.ruleForm,"people",t)},expression:"ruleForm.people"}})],1),s("el-form-item",{attrs:{label:"项目联系人：",prop:"contacts"}},[s("el-input",{attrs:{placeholder:"请输入项目联系人"},model:{value:e.ruleForm.contacts,callback:function(t){e.$set(e.ruleForm,"contacts",t)},expression:"ruleForm.contacts"}})],1),s("el-form-item",{attrs:{label:"联系手机：",prop:"tel"}},[s("el-input",{attrs:{placeholder:"请输入联系手机"},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",t)},expression:"ruleForm.tel"}})],1),s("el-form-item",{attrs:{label:"联系固话：",prop:"phone"}},[s("el-input",{attrs:{placeholder:"请输入联系固话"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),s("el-form-item",{attrs:{label:"邮箱：",prop:"mail"}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.ruleForm.mail,callback:function(t){e.$set(e.ruleForm,"mail",t)},expression:"ruleForm.mail"}})],1)],1)]),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("项目预算")])]),s("el-form-item",{attrs:{label:"预算金额：",prop:"budgetMoney"}},[s("el-input",{attrs:{placeholder:"请输入预算金额"},model:{value:e.ruleForm.budgetMoney,callback:function(t){e.$set(e.ruleForm,"budgetMoney",t)},expression:"ruleForm.budgetMoney"}},[s("template",{slot:"append"},[e._v("万元")])],2)],1),s("el-form-item",{attrs:{label:"预算来源：",prop:"budgetType"}},[s("el-checkbox-group",{model:{value:e.ruleForm.budgetType,callback:function(t){e.$set(e.ruleForm,"budgetType",t)},expression:"ruleForm.budgetType"}},[e._l(e.type_,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])}),e._l(e.elsetype,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id},on:{change:e.elseCheckboxBoolean}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})],2)],1),e.elseCheckbox?s("el-form-item",{attrs:{label:"其他资金来源备注：",prop:"budgetRemarks",id:"mark"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入来源备注"},model:{value:e.ruleForm.budgetRemarks,callback:function(t){e.$set(e.ruleForm,"budgetRemarks",t)},expression:"ruleForm.budgetRemarks"}})],1):e._e(),s("el-form-item",{attrs:{label:"资金落实情况：",prop:"financialSituation"}},[s("el-radio-group",{model:{value:e.ruleForm.financialSituation,callback:function(t){e.$set(e.ruleForm,"financialSituation",t)},expression:"ruleForm.financialSituation"}},[s("el-radio",{attrs:{label:"已落实"}}),s("el-radio",{attrs:{label:"未落实"}})],1)],1),e.ruleForm.financialSituation?s("el-form-item",{attrs:{label:"情况说明：",prop:"resourceRemarks"}},[s("el-input",{attrs:{type:"textarea",placeholder:"已落实"==e.ruleForm.financialSituation?"请填写落实请款会议名称或领导签字意见":"请填写请款过程中或尚未请款，并简要说明"},model:{value:e.ruleForm.resourceRemarks,callback:function(t){e.$set(e.ruleForm,"resourceRemarks",t)},expression:"ruleForm.resourceRemarks"}})],1):e._e(),e.ruleForm.financialSituation?s("el-form-item",{staticClass:"middle is-required",attrs:{label:"落实情况附件材料：",prop:"situationFlie"}},[s("el-upload",{ref:"uploadSituationFlie",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.situationFlie?e.ruleForm.situationFlie:[],"on-preview":e.handlePreview,"before-remove":e.beforeRemoveSituationFlie,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"","on-success":e.uploadSuccessSituationFlie,"on-error":e.uploadErrorSituationFlie}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("允许上传多个文件")])],1)],1):e._e()],1)])],1),s("div",{staticClass:"grid-content bg-gray grid-content_"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("项目情况")])]),s("el-form-item",{attrs:{label:"项目类型：",prop:"projectType"}},[s("el-checkbox-group",{model:{value:e.ruleForm.projectType,callback:function(t){e.$set(e.ruleForm,"projectType",t)},expression:"ruleForm.projectType"}},[s("el-checkbox",{attrs:{label:"自建项目"},on:{change:e.self_}}),s("el-checkbox",{attrs:{label:"督察督办项目"},on:{change:e.supervise_}}),s("el-checkbox",{attrs:{label:"民心工程项目"},on:{change:e.heart_}}),s("el-checkbox",{attrs:{label:"绩效考核项目"},on:{change:e.achievements_}}),s("el-checkbox",{attrs:{label:"其他项目"},on:{change:e.else_}})],1)],1),e.selfBasis?s("el-form-item",{attrs:{label:"自建项目立项依据：",prop:"projectSelfBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写备注"},model:{value:e.ruleForm.projectSelfBasis,callback:function(t){e.$set(e.ruleForm,"projectSelfBasis",t)},expression:"ruleForm.projectSelfBasis"}})],1):e._e(),e.superviseBasis?s("el-form-item",{attrs:{label:"督察督办项目立项依据：",prop:"projectSuperviseBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写备注"},model:{value:e.ruleForm.projectSuperviseBasis,callback:function(t){e.$set(e.ruleForm,"projectSuperviseBasis",t)},expression:"ruleForm.projectSuperviseBasis"}})],1):e._e(),e.heartBasis?s("el-form-item",{attrs:{label:"民心工程项目立项依据：",prop:"projectHeartBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写文件依据文号"},model:{value:e.ruleForm.projectHeartBasis,callback:function(t){e.$set(e.ruleForm,"projectHeartBasis",t)},expression:"ruleForm.projectHeartBasis"}})],1):e._e(),e.achievementsBasis?s("el-form-item",{attrs:{label:"绩效考核项目立项依据：",prop:"projectAchievementsBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写文件依据文号"},model:{value:e.ruleForm.projectAchievementsBasis,callback:function(t){e.$set(e.ruleForm,"projectAchievementsBasis",t)},expression:"ruleForm.projectAchievementsBasis"}})],1):e._e(),e.elseBasis?s("el-form-item",{attrs:{label:"其他项目立项依据：",prop:"projectElseBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写文件依据文号"},model:{value:e.ruleForm.projectElseBasis,callback:function(t){e.$set(e.ruleForm,"projectElseBasis",t)},expression:"ruleForm.projectElseBasis"}})],1):e._e(),s("el-form-item",{staticClass:"middle is-required",attrs:{label:"'三重一大'会议纪要：",prop:"file1"}},[s("el-upload",{ref:"uploadFlie1",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file1,"on-preview":e.handlePreview,"before-remove":e.beforeRemove1,"before-upload":e.beforeUploadImage,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"","on-success":e.uploadSuccessFile1,"on-error":e.uploadErrorFile1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传关于本项目“三重一大”会议纪要节选(加盖公章, .jpg .png格式),允许上传多个文件")])],1)],1),s("el-form-item",{staticClass:"middle is-required",attrs:{label:"项目方案：",prop:"file3"}},[s("el-upload",{ref:"uploadFlie3",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file3,"on-preview":e.handlePreview,"before-upload":e.beforeUploadWord,"before-remove":e.beforeRemove3,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile3,"on-error":e.uploadErrorFile3}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传项目建设方案详版(word格式)")])],1)],1),e.ruleForm.file4&&e.detailData.curStatus>=8&&18!=e.detailData.curStatus?s("el-form-item",{staticClass:"middle is-required",attrs:{label:"项目方案(简版)：",prop:"file4"}},[s("el-upload",{ref:"uploadFlie4",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file4,"on-preview":e.handlePreview,"before-upload":e.beforeUploadWord,"before-remove":e.beforeRemove4,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile4,"on-error":e.uploadErrorFile4}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"})],1),s("div",{staticClass:"file-position"},[s("a",{attrs:{href:e.common.basePath+"/project/template",target:"view_window"}},[e._v("点击下载项目方案模版")])])],1):e._e(),s("el-form-item",{staticClass:"middle",attrs:{label:"附件材料：",prop:"file6"}},[s("el-upload",{ref:"uploadFlie6",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file6?"[]"==e.ruleForm.file6?[]:e.ruleForm.file6:[],"on-preview":e.handlePreview,"before-remove":e.beforeRemove6,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"","on-success":e.uploadSuccessFile6,"on-error":e.uploadErrorFile6}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("允许上传多个文件")])],1)],1)],1)],1):e._e(),e.detailData.financeDudget||e.detailData.financePlan||16==e.typeName?s("div",{staticClass:"grid-content bg-gray grid-content_"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("录入财政评审相关意见：")])]),s("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"200px",size:"small",enctype:"multipart/form-data"}},[e.ruleForm.budgetFinance?s("el-form-item",{attrs:{label:"财政意见-调整预算金额：",prop:"budgetFinance"}},[s("el-input",{attrs:{placeholder:"请输入预算金额"},model:{value:e.ruleForm.budgetFinance,callback:function(t){e.$set(e.ruleForm,"budgetFinance",t)},expression:"ruleForm.budgetFinance"}},[s("template",{slot:"append"},[e._v("万元")])],2)],1):e._e(),s("el-form-item",{staticClass:"is-required",attrs:{label:"财政专家评审意见：",prop:"file5"}},[s("el-upload",{ref:"uploadFlie5",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file5,"before-upload":e.beforeUpload5,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:99,"on-success":e.uploadSuccessFile5,"on-error":e.uploadErrorFile5,"before-remove":e.beforeRemove5}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 若有二次评审请都要上传(.jpg .png .pdf格式)")])],1)],1),s("el-form-item",{staticClass:"is-required",attrs:{label:"项目建设方案(终审稿)：",prop:"file2"}},[s("el-upload",{ref:"uploadFlie2",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file2,"before-remove":e.beforeRemove2,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile2,"on-error":e.uploadErrorFile2}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")])],1)],1)],1)],1):e._e(),"edit"==e.typeName&&(e.detailData.budgetMPlan||e.detailData.expertMPlan||e.detailData.leaderMPlan)||6==e.typeName||13==e.typeName||14==e.typeName?s("div",{staticClass:"grid-content bg-gray grid-content_"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("阶段方案：")])]),(13==e.detailData.curStatus||"edit"==e.typeName&&e.detailData.budgetMPlan)&&1==e.budgetRotation?s("el-form-item",{staticClass:"middle is-required",attrs:{label:"预审方案(一稿)：",prop:"budgetMPlan"}},[s("el-upload",{ref:"uploadFlieBudget",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.budgetMPlan?e.ruleForm.budgetMPlan:[],"on-preview":e.handlePreview,"before-upload":e.beforeUploadWord,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFileBudget,"on-error":e.uploadErrorFileBudget}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传预审改进方案(word格式)")])],1)],1):e._e(),(13==e.detailData.curStatus||"edit"==e.typeName&&e.detailData.budgetMMPlan)&&2==e.budgetRotation?s("el-form-item",{staticClass:"middle is-required",attrs:{label:"预审方案(二稿)：",prop:"budgetMMPlan"}},[s("el-upload",{ref:"uploadFlieBudget_",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.budgetMMPlan?e.ruleForm.budgetMMPlan:[],"on-preview":e.handlePreview,"before-upload":e.beforeUploadWord,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFileBudget_,"on-error":e.uploadErrorFileBudget_}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传预审改进方案(word格式)")])],1)],1):e._e(),(14==e.detailData.curStatus||"edit"==e.typeName&&e.detailData.expertMPlan)&&1==e.expertRotation?s("el-form-item",{staticClass:"middle is-required",attrs:{label:"评审方案(一稿)：",prop:"expertMPlan"}},[s("el-upload",{ref:"uploadFlieExpert",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.expertMPlan?e.ruleForm.expertMPlan:[],"on-preview":e.handlePreview,"before-upload":e.beforeUploadWord,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFileExpert,"on-error":e.uploadErrorFileExpert}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传专家评审改进方案(word格式)")])],1)],1):e._e(),(14==e.detailData.curStatus||"edit"==e.typeName&&e.detailData.expertMMPlan)&&2==e.expertRotation?s("el-form-item",{staticClass:"middle is-required",attrs:{label:"评审方案(二稿)：",prop:"expertMMPlan"}},[s("el-upload",{ref:"uploadFlieExpert_",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.expertMMPlan?e.ruleForm.expertMMPlan:[],"on-preview":e.handlePreview,"before-upload":e.beforeUploadWord,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFileExpert_,"on-error":e.uploadErrorFileExpert_}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传专家评审改进方案(word格式)")])],1)],1):e._e(),6==e.typeName||13==e.typeName||14==e.typeName?s("div",[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("返回原因：")])]),s("el-form-item",{attrs:{label:"专家意见：",prop:"expertOpinion"}},e._l(e.expertOpinion,function(t,a){return e.expertOpinion?s("div",{staticClass:"expert"},[s("span",{staticClass:"fl"},[e._v(e._s("专家"+(a+1)+"："))]),s("p",{staticClass:"advice"},[s("span",{staticClass:"fl"},[e._v("一审意见：")]),!t.childrens[0].comment?s("span",{staticClass:"fl"},[e._v("未上传意见")]):s("a",{staticClass:"fl",attrs:{href:t.childrens[0].comment?"/pics"+JSON.parse(t.childrens[0].comment).path:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(JSON.parse(t.childrens[0].comment).name)+"\n\t\t\t\t\t\t\t\t\t\t")])]),2==t.childrens.length?s("p",{staticClass:"advice advice-two"},[s("span",{staticClass:"fl"},[e._v("    二审意见：")]),!t.childrens[1].comment?s("span",{staticClass:"fl"},[e._v("未上传意见")]):s("a",{staticClass:"fl",attrs:{href:t.childrens[1].comment?"/pics"+JSON.parse(t.childrens[1].comment).path:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(JSON.parse(t.childrens[1].comment).name)+"\n\t\t\t\t\t\t\t\t\t\t")])]):e._e()]):e._e()})),s("el-form-item",{attrs:{label:"原因描述：",prop:"rejectReason"}},[e.detailData.rejectReason?s("span",[e._v(e._s(e.detailData.rejectReason))]):s("span",[e._v("未填写")])])],1):e._e()],1):e._e(),17==e.typeName?s("div",{staticClass:"grid-content bg-gray grid-content_"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("网信会议材料：")])]),s("el-form-item",{staticClass:"middle is-required",attrs:{label:"项目方案（简版）：",prop:"file4"}},[s("el-upload",{ref:"uploadFliePlan",attrs:{"file-list":e.ruleForm.file4?e.ruleForm.file4:[],"before-upload":e.beforeUploadWord,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile4,"on-error":e.uploadErrorFile4}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("项目方案(word格式)")])],1),s("div",{staticClass:"file-position"},[s("a",{attrs:{href:e.common.basePath+"/project/template",target:"view_window"}},[e._v("点击下载项目方案模版")])])],1),s("el-form-item",{staticClass:"middle is-required",attrs:{label:"申报单位汇报稿：",prop:"leaderReport"}},[s("el-upload",{ref:"leaderReport",attrs:{"file-list":e.ruleForm.leaderReport?JSON.parse(e.ruleForm.leaderReport):[],"before-upload":e.beforeUploadWordPpt,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:99,"before-remove":e.beforeRemoveLeader,"on-success":e.uploadSuccessLeaderReport,"on-error":e.uploadErrorLeaderReport}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("申报单位汇报稿(请上传word格式和ppt格式的两份文件)")])],1)],1)],1):e._e(),s("div",{staticClass:"text-center"},["acceptance"==this.typeName?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm","acceptance")}}},[e._v("提交审批")]):e._e(),"edit"==this.typeName?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm","edit")}}},[e._v("保存编辑")]):e._e(),"edit"!=this.typeName&&"acceptance"!=this.typeName?s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm","form")}}},[e._v("提交审批")]):e._e(),"edit"!=this.typeName?s("el-button",{on:{click:e.stopDeclare}},[e._v("停止申报")]):e._e(),s("el-button",{on:{click:function(t){e.backFromDeclareAgain()}}},[e._v("返回")])],1)]):e._e()],1)])])},na=[],la=a("a322"),ca={data:function(){var e,t=function(e,t,a){!t||/(^1[3|4|5|7|8]\d{9}$)|(^09\d{8}$)/.test(t)&&/^[1-9]\d*$/.test(t)&&11===t.length?a():a(new Error("手机号码不符合规范"))};return e={projectId:this.$route.params.id,typeName:this.$route.params.type,budgetRotation:this.$route.params.budgetRotation,expertRotation:this.$route.params.expertRotation,detailData:null,expertOpinion:null,heartBasis:!1,achievementsBasis:!1,elseBasis:!1,selfBasis:!1,superviseBasis:!1,isShowBasisBox1:!0,isShowBasisBox2:!1,myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},instanceId:JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.instanceId,assignee:JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.assignee,uploadForm:{file1:null,file3:null,file4:null,file6:null,situationFlie:null,file2:null,file5:null,leaderMPlan:null,budgetMPlan:null,expertMMPlan:null,budgetMMPlan:null,expertMPlan:null,financePlan:null,financeDudget:null},company:null,type_:[{name:"国家专项资金",id:1,checked:!1},{name:"市财政资金",id:2,checked:!1},{name:"区财政资金",id:3,checked:!1}],elsetype:[{name:"其他资金",id:4,checked:!1}],ruleForm:{name:null,company:null,people:null,contacts:null,tel:null,phone:null,mail:null,type:[],resource:null,financialSituation:null,resourceRemarks:null,budgetMoney:null,budgetRemarks:null,projectType:[],projectSelfBasis:null,projectSuperviseBasis:null,projectHeartBasis:null,projectAchievementsBasis:null,projectElseBasis:null,file1:null,file3:null,file4:null,file6:null,situationFlie:null,file2:null,file5:null,leaderMPlan:null,budgetMPlan:null,expertMMPlan:null,budgetMMPlan:null,expertMPlan:null,leaderReport:null,budgetFinance:null},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],company:[{required:!0,message:"请选择申报单位",trigger:"change"}],people:[{required:!0,message:"请选择项目负责人",trigger:"blur"}],contacts:[{required:!0,message:"请输入项目联系人",trigger:"blur"}],tel:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}],phone:[{required:!0,message:"请输入固话",trigger:"blur"}],mail:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],budgetType:[{type:"array",required:!0,message:"请至少选择一个预算来源",trigger:"change"}],financialSituation:[{required:!0,message:"请选择资金落实情况",trigger:"change"}],resourceRemarks:[{required:!0,message:"请填写情况说明",trigger:"blur"}],budgetMoney:[{required:!0,message:"请输入预算金额",trigger:"blur"}],budgetRemarks:[{required:!0,message:"请输入内容",trigger:"blur"}],projectType:[{required:!0,message:"请选择项目类型",trigger:"change"}],projectSelfBasis:[{required:!0,message:"请输入内容",trigger:"change"}],projectSuperviseBasis:[{required:!0,message:"请输入内容",trigger:"change"}],projectHeartBasis:[{required:!0,message:"请输入内容",trigger:"change"}],projectAchievementsBasis:[{required:!0,message:"请输入内容",trigger:"change"}],projectElseBasis:[{required:!0,message:"请输入内容",trigger:"change"}],budgetFinance:[{required:!0,message:"请输入预算金额",trigger:"blur"}]},curStatus:null},Object(la["a"])(e,"projectId",JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.projectId),Object(la["a"])(e,"elseCheckbox",!1),e},mounted:function(){this.showExpertOpinion(),this.getDeclareUnit(),this.getDetail()},watch:{},created:function(){window.da=this},computed:{},methods:{showExpertOpinion:function(){var e=this;e.axios.get("".concat(e.common.basePath,"/assessment_expert/all/").concat(e.projectId),e._expertOpinionParams()).then(function(t){0===t.data.meta.code?e.expertOpinion=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_expertOpinionParams:function(){return{params:{type:13==this.$route.params.type?1:2}}},getDetail:function(){var e=this;e.axios.get("".concat(e.common.basePath,"/project/detail/").concat(e.projectId),e._detailParams()).then(function(t){0===t.data.meta.code?(e.curStatus=t.data.data.curStatus,e.ruleForm=t.data.data,e.ruleForm.people=t.data.data.linkman,e.ruleForm.contacts=t.data.data.liabilityUser,e.ruleForm.budgetType=t.data.data.budgetType,e.ruleForm.financialSituation=t.data.data.financialSituation,e.ruleForm.projectType=JSON.parse(t.data.data.projectType),e.ruleForm.file1=JSON.parse(t.data.data.meetingSummary),e.ruleForm.file2=JSON.parse(t.data.data.financePlan),e.ruleForm.file3=JSON.parse(t.data.data.projectPlan),e.ruleForm.file4=JSON.parse(t.data.data.projectPlanSimple),e.ruleForm.file5=JSON.parse(t.data.data.financeDudget),e.ruleForm.file6=JSON.parse(t.data.data.remarksFile),e.ruleForm.situationFlie=t.data.data.situationFlie?JSON.parse(t.data.data.situationFlie):null,e.ruleForm.expertMPlan=JSON.parse(t.data.data.expertMPlan),e.ruleForm.budgetMPlan=JSON.parse(t.data.data.budgetMPlan),e.ruleForm.expertMMPlan=t.data.data.expertMMPlan?JSON.parse(t.data.data.expertMMPlan):null,e.ruleForm.budgetMMPlan=t.data.data.budgetMMPlan?JSON.parse(t.data.data.budgetMMPlan):null,e.uploadForm=t.data.data,e.detailData=t.data.data,t.data.data.budgetRemarks?e.elseCheckbox=!0:e.elseCheckbox=!1,t.data.data.projectSelfBasis?e.selfBasis=!0:e.selfBasis=!1,t.data.data.projectSuperviseBasis?e.superviseBasis=!0:e.superviseBasis=!1,t.data.data.projectHeartBasis?e.heartBasis=!0:e.heartBasis=!1,t.data.data.projectAchievementsBasis?e.achievementsBasis=!0:e.achievementsBasis=!1,t.data.data.projectElseBasis?e.elseBasis=!0:e.elseBasis=!1):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_detailParams:function(){return{params:{id:this.projectId}}},elseCheckboxBoolean:function(e){!0===e?(this.elseCheckbox=!0,this.$nextTick(function(){document.getElementById("mark").setAttribute("class","is-required el-form-item el-form-item--small"),sessionStorage.setItem("mark","1")})):(this.elseCheckbox=!1,this.ruleForm.budgetRemarks=null,document.getElementById("mark").setAttribute("class","el-form-item el-form-item--small"),sessionStorage.setItem("mark","2"))},self_:function(e){console.log(e),this.selfBasis=e,e||(this.ruleForm.projectSelfBasis=null)},supervise_:function(e){this.superviseBasis=e,0==e&&(this.ruleForm.projectSuperviseBasis=null)},achievements_:function(e){this.achievementsBasis=e,e||(this.ruleForm.projectAchievementsBasis=null)},else_:function(e){this.elseBasis=e,e||(this.ruleForm.projectElseBasis=null)},heart_:function(e){this.heartBasis=e,e||(this.ruleForm.projectHeartBasis=null)},submitForm:function(e,t){var a=this;this.$refs[e].validate(function(e){if(!e)return a.$message.error("请检查信息填写是否完整",60),!1;a.uploadForm.assignee=JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.assignee,a.uploadForm.instanceId=JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.instanceId,a.uploadForm.curStatus=a.curStatus,"edit"!=t&&"acceptance"!=t||(a.uploadForm.name=a.ruleForm.name,a.uploadForm.company=a.ruleForm.orgId,a.uploadForm.people=a.ruleForm.people,a.uploadForm.contacts=a.ruleForm.contacts,a.uploadForm.tel=a.ruleForm.tel,a.uploadForm.phone=a.ruleForm.phone,a.uploadForm.mail=a.ruleForm.mail,a.uploadForm.budgetMoney=a.ruleForm.budgetMoney,a.uploadForm.type=a.ruleForm.budgetType,a.uploadForm.budgetRemarks=a.ruleForm.budgetRemarks,a.uploadForm.resource=a.ruleForm.financialSituation,a.uploadForm.resourceRemarks=a.ruleForm.resourceRemarks,a.uploadForm.situationFlie=a.ruleForm.situationFlie||null,a.uploadForm.projectType=a.ruleForm.projectType,a.uploadForm.projectSelfBasis=a.ruleForm.projectSelfBasis,a.uploadForm.projectSuperviseBasis=a.ruleForm.projectSuperviseBasis,a.uploadForm.projectHeartBasis=a.ruleForm.projectHeartBasis,a.uploadForm.projectAchievementsBasis=a.ruleForm.projectAchievementsBasis,a.uploadForm.projectElseBasis=a.ruleForm.projectElseBasis,a.uploadForm.file1=a.ruleForm.file1||null,a.uploadForm.file3=a.ruleForm.file3||null,a.uploadForm.file4=a.ruleForm.file4||null,a.uploadForm.file6=a.ruleForm.file6||null),(a.detailData.financeDudget||a.detailData.financePlan||16==t)&&(a.uploadForm.file2=a.ruleForm.file2||null,a.uploadForm.file5=a.ruleForm.file5||null,a.uploadForm.budgetFinance=a.ruleForm.budgetFinance),("edit"==t&&(a.detailData.budgetMPlan||a.detailData.expertMPlan||a.detailData.leaderMPlan)||6==t||13==t||14==t)&&(a.uploadForm.leaderMPlan=a.ruleForm.leaderMPlan,a.uploadForm.budgetMPlan=a.ruleForm.budgetMPlan,a.uploadForm.budgetMMPlan=a.ruleForm.budgetMMPlan,a.uploadForm.expertMMPlan=a.ruleForm.expertMMPlan,a.uploadForm.expertMPlan=a.ruleForm.expertMPlan),17==t&&(a.uploadForm.file4=a.ruleForm.file4||null,a.uploadForm.leaderReport=a.ruleForm.leaderReport||null);var s=a;a.$confirm("edit"!=t?"是否提交审批？":"确认提交编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.declare(t)}).catch(function(e){})})},getCurStatus:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/detail/").concat(this.projectId),this._curStatusParams()).then(function(t){0===t.data.meta.code?e.curStatus=t.data.data.curStatus:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_curStatusParams:function(){return{params:{id:this.projectId}}},stopDeclare:function(){var e=this;this.$prompt("请输入停止申报原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.void_(a)}).catch(function(){})},void_:function(e){var t=this,a={rejectReason:e,instanceId:JSON.parse(sessionStorage.getItem("rowDeclareInfo")).processVariables.instanceId};this.axios.post("".concat(this.common.basePath,"/activiti/instance/delete"),a).then(function(e){0===e.data.meta.code?(t.$message.success("该项目已关闭！",20),t.tipsDialogVisible_=!1,t.$router.push({path:"/project_set_up/declare"})):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})},declare:function(e){var t=this,a=this;0!==this.uploadForm.file1.length?0!==this.uploadForm.file3.length?this.uploadForm.situationFlie&&0===this.uploadForm.situationFlie.length?this.$message.error("上传的 落实情况附件材料 缺失!!!",60):("edit"==this.$route.params.type&&this.detailData.curStatus>8||"edit"!=this.$route.params.type&&17==this.detailData.curStatus)&&null==this.uploadForm.file4?this.$message.error("上传的 项目方案(简版) 缺失!!!",60):("edit"==this.$route.params.type&&this.detailData.curStatus>8&&12!=this.detailData.curStatus||"edit"!=this.$route.params.type&&17==this.detailData.curStatus)&&null==this.uploadForm.leaderReport?this.$message.error("上传的 申报单位汇报稿 缺失!!!",60):void 0!=this.uploadForm.expertMPlan||14!=this.detailData.curStatus||1!=this.expertRotation?void 0!=this.uploadForm.expertMMPlan||14!=this.detailData.curStatus||2!=this.expertRotation?void 0!=this.uploadForm.budgetMPlan||13!=this.detailData.curStatus||1!=this.budgetRotation?void 0!=this.uploadForm.budgetMMPlan||13!=this.detailData.curStatus||2!=this.budgetRotation?this.uploadForm.financePlan&&0==this.uploadForm.financePlan.length&&16==this.detailData.curStatus?this.$message.error("上传的 项目建设方案(终审稿) 缺失!!!",60):this.uploadForm.financeDudget&&0==this.uploadForm.financeDudget.length&&16==this.detailData.curStatus?this.$message.error("上传的 财政专家评审意见 缺失!!!",60):"acceptance"==e?this.axios.put("acceptance"==e?"".concat(this.common.basePath,"/activiti/udpate"):null,this.uploadForm).then(function(e){0===e.data.meta.code?a.$router.push({path:"/project_set_up/declare"}):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)}):this.axios.post("edit"!=e?"".concat(this.common.basePath,"/activiti/complete"):"".concat(this.common.basePath,"/project/update/").concat(this.detailData.instanceId),this.uploadForm).then(function(s){0===s.data.meta.code?"edit"!=e?a.$router.push({path:"/project_set_up/declare"}):(t.$message.success(s.data.meta.message,20),a.$router.push({path:sessionStorage.getItem("historyPath")||"/"}),sessionStorage.removeItem("historyPath")):t.$message.error(s.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)}):this.$message.error("上传的 预审改进方案(终稿) 缺失!!!",60):this.$message.error("上传的 预审改进方案(初稿) 缺失!!!",60):this.$message.error("上传的 专家评审改进方案(终稿) 缺失!!!",60):this.$message.error("上传的 专家评审改进方案(初稿) 缺失!!!",60):this.$message.error("上传的 项目方案 缺失!!!",60):this.$message.error("上传的 “三重一大”会议纪要 缺失!!!",60)},getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){0===t.data.meta.code?e.company=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},beforeUploadImage:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;return t||a||this.$message.error("上传文件只能是 JPG/PNG 格式!"),t||a},beforeUploadWord:function(e){var t="doc"===e.name.substring(e.name.lastIndexOf(".")+1),a="docx"===e.name.substring(e.name.lastIndexOf(".")+1);return t||a?console.log("15151"):this.$message.error("上传文件只能是 doc/docx 格式!"),t||a},beforeUploadWordPpt:function(e){var t="doc"===e.name.substring(e.name.lastIndexOf(".")+1),a="docx"===e.name.substring(e.name.lastIndexOf(".")+1),s="ppt"===e.name.substring(e.name.lastIndexOf(".")+1),r="pptx"===e.name.substring(e.name.lastIndexOf(".")+1);return t||a||s||r||this.$message.error("上传文件只能是 doc/docx/ppt/pptx 格式!"),t||a||s||r},handlePreview:function(e){},uploadSuccessFile1:function(e,t,a){this.ruleForm.file1=a},uploadSuccessFile2:function(e){this.ruleForm.file2=[{name:e.data.name,url:e.data.path}],this.ruleForm.financePlan=[{name:e.data.name,url:e.data.path}]},uploadSuccessFile5:function(e,t,a){this.ruleForm.file5=a,this.ruleForm.financeDudget=a},uploadSuccessFile3:function(e,t,a){this.ruleForm.file3=[{name:e.data.name,url:e.data.path}]},uploadSuccessFile4:function(e,t,a){this.ruleForm.file4=[{name:e.data.name,url:e.data.path}]},uploadSuccessFileLeader:function(e,t,a){this.ruleForm.leaderMPlan=[{name:e.data.name,url:e.data.path}]},uploadSuccessFileExpert:function(e,t,a){this.ruleForm.expertMPlan=[{name:e.data.name,url:e.data.path}]},uploadSuccessFileExpert_:function(e,t,a){this.ruleForm.expertMMPlan=[{name:e.data.name,url:e.data.path}]},uploadSuccessFileBudget:function(e,t,a){this.ruleForm.budgetMPlan=[{name:e.data.name,url:e.data.path}]},uploadSuccessFileBudget_:function(e,t,a){this.ruleForm.budgetMMPlan=[{name:e.data.name,url:e.data.path}]},uploadSuccessFile6:function(e,t,a){this.ruleForm.file6=a},uploadSuccessSituationFlie:function(e,t,a){this.ruleForm.situationFlie=a},uploadSuccessLeaderReport:function(e,t,a){this.ruleForm.leaderReport=a},uploadErrorFile1:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file1=null},uploadErrorFile2:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file2=null},uploadErrorFile5:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file5=null},uploadErrorFile3:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file3=null},uploadErrorFile4:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file4=null},uploadErrorFileLeader:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.leaderMPlan=null},uploadErrorFileExpert:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.expertMPlan=null},uploadErrorFileExpert_:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.expertMMPlan=null},uploadErrorFileBudget:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.budgetMPlan=null},uploadErrorFileBudget_:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.budgetMMPlan=null},uploadErrorFile6:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file6=null},uploadErrorSituationFlie:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.situationFlie=null},uploadErrorLeaderReport:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.leaderReport=null},beforeRemove1:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.file1=t,a.ruleForm.file1=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.uploadForm.file1=t,a.ruleForm.file1=t,a.$message({type:"info",message:"已取消删除"})})},beforeRemove2:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.ruleForm.file2=t,a.uploadForm.financePlan=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.ruleForm.file2=t,a.$message({type:"info",message:"已取消删除"})})},beforeUpload5:function(e,t){var a="image/jpeg"===e.type,s="image/png"===e.type,r="application/pdf"===e.type;return a||s||r||this.$message.error("上传文件只能是 JPG/PNG/PDF 格式!"),a||s||r},beforeRemove3:function(e,t){var a=this;return console.log(e,t),console.log(this.uploadForm.file3),console.log(this.ruleForm.file3),this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.file3=t,a.ruleForm.file3=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.uploadForm.file3=t,a.ruleForm.file3=t,a.$message({type:"info",message:"已取消删除"})})},beforeRemove4:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.file4=t,a.ruleForm.file4=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.uploadForm.file4=t,a.ruleForm.file4=t,a.$message({type:"info",message:"已取消删除"})})},beforeRemove5:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.file5=t,a.uploadForm.financeDudget=t,a.ruleForm.file5=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){})},beforeRemove6:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.file6=t,a.ruleForm.file6=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.uploadForm.file6=t,a.ruleForm.file6=t})},beforeRemoveSituationFlie:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.situationFlie=t,a.ruleForm.situationFlie=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.uploadForm.situationFlie=t,a.ruleForm.situationFlie=t})},beforeRemoveLeader:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.leaderReport=t,a.ruleForm.leaderReport=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){})},backFromDeclareAgain:function(){this.$router.push({path:sessionStorage.getItem("historyPath")}),sessionStorage.removeItem("historyPath")}}},ua=ca,ma=(a("bc39"),Object(u["a"])(ua,oa,na,!1,null,"0dc0a8cd",null));ma.options.__file="DeclareAgain.vue";var da=ma.exports,pa=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-detail"},[s("h2",{staticClass:"page-title"},[e._v("项目申报")]),e.detailData?s("div",{staticClass:"block-wrap wrap-box-position"},[s("div",{class:{"top-fixed_v":e.isVclass,"top-fixed_h":e.isHclass,"top-fixed":!0}},[s("div",{staticClass:"gray-line"}),s("h4",{staticClass:"block-title"},[s("el-breadcrumb",{staticClass:"bread-style",attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"-1"}}},[s("span",{on:{click:e.back}},[e._v(e._s(e.stageNameArr[e.tabPosition]))])]),s("el-breadcrumb-item",[e._v("列表")]),s("el-breadcrumb-item",[e._v("详情")])],1)],1),s("div",{staticClass:"block-step"},[s("p",{staticClass:"name-title"},[e._v(e._s("项目名称："+e.detailData.name))]),s("el-steps",{attrs:{active:e.stepNow,"finish-status":"success","align-center":""}},e._l(e.stepsHistory,function(t,a){return s("el-step",{key:""+t.taskName+a,attrs:{title:t.taskName}},[s("template",{slot:"title"},[t.childrens&&t.childrens.length>0?s("el-popover",{attrs:{placement:"bottom",trigger:"hover","popper-class":"popper-opcity"}},[e._l(t.childrens,function(t,a){return s("p",[s("el-button",{staticClass:"step-popover-item",attrs:{type:"text"},on:{click:function(a){e.taskBindFun(t)}}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s("无"==e.common._convertDate(t.endTime,"yyyy-MM-dd")?"":e.common._convertDate(t.endTime,"yyyy-MM-dd"))+"\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(15==t.taskLocalVariables.cur_status?t.taskLocalVariables.pointName:t.taskName)+"\n\t\t\t\t\t\t\t\t\t\t\t"),1==t.taskLocalVariables.cur_status||2==t.taskLocalVariables.cur_status&&1==t.taskLocalVariables.read_status||3==t.taskLocalVariables.cur_status||5==t.taskLocalVariables.cur_status||15==t.taskLocalVariables.cur_status||12==t.taskLocalVariables.cur_status&&1==t.taskLocalVariables.read_status||18==t.taskLocalVariables.cur_status?e._e():s("i",{staticClass:"fa fa-info-circle"})])],1)}),s("label",{staticClass:"popover-reference",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t\t\t"+e._s(t.taskName)+"\n\t\t\t\t\t\t\t\t\t\t"),s("span",[e._v(e._s(t.isReject?"(已关闭)":""))])])],2):s("span",[e._v(e._s(t.taskName))])],1)],2)}))],1)]),s("div",{staticClass:"block-body mrt-b"},[s("div",{staticClass:"body-content"},[s("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"基础信息",name:"base"}},[s("base-info",{attrs:{projectId:e.projectId}})],1),s("el-tab-pane",{attrs:{label:"申报历史",name:"history"}},[s("h4",{staticClass:"block-depart-title"},[e._v("历史记录\n\t\t\t\t\t\t\t\t"),s("el-button",{staticClass:"fr",attrs:{type:"primary",icon:"fa fa-print",size:"small"},on:{click:e.print}},[e._v(" 打 印")])],1),s("div",{staticClass:"clear"}),s("div",{staticStyle:{width:"calc(100%)"},attrs:{id:"myDivId"}},[s("p",{staticClass:"name-title"},[e._v(e._s("项目名称："+e.detailData.name))]),s("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"time-line_ pic"},[s("div",[s("el-button",{staticClass:"clear tl-title",attrs:{type:"",size:"middle",round:""}},[e._v("开  始")])],1),s("div",e._l(e.history,function(t,a){return s("ul",{staticClass:"tl-item"},[s("li",{staticClass:"tl-item-left fl"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.taskName)+"\n\t\t\t\t\t\t\t\t\t\t\t")]),s("li",{staticClass:"tl-item-right fl b-c-e"},[t.processTaskId?s("i",{staticClass:"tl-item-right-rount huise-rount",on:{click:function(a){e.taskBindFun(t)}}}):s("i",{staticClass:"tl-item-right-rount"}),s("div",{staticClass:"content-child-scorll"},[s("div",{staticClass:"content-child"},[t.childrens?e._e():s("span",{staticClass:"child-item-span"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.processTaskId?e.common._convertDate(t.createTime,"yyyy-MM-dd"):"")+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),e._l(t.childrens,function(a,r){return t.childrens?s("ul",{staticClass:"tr-item fl",class:{"tr-item-last":r+1==t.childrens.length}},[s("li",{staticClass:"tr-item-top"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.common._convertDate(a.endTime,"yyyy-MM-dd"))+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),s("li",{staticClass:"tr-item-bottom"},[s("i",{staticClass:"tr-item-bottom-rount huise-rount",on:{click:function(t){e.taskBindFun(a)}}}),s("div",{staticClass:"content_"},[s("span",{staticClass:"arrow-top fl"}),s("div",{staticClass:"content-title fl"},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(15==a.taskLocalVariables.cur_status?a.taskLocalVariables.pointName:""+a.taskName)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])])])]):e._e()})],2)])])])})),s("div",[s("el-button",{staticClass:"clear tl-title tl-title-color",attrs:{type:"",size:"middle"}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(9==e.detailData.stage?"已完结":"未完结")+"\n\t\t\t\t\t\t\t\t\t\t")])],1)])])]),s("el-tab-pane",{attrs:{label:"进度汇报",name:"schedule"}},[s("progress-report",{attrs:{projectId:e.projectId},on:{addPointEmit:e.addPointEmitClick}})],1)],1)],1)])]):e._e(),s("el-dialog",{attrs:{title:"文件图片",visible:e.fileDialogVisible,width:"50%","show-close":!1},on:{"update:visible":function(t){e.fileDialogVisible=t}}},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.common.picsBasePath+e.fileUrl,alt:""}})]),e._e(),"{}"!=JSON.stringify(e.currentTask)?s("el-dialog",{attrs:{title:e.currentTask.taskName,visible:e.taskDialogVisible,width:"60%"},on:{"update:visible":function(t){e.taskDialogVisible=t}}},[s("el-form",[2!=e.currentTask.taskLocalVariables.cur_status&&4!=e.currentTask.taskLocalVariables.cur_status&&7!=e.currentTask.taskLocalVariables.cur_status&&12!=e.currentTask.taskLocalVariables.cur_status||1==e.currentTask.taskLocalVariables.read_status?e._e():s("el-form-item",{attrs:{label:"返回原因: "}},[s("span",[e._v(e._s(e.currentTask.taskLocalVariables.rejectReason))])]),9==e.currentTask.taskLocalVariables.cur_status?s("el-form-item",{attrs:{label:"审批意见: "}},[s("span",[e._v(e._s(e.currentTask.taskLocalVariables.leaderOpinion))])]):e._e(),8==e.currentTask.taskLocalVariables.cur_status?s("el-form-item",{attrs:{label:"上会材料: "}},[s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.metingFile||[]}})],1):e._e(),9==e.currentTask.taskLocalVariables.cur_status?s("el-form-item",{attrs:{label:"附件: "}},[s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.meetingAttachment}})],1):e._e(),11==e.currentTask.taskLocalVariables.cur_status||16==e.currentTask.taskLocalVariables.cur_status?s("el-form-item",{attrs:{label:"财政专家评审意见: "}},[s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.file5}})],1):e._e(),11==e.currentTask.taskLocalVariables.cur_status||16==e.currentTask.taskLocalVariables.cur_status?s("el-form-item",{attrs:{label:"项目建设方案(终审稿): "}},[s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.file2}})],1):e._e(),13==e.currentTask.taskLocalVariables.cur_status?s("el-form-item",{attrs:{label:"预审方案: "}},[s("br"),s("span",[e._v("预审方案（一稿）：")]),s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.budgetMPlan}}),s("br"),e.currentTask.taskLocalVariables.budgetMMPlan?s("span",[e._v("预审方案（二稿）：")]):e._e(),s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.budgetMMPlan}})],1):e._e(),14==e.currentTask.taskLocalVariables.cur_status?s("el-form-item",{attrs:{label:"评审方案: "}},[s("br"),s("span",[e._v("评审方案（一稿）：")]),s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.expertMPlan}}),s("br"),e.currentTask.taskLocalVariables.expertMMPlan?s("span",[e._v("评审方案（二稿）：")]):e._e(),s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.expertMMPlan}})],1):e._e(),17==e.currentTask.taskLocalVariables.cur_status?s("el-form-item",{attrs:{label:"项目方案(简版): "}},[s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.file4}})],1):e._e(),17==e.currentTask.taskLocalVariables.cur_status?s("el-form-item",{attrs:{label:"申报单位汇报稿: "}},[s("file-list",{attrs:{fileList:e.currentTask.taskLocalVariables.leaderReport}})],1):e._e(),(4==e.currentTask.taskLocalVariables.cur_status||7==e.currentTask.taskLocalVariables.cur_status)&&e.currentExpertList.length>0?s("div",{attrs:{label:"上会材料: "}},[e.currentExpertList.length>0?s("el-button-group",e._l(e.currentExpertList,function(t,r){return s("img",{key:""+t.assExpertName+r,staticClass:"expert-head-img",attrs:{src:a("f475")},on:{click:function(t){e.currentExpertIndex=r}}})})):e._e(),e.currentExpertList.length>0?s("span",{attrs:{type:"text",disabled:""}},[e._v("共 "+e._s(e.currentExpertList.length)+" 名专家")]):e._e(),e.currentExpertList[e.currentExpertIndex].comment?s("div",[s("a",{attrs:{href:""+e.common.picsBasePath+JSON.parse(e.currentExpertList[e.currentExpertIndex].comment).path,target:"blank"}},[e._v("\n            "+e._s(JSON.parse(e.currentExpertList[e.currentExpertIndex].comment).name))])]):s("div",[s("el-upload",{attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"show-file-list":!1,"on-success":function(t){e.uploadSuccess(t,"commentUpload")}}},[s("el-button",{attrs:{size:"middle",type:"primary"}},[e._v("选择文件")])],1)],1)],1):e._e()],1)],1):e._e()],1)},ha=[],fa=(a("f751"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.pointDetail?a("div",[e.pointDetail.stage>=8?a("ul",{staticClass:"content"},[e.pointDetail?a("div",[a("h4",{staticClass:"block-depart-title"},[e._v("\n\t\t\t\t汇报历史\n\t\t\t")]),e._l(e.pointDetail.checkPoint,function(t,s){return a("div",{staticClass:"schedule-box"},[a("p",{staticClass:"point-time"},[e._v(e._s(e.common._convertDate(t.endTime,"yyyy.MM.dd")))]),a("ul",{staticClass:"point-box point-box-w"},[a("h4",{staticClass:"block-depart-title_",staticStyle:{overflow:"hidden"}},[a("span",{staticClass:"fl"},[e._v(e._s(t.pointName))]),a("span",{staticClass:"fr"},[e._v(e._s(e.common._convertDate(t.beginTime,"yyyy.MM.dd"))+"~"+e._s(e.common._convertDate(t.endTime,"yyyy.MM.dd")))])]),a("li",{staticClass:"file-h50"},[a("span",{staticClass:"fl item-p"},[e._v("进度简述：")]),a("span",[e._v(e._s(t.remark))])]),a("li",[a("span",{staticClass:"item-p fl"},[e._v("项目附件：")]),a("a",{staticClass:"fl",attrs:{href:t.attachment?"/pics"+JSON.parse(t.attachment).path:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.attachment?JSON.parse(t.attachment).name:"")+"\n\t\t\t\t\t\t")])]),a("li",{staticClass:"mark-h60"},[a("div",{staticClass:"text-r"},[e._v("报送人："+e._s(t.creator))]),a("div",{staticClass:"text-r"},[e._v("报送时间："+e._s(e.common._convertDate(t.createTime,"yyyy.MM.dd")))])])])])})],2):e._e(),8==e.pointDetail.stage&&e.userData.id==e.pointDetail.orgId?a("div",{staticClass:"schedule-box schedule-box-add"},[a("el-button",{staticClass:"add-btn point-time ",attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.clickIsShowAddPoint}},[e._v("进度汇报")]),a("el-button",{staticClass:"add-btn point-time ",attrs:{type:"success",size:"mini",icon:"el-icon-setting"},on:{click:e.completion}},[e._v("实施完结")]),e.isShowAddPoint?a("div",{staticClass:"point-box point-box-w"},[a("el-form",{ref:"formSchedule",attrs:{model:e.formSchedule,"label-width":"140px",size:"middle"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"阶段名称：",prop:"pointName",rules:[{required:!0,message:"请输入阶段名称",trigger:"blur"}]}},[a("el-input",{staticClass:"input",attrs:{type:"text",placeholder:"阶段名称"},model:{value:e.formSchedule.pointName,callback:function(t){e.$set(e.formSchedule,"pointName",t)},expression:"formSchedule.pointName"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"开始结束时间：",prop:"pointDate",rules:[{required:!0,message:"请选择开始结束时间",trigger:"blur"}]}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间",align:"right"},model:{value:e.formSchedule.pointDate,callback:function(t){e.$set(e.formSchedule,"pointDate",t)},expression:"formSchedule.pointDate"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"进度简述：",prop:"remark",rules:[{required:!0,message:"请输入进度简述",trigger:"blur"},{validator:e.validatorRemark,trigger:"blur"}]}},[a("el-input",{staticClass:"fl input",attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入进度描述(150~230字)"},model:{value:e.formSchedule.remark,callback:function(t){e.$set(e.formSchedule,"remark",t)},expression:"formSchedule.remark"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"项目附件：",prop:"attachment",rules:[{required:!0,message:"请上传项目附件",trigger:"blur"}]}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"mark-h30",attrs:{label:""}},[a("el-button",{staticClass:"fr",attrs:{size:"small"},on:{click:e.savePoint}},[e._v("保存")]),a("el-button",{staticClass:"fr btn-marr16",attrs:{size:"small"},on:{click:function(t){e.isShowAddPoint=!1}}},[e._v("取消")])],1)],1)],1)],1)],1):e._e()],1):e._e()]):e._e(),e.pointDetail.stage<8?a("span",{staticClass:"text-gray"},[e._v("\n\t\t该项目审批进行中, 还未进行实施.\n\t")]):e._e(),9==e.pointDetail.stage?a("span",{staticClass:"complete",attrs:{"show-overflow-tooltip":""}},[e._v("\n\t\t已完结\n\t")]):e._e()]):e._e()}),ga=[],ba={props:{projectId:{required:!0}},data:function(){return{isLoading:!0,userData:JSON.parse(sessionStorage.getItem("userData")),isShowAddPoint:!1,isShowBaseInfo:!0,pointDetail:null,point:"",formSchedule:{pointDate:"",attachment:"",payMoney:"",schedule:"",remark:"",pointName:""},history:"",processTaskIdArr:[],opinionArr:[],headimg:'this.src="'+a("3244")+'"',opinionContent:"",headimgindex:"",placeholder:"请填写你的宝贵审核意见...",myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))}}},methods:{uploadSuccessFile:function(e){this.formSchedule.attachment=JSON.stringify(e.data)},savePoint:function(){this.postAdd()},UploadUrl:function(){return this.common.basePath+"/file/"+this.projectId+"/uplode"},clickIsShowAddPoint:function(){this.isShowAddPoint=!this.isShowAddPoint},validatorProgress:function(e,t,a){var s=/^\d+$/;s.test(t)?t>100?a(new Error("只能填写小于一百的正整数")):a():a(new Error("只能填写小于一百的正整数"))},validatorRemark:function(e,t,a){t.length<150?a(new Error("内容个数必须大于150")):t.length>230?a(new Error("内容个数不能超过230")):a()},getPointDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/checkpoint/point/").concat(this.projectId),this._pointDetailParams()).then(function(t){e.pointDetail=t.data.data,e.point=t.data.data.checkPoint,8==t.data.data.stage&&(e.isShowSchedulePoint=!1,e.isShowScheduleText=!0)}).catch(function(t){e.$message.error(t)})},_pointDetailParams:function(){return{params:{projectId:this.projectId}}},postAdd:function(){var e=this;this.$refs.formSchedule.validate(function(t){if(!t)return!1;e.axios.post("".concat(e.common.basePath,"/checkpoint/point"),e._postAddParams()).then(function(t){0===t.data.meta.code?(e.isShowAddPoint=!1,e.$refs.formSchedule.resetFields(),e.getPointDetail(),e.$emit("addPointEmit")):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})})},_postAddParams:function(){var e=JSON.parse(JSON.stringify(this.formSchedule));return e.beginTime=new Date(e.pointDate[0]).getTime(),e.endTime=new Date(e.pointDate[1]).getTime(),e.schedule=e.schedule/100,e.projectId=this.projectId,e},completion:function(){var e=this,t={instanceId:this.pointDetail.instanceId};this.$confirm("项目实施完成？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.post("".concat(e.common.basePath,"/project/end"),t).then(function(t){0===t.data.meta.code?(e.$message.success(t.data.meta.message,20),e.getPointDetail()):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})}).catch(function(){})},handleRemoveComment:function(e,t,a){0==e.meta.code&&(this.publishOpinion(e.data,t),t.comment=JSON.stringify(e.data),this.$refs[a][0].clearFiles())},handlePreview:function(e){this.fileUrl=e.url,this.fileDialogVisible=!0}},mounted:function(){},created:function(){this.getPointDetail()}},va=ba,_a=(a("2aec"),a("e498"),Object(u["a"])(va,fa,ga,!1,null,"1a054de2",null));_a.options.__file="ProgressReport.vue";var ya=_a.exports,wa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"file-list-wrap"},[e.fileList&&e.fileList.length>0?a("ul",e._l(e.fileList,function(t,s){return a("li",[t.path&&t.url?a("a",{staticClass:"button-link",attrs:{href:""+e.common.picsBasePath+t.path,target:"_blank"}},[e._v(e._s(t.name))]):e._e(),t.url&&null==t.path&&null==t.raw?a("a",{staticClass:"button-link",attrs:{href:""+e.common.picsBasePath+t.url,target:"_blank"}},[e._v(e._s(t.name))]):e._e(),t.raw?a("a",{staticClass:"button-link",attrs:{href:""+e.common.picsBasePath+t.response.data.path,target:"_blank"}},[e._v(e._s(t.name))]):e._e()])})):e._e()])},xa=[],Ca={data:function(){return{}},props:{fileList:{type:Array,required:!0}},created:function(){this.fileList=this.fileList||[]},mounted:function(){},methods:{}},Fa=Ca,ka=(a("1778"),Object(u["a"])(Fa,wa,xa,!1,null,"7b6213fd",null));ka.options.__file="FileList.vue";var Sa=ka.exports,Da=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isShowBaseInfo?s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}]},[e.detailData?s("el-form",{staticClass:"base-info",attrs:{model:e.detailData,"label-width":"180px",size:"middle"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("基本信息")])]),s("el-form-item",{attrs:{label:"项目名称：",prop:"name"}},[s("span",[e._v(e._s(e.detailData.name))])]),s("el-form-item",{attrs:{label:"申报单位：",prop:"orgName"}},[s("span",[e._v(e._s(e.detailData.orgName))])]),s("el-form-item",{attrs:{label:"项目负责人：",prop:"linkman"}},[s("span",[e._v(e._s(e.detailData.linkman))])]),s("el-form-item",{attrs:{label:"项目联系人：",prop:"liabilityUser"}},[s("span",[e._v(e._s(e.detailData.liabilityUser))])]),s("el-form-item",{attrs:{label:"联系手机：",prop:"tel"}},[s("span",[e._v(e._s(e.detailData.tel))])]),s("el-form-item",{attrs:{label:"联系固话：",prop:"phone"}},[s("span",[e._v(e._s(e.detailData.phone))])]),s("el-form-item",{attrs:{label:"邮箱：",prop:"mail"}},[s("span",[e._v(e._s(e.detailData.mail))])])],1)]),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("项目预算")])]),s("el-form-item",{attrs:{label:"预算金额：",prop:"budgetMoney"}},[s("span",[e._v(e._s(e.detailData.budgetMoney+"万元"))])]),s("el-form-item",{attrs:{label:"预算来源：",prop:"budgetType"}},e._l(e.detailData.budgetType,function(t){return s("span",[e._v(e._s(e.budgetRoute[t])+"   ")])})),e.detailData.budgetRemarks?s("el-form-item",{attrs:{label:"其他资金来源备注：",prop:"budgetRemarks"}},[""!=e.detailData.budgetRemarks?s("span",[e._v(e._s(e.detailData.budgetRemarks))]):s("span",[e._v("无")])]):e._e(),s("el-form-item",{attrs:{label:"资金落实情况：",prop:"financialSituation"}},[s("span",[e._v(e._s(e.detailData.financialSituation))])]),e.detailData.resourceRemarks?s("el-form-item",{attrs:{label:"资金落实情况说明：",prop:"resourceRemarks"}},[s("span",[e._v(e._s(e.detailData.resourceRemarks))])]):e._e(),s("el-form-item",{attrs:{label:"落实情况附件材料：",prop:"situationFlie"}},[e.detailData.situationFlie?s("file-list",{attrs:{fileList:JSON.parse(e.detailData.situationFlie)}}):(e.detailData.situationFlie,s("span",[e._v("暂无")]))],1)],1)])],1),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray grid-content_"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("项目情况")])]),s("el-form-item",{attrs:{label:"项目类型：",prop:"projectType"}},e._l(JSON.parse(e.detailData.projectType),function(t){return e.detailData.projectType?s("span",[e._v(e._s(t))]):s("span")})),e.detailData.projectSelfBasis?s("el-form-item",{attrs:{label:"自建项目立项依据：",prop:"projectSelfBasis"}},[s("span",[e._v(e._s(e.detailData.projectSelfBasis))])]):e._e(),e.detailData.projectSuperviseBasis?s("el-form-item",{attrs:{label:"督察督办项目立项依据：",prop:"projectSuperviseBasis"}},[s("span",[e._v(e._s(e.detailData.projectSuperviseBasis))])]):e._e(),e.detailData.projectHeartBasis?s("el-form-item",{attrs:{label:"民心工程项目依据：",prop:"projectHeartBasis"}},[s("span",[e._v(e._s(e.detailData.projectHeartBasis))])]):e._e(),e.detailData.projectAchievementsBasis?s("el-form-item",{attrs:{label:"绩效考核项目立项依据：",prop:"projectAchievementsBasis"}},[s("span",[e._v(e._s(e.detailData.projectAchievementsBasis))])]):e._e(),e.detailData.projectElseBasis?s("el-form-item",{attrs:{label:"其他项目立项依据：",prop:"projectElseBasis"}},[s("span",[e._v(e._s(e.detailData.projectElseBasis))])]):e._e(),s("el-form-item",{attrs:{label:"'三重一大'会议纪要：",prop:"meetingSummary"}},[e.detailData.meetingSummary?s("file-list",{attrs:{fileList:JSON.parse(e.detailData.meetingSummary)}}):s("span",[e._v("暂无")])],1),s("el-form-item",{attrs:{label:"项目方案：",prop:"projectPlan"}},[e.detailData.projectPlan?s("a",{staticClass:"a-style",attrs:{href:e.detailData.projectPlan?"/pics"+JSON.parse(e.detailData.projectPlan)[0].url:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(JSON.parse(e.detailData.projectPlan)[0].name)+"\n\t\t\t\t\t\t\t\t")]):s("span",[e._v("暂无")])]),s("el-form-item",{attrs:{label:"附件材料：",prop:"remarksFile"}},[e.detailData.remarksFile?s("file-list",{attrs:{fileList:JSON.parse(e.detailData.remarksFile)}}):(e.detailData.remarksFile,s("span",[e._v("暂无")]))],1)],1)]),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray grid-content_"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("阶段方案")])]),s("el-form-item",{attrs:{label:"预审方案(一稿)：",prop:"budgetMPlan"}},[e.detailData.budgetMPlan?s("a",{staticClass:"a-style",attrs:{href:e.detailData.budgetMPlan?"/pics"+JSON.parse(e.detailData.budgetMPlan)[0].url:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(JSON.parse(e.detailData.budgetMPlan)[0].name)+"\n\t\t\t\t\t\t\t\t")]):s("span",[e._v("暂无")])]),s("el-form-item",{attrs:{label:"预审方案(二稿)：",prop:"budgetMMPlan"}},[e.detailData.budgetMMPlan?s("a",{staticClass:"a-style",attrs:{href:e.detailData.budgetMMPlan?"/pics"+JSON.parse(e.detailData.budgetMMPlan)[0].url:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(JSON.parse(e.detailData.budgetMMPlan)[0].name)+"\n\t\t\t\t\t\t\t\t")]):s("span",[e._v("暂无")])]),s("el-form-item",{attrs:{label:"评审方案(一稿)：",prop:"expertMPlan"}},[e.detailData.expertMPlan?s("a",{staticClass:"a-style",attrs:{href:e.detailData.expertMPlan?"/pics"+JSON.parse(e.detailData.expertMPlan)[0].url:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(JSON.parse(e.detailData.expertMPlan)[0].name)+"\n\t\t\t\t\t\t\t\t")]):s("span",[e._v("暂无")])]),s("el-form-item",{attrs:{label:"评审方案(二稿)：",prop:"expertMMPlan"}},[e.detailData.expertMMPlan?s("a",{staticClass:"a-style",attrs:{href:e.detailData.expertMMPlan?"/pics"+JSON.parse(e.detailData.expertMMPlan)[0].url:"",target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(JSON.parse(e.detailData.expertMMPlan)[0].name)+"\n\t\t\t\t\t\t\t\t")]):s("span",[e._v("暂无")])])],1)])],1),s("el-row",{attrs:{gutter:24}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray grid-content__"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("上会材料")])]),s("el-form-item",{attrs:{label:"网信会议-调整预算金额：",prop:"budgetApproval"}},[e.detailData.budgetApproval?s("span",[e._v(e._s(e.detailData.budgetApproval+"万元"))]):s("span",[e._v("暂无")])]),s("el-form-item",{attrs:{label:"网信办意见：",prop:""}},[e.detailData.metingFile?s("file-list",{attrs:{fileList:JSON.parse(e.detailData.metingFile)}}):s("span",[e._v("暂无")])],1),s("el-form-item",{attrs:{label:"项目方案(简版)：",prop:""}},[e.detailData.projectPlanSimple?s("file-list",{attrs:{fileList:JSON.parse(e.detailData.projectPlanSimple)}}):"null"==e.detailData.projectPlanSimple?s("span",[e._v("未上传")]):s("span",[e._v("暂无")])],1),s("el-form-item",{attrs:{label:"申报单位汇报稿：",prop:""}},[e.detailData.leaderReport?s("file-list",{attrs:{fileList:JSON.parse(e.detailData.leaderReport)}}):"null"==e.detailData.leaderReport?s("span",[e._v("未上传")]):s("span",[e._v("暂无")])],1)],1)]),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray grid-content__"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("财政意见")])]),s("el-form-item",{attrs:{label:"财政意见-调整预算金额：",prop:"budgetFinance"}},[e.detailData.budgetFinance?s("span",[e._v(e._s(e.detailData.budgetFinance+"万元"))]):s("span",[e._v("暂无")])]),s("el-form-item",{attrs:{label:"财政专家评审意见：",prop:"financeDudget"}},[e.detailData.financeDudget?s("file-list",{attrs:{fileList:JSON.parse(e.detailData.financeDudget)}}):s("span",[e._v("暂无")])],1),s("el-form-item",{attrs:{label:"项目建设方案(终审稿)：",prop:"financePlan"}},[e.detailData.financePlan?s("a",{staticClass:"a-style",attrs:{href:e.detailData.financePlan?"/pics"+JSON.parse(e.detailData.financePlan)[0].url:"",target:"view_window"}},[e._v("\n                  "+e._s(JSON.parse(e.detailData.financePlan)[0].name)+"\n                ")]):s("span",[e._v("暂无")])])],1)])],1)],1):e._e()],1):e._e(),e.isShowForm?s("div",[e.detailData?s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm base-info",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"180px",size:"middle",enctype:"multipart/form-data"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("基本信息")])]),s("el-form-item",{attrs:{label:"项目名称：",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),s("el-form-item",{attrs:{label:"申报单位：",prop:"company"}},[s("span",[e._v(" "+e._s(e.companyName)+" ")])]),s("el-form-item",{attrs:{label:"项目负责人：",prop:"people"}},[s("el-input",{attrs:{placeholder:"请输入项目负责人"},model:{value:e.ruleForm.people,callback:function(t){e.$set(e.ruleForm,"people",t)},expression:"ruleForm.people"}})],1),s("el-form-item",{attrs:{label:"项目联系人：",prop:"contacts"}},[s("el-input",{attrs:{placeholder:"请输入项目联系人"},model:{value:e.ruleForm.contacts,callback:function(t){e.$set(e.ruleForm,"contacts",t)},expression:"ruleForm.contacts"}})],1),s("el-form-item",{attrs:{label:"联系手机：",prop:"tel"}},[s("el-input",{attrs:{placeholder:"请输入联系手机"},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",t)},expression:"ruleForm.tel"}})],1),s("el-form-item",{attrs:{label:"联系固话：",prop:"phone"}},[s("el-input",{attrs:{placeholder:"请输入联系固话"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),s("el-form-item",{attrs:{label:"邮箱：",prop:"mail"}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.ruleForm.mail,callback:function(t){e.$set(e.ruleForm,"mail",t)},expression:"ruleForm.mail"}})],1)],1)]),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"grid-content bg-gray"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("项目预算")])]),s("el-form-item",{attrs:{label:"预算金额：",prop:"budgetMoney"}},[s("el-input",{attrs:{placeholder:"请输入预算金额"},model:{value:e.ruleForm.budgetMoney,callback:function(t){e.$set(e.ruleForm,"budgetMoney",t)},expression:"ruleForm.budgetMoney"}},[s("template",{slot:"append"},[e._v("万元")])],2)],1),s("el-form-item",{attrs:{label:"预算来源：",prop:"type"}},[s("el-checkbox-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[e._l(e.type,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])}),e._l(e.elsetype,function(t){return s("el-checkbox",{key:t.id,attrs:{label:t.id},on:{change:e.elseCheckboxBoolean}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])})],2)],1),s("el-form-item",{attrs:{label:"来源备注：",prop:"budgetRemarks",id:"mark"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入来源备注"},model:{value:e.ruleForm.budgetRemarks,callback:function(t){e.$set(e.ruleForm,"budgetRemarks",t)},expression:"ruleForm.budgetRemarks"}})],1),s("el-form-item",{attrs:{label:"资金落实情况：",prop:"resource"}},[s("el-radio-group",{model:{value:e.ruleForm.resource,callback:function(t){e.$set(e.ruleForm,"resource",t)},expression:"ruleForm.resource"}},[s("el-radio",{attrs:{label:"已落实"}}),s("el-radio",{attrs:{label:"未落实"}})],1)],1)],1)])],1),s("div",{staticClass:"grid-content bg-gray grid-content_"},[s("h4",{staticClass:"base-title"},[s("img",{staticClass:"fl",attrs:{src:a("0569"),alt:""}}),s("span",{staticClass:"fl"},[e._v("项目情况")])]),s("el-form-item",{attrs:{label:"项目类型：",prop:"projectType"}},[s("el-checkbox-group",{model:{value:e.ruleForm.projectType,callback:function(t){e.$set(e.ruleForm,"projectType",t)},expression:"ruleForm.projectType"}},[s("el-checkbox",{attrs:{label:"自建项目"},on:{change:e.self_}}),s("el-checkbox",{attrs:{label:"民心工程项目"},on:{change:e.heart_}}),s("el-checkbox",{attrs:{label:"绩效考核项目"},on:{change:e.achievements_}}),s("el-checkbox",{attrs:{label:"其他项目"},on:{change:e.else_}})],1)],1),e.selfBasis?s("el-form-item",{attrs:{label:"自建项目立项依据：",prop:"projectBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写备注"},model:{value:e.ruleForm.projectSelfBasis,callback:function(t){e.$set(e.ruleForm,"projectSelfBasis",t)},expression:"ruleForm.projectSelfBasis"}})],1):e._e(),e.heartBasis?s("el-form-item",{attrs:{label:"民心工程项目立项依据：",prop:"projectBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写文件依据文号"},model:{value:e.ruleForm.projectHeartBasis,callback:function(t){e.$set(e.ruleForm,"projectHeartBasis",t)},expression:"ruleForm.projectHeartBasis"}})],1):e._e(),e.achievementsBasis?s("el-form-item",{attrs:{label:"绩效考核项目立项依据：",prop:"projectBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写文件依据文号"},model:{value:e.ruleForm.projectAchievementsBasis,callback:function(t){e.$set(e.ruleForm,"projectAchievementsBasis",t)},expression:"ruleForm.projectAchievementsBasis"}})],1):e._e(),e.elseBasis?s("el-form-item",{attrs:{label:"其他项目立项依据：",prop:"projectBasis"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请填写文件依据文号"},model:{value:e.ruleForm.projectElseBasis,callback:function(t){e.$set(e.ruleForm,"projectElseBasis",t)},expression:"ruleForm.projectElseBasis"}})],1):e._e(),s("el-form-item",{staticClass:"middle is-required",attrs:{label:"'三重一大'会议纪要：",prop:"file1"}},[s("el-upload",{ref:"uploadFlie1",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file1,"on-preview":e.handlePreview,"before-remove":e.beforeRemove1,"before-upload":e.beforeUpload,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile1,"on-error":e.uploadErrorFile1}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传关于本项目“三重一大”会议纪要节选(加盖公章)")])],1)],1),s("el-form-item",{staticClass:"middle is-required",attrs:{label:"项目方案：",prop:"file3"}},[s("el-upload",{ref:"uploadFlie3",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file3,"on-preview":e.handlePreview,"before-upload":e.beforeUploadWord,"before-remove":e.beforeRemove3,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile3,"on-error":e.uploadErrorFile3}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("请上传项目建设方案详版(word格式)")])],1),s("div",{staticClass:"file-position"},[s("a",{attrs:{href:e.common.picsBasePath+"/public/project/-1/yaohy/1540299977546.doc",target:"view_window"}},[e._v("项目方案模版")])])],1),s("el-form-item",{staticClass:"middle is-required",attrs:{label:"项目方案(简版)：",prop:"file4"}},[s("el-upload",{ref:"uploadFlie4",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file4,"on-preview":e.handlePreview,"before-upload":e.beforeUploadWord,"before-remove":e.beforeRemove4,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile4,"on-error":e.uploadErrorFile4}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"})],1)],1),s("el-form-item",{staticClass:"middle is-required",attrs:{label:"附件材料：",prop:"file6"}},[s("el-upload",{ref:"uploadFlie6",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file6,"on-preview":e.handlePreview,"before-remove":e.beforeRemove6,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"","on-success":e.uploadSuccessFile6,"on-error":e.uploadErrorFile6}},[s("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),s("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("允许上传多个文件")])],1)],1)],1),s("el-form-item",{staticClass:"text-center"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交审批")]),s("el-button",{on:{click:e.stopDeclare}},[e._v("停止申报")])],1)],1):e._e()],1):e._e()])},Pa=[],$a={props:{projectId:{required:!0}},components:{"file-list":Sa},computed:{companyName:function(){var e=this;this.ruleForm.company;var t=null;return this.company.forEach(function(a,s){e.ruleForm.company==a.id&&(t=a.name)}),t}},data:function(){var e=function(e,t,a){!t||/(^1[3|4|5|7|8]\d{9}$)|(^09\d{8}$)/.test(t)&&/^[1-9]\d*$/.test(t)&&11===t.length?a():a(new Error("手机号码不符合规范"))};return{isLoading:!0,detailData:null,budgetRoute:["","国家专项资金","市财政资金","区财政资金","其他资金"],isShowBaseInfo:!0,projectIsEdit:sessionStorage.getItem("declareProjectIsEdit"),isShowForm:!1,isShowBasisBox1:!0,isShowBasisBox2:!1,heartBasis:!1,achievementsBasis:!1,elseBasis:!1,selfBasis:!1,instanceId:null,assignee:null,myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},uploadForm:{file1:[],file3:[],file4:[],file6:[]},company:[],type:[{name:"国家专项资金",id:1},{name:"市财政资金",id:2},{name:"区财政资金",id:3}],elsetype:[{name:"其他资金",id:4}],ruleForm:{name:"",company:"",companyId:"",people:"",contacts:"",tel:"",phone:"",mail:"",budgetMoney:"",type:"",resource:"",projectType:"",budgetRemarks:"",projectSelfBasis:"",projectHeartBasis:"",projectAchievementsBasis:"",projectElseBasis:"",file1:[],file3:[],file4:[],file6:[]},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"}],company:[{required:!0,message:"请选择申报单位",trigger:"change"}],people:[{required:!0,message:"请选择项目负责人",trigger:"blur"}],contacts:[{required:!0,message:"请输入项目联系人",trigger:"blur"}],tel:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}],phone:[{required:!0,message:"请输入固话",trigger:"blur"}],mail:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],budgetMoney:[{required:!0,message:"请输入项目金额",trigger:"blur"}],type:[{type:"array",required:!0,message:"请至少选择一个预算来源",trigger:"change"}],resource:[{required:!0,message:"请选择资金落实情况",trigger:"change"}],projectType:[{required:!0,message:"请选择项目类型",trigger:"change"}]}}},methods:{getDetail:function(){var e=this;e.isLoading=!0,e.axios.get("".concat(e.common.basePath,"/project/detail/").concat(e.projectId),e._detailParams()).then(function(t){0===t.data.meta.code?(e.detailData=t.data.data,console.log(JSON.parse(t.data.data.remarksFile).slice(1)),""!=t.data.data.projectSelfBasis&&(e.selfBasis=!0),null==t.data.data.projectSelfBasis&&(e.selfBasis=!1),""!=t.data.data.projectHeartBasis&&(e.heartBasis=!0),null==t.data.data.projectHeartBasis&&(e.heartBasis=!1),""!=t.data.data.projectAchievementsBasis&&(e.achievementsBasis=!0),null==t.data.data.projectAchievementsBasis&&(e.achievementsBasis=!1),""!=t.data.data.projectElseBasis&&(e.elseBasis=!0),null==t.data.data.projectElseBasis&&(e.elseBasis=!1),e.ruleForm.name=t.data.data.name,e.ruleForm.company=t.data.data.orgId,e.ruleForm.companyId=t.data.data.orgId,e.ruleForm.people=t.data.data.linkman,e.ruleForm.contacts=t.data.data.liabilityUser,e.ruleForm.tel=t.data.data.tel,e.ruleForm.phone=t.data.data.phone,e.ruleForm.mail=t.data.data.mail,e.ruleForm.budgetMoney=t.data.data.budgetMoney,e.ruleForm.type=t.data.data.budgetType,e.ruleForm.budgetRemarks=t.data.data.budgetRemarks,e.ruleForm.resource=t.data.data.financialSituation,e.ruleForm.projectType=JSON.parse(t.data.data.projectType),e.ruleForm.projectSelfBasis=t.data.data.projectSelfBasis,e.ruleForm.projectHeartBasis=t.data.data.projectHeartBasis,e.ruleForm.projectAchievementsBasis=t.data.data.projectAchievementsBasis,e.ruleForm.projectElseBasis=t.data.data.projectElseBasis,e.ruleForm.file1=JSON.parse(t.data.data.meetingSummary),e.ruleForm.file3=JSON.parse(t.data.data.projectPlan),e.ruleForm.file4=JSON.parse(t.data.data.projectPlanSimple),e.ruleForm.file6=null==JSON.parse(t.data.data.remarksFile)?[]:JSON.parse(t.data.data.remarksFile),e.uploadForm.file1=JSON.parse(t.data.data.meetingSummary),e.uploadForm.file3=JSON.parse(t.data.data.projectPlan),e.uploadForm.file4=JSON.parse(t.data.data.projectPlanSimple),e.uploadForm.file6=JSON.parse(t.data.data.remarksFile),e.isLoading=!1):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t),e.isLoading=!1})},_detailParams:function(){return{params:{id:this.projectId}}},getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){0===t.data.meta.code?e.company=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},editProject:function(){this.detailData,this.elseCheckboxBoolean_(),20==this.detailData.curStatus?this.again1():(this.isShowBaseInfo=!1,this.isShowForm=!0)},again1:function(){var e=this,t={read_status:1,curStatus:20,instanceId:JSON.parse(sessionStorage.getItem("rowDeclareDetailInfo")).processVariables.instanceId,assignee:JSON.parse(sessionStorage.getItem("rowDeclareDetailInfo")).processVariables.assignee};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?(e.isShowBaseInfo=!1,e.isShowForm=!0):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},self_:function(e){this.selfBasis=e},achievements_:function(e){this.achievementsBasis=e},else_:function(e){this.elseBasis=e},heart_:function(e){this.heartBasis=e},elseCheckboxBoolean:function(e){!0===e?(document.getElementById("mark").setAttribute("class","is-required el-form-item el-form-item--small"),sessionStorage.setItem("mark","1")):(document.getElementById("mark").setAttribute("class","el-form-item el-form-item--small"),sessionStorage.setItem("mark","2"))},elseCheckboxBoolean_:function(){-1!=this.ruleForm.type.lastIndexOf(4)?sessionStorage.setItem("mark","1"):sessionStorage.setItem("mark","2")},stopDeclare:function(){var e=this;this.isShowBaseInfo=!0,this.isShowForm=!1,this.$prompt("请输关闭原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.void_(a)}).catch(function(){})},void_:function(e){var t=this,a={rejectReason:e,instanceId:JSON.parse(sessionStorage.getItem("rowDeclareDetailInfo")).processVariables.instanceId};this.axios.post("".concat(this.common.basePath,"/activiti/instance/delete"),a).then(function(e){0===e.data.meta.code?t.$router.push({path:"/project_set_up/declare"}):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.warning("申报信息不完整或者填写错误!!!",60),!1;t.uploadForm.name=t.ruleForm.name,t.uploadForm.company=t.ruleForm.companyId,t.uploadForm.people=t.ruleForm.people,t.uploadForm.contacts=t.ruleForm.contacts,t.uploadForm.tel=t.ruleForm.tel,t.uploadForm.phone=t.ruleForm.phone,t.uploadForm.mail=t.ruleForm.mail,t.uploadForm.budgetMoney=t.ruleForm.budgetMoney,t.uploadForm.type=t.ruleForm.type,t.uploadForm.resource=t.ruleForm.resource,t.uploadForm.projectType=t.ruleForm.projectType,t.uploadForm.budgetRemarks=t.ruleForm.budgetRemarks,t.uploadForm.projectSelfBasis=t.ruleForm.projectSelfBasis,t.uploadForm.projectHeartBasis=t.ruleForm.projectHeartBasis,t.uploadForm.projectAchievementsBasis=t.ruleForm.projectAchievementsBasis,t.uploadForm.projectElseBasis=t.ruleForm.projectElseBasis,t.uploadForm.assignee=JSON.parse(sessionStorage.getItem("rowDeclareDetailInfo")).processVariables.assignee,t.uploadForm.instanceId=JSON.parse(sessionStorage.getItem("rowDeclareDetailInfo")).processVariables.instanceId,t.uploadForm.file1=t.ruleForm.file1,t.uploadForm.file2="",t.uploadForm.file3=t.ruleForm.file3,t.uploadForm.file4=t.ruleForm.file4,t.uploadForm.file5="",t.uploadForm.file6=t.ruleForm.file6,t.uploadForm.curStatus=t.detailData.curStatus,t.$confirm("是否申报该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.declare()}).catch(function(){t.$message({type:"info",message:"已取消申报"})})})},declare:function(){var e=this;if("1"===sessionStorage.getItem("mark")&&null==this.uploadForm.budgetRemarks)return this.$message.error("预算的 其他来源备注 缺失!!!",60),void sessionStorage.removeItem("mark");0!==this.uploadForm.file1.length?0!==this.uploadForm.file3.length?0!==this.uploadForm.file4.length?this.axios.post("".concat(this.common.basePath,"/activiti/complete"),this.uploadForm).then(function(t){0===t.data.meta.code?(e.isShowBaseInfo=!0,e.isShowForm=!1,e.$router.push({path:"/project_set_up/declare"})):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)}):this.$message.error("上传的 项目方案(简版) 缺失!!!",60):this.$message.error("上传的 项目方案 缺失!!!",60):this.$message.error("上传的 “三重一大”会议纪要 缺失!!!",60)},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;return t||a||this.$message.error("上传文件只能是 JPG/PNG 格式!"),t||a},beforeUploadWord:function(e){var t="doc"===e.name.substring(e.name.lastIndexOf(".")+1),a="docx"===e.name.substring(e.name.lastIndexOf(".")+1);return t||a?console.log("15151"):this.$message.error("上传文件只能是 doc/docx 格式!"),t||a},handlePreview:function(e){},uploadSuccessFile1:function(e){this.ruleForm.file1=[{name:e.data.name,url:e.data.path}]},uploadSuccessFile3:function(e,t,a){this.ruleForm.file3=[{name:e.data.name,url:e.data.path}]},uploadSuccessFile4:function(e,t,a){this.ruleForm.file4=[{name:e.data.name,url:e.data.path}]},uploadSuccessFileLeader:function(e,t,a){this.ruleForm.leaderMPlan=[{name:e.data.name,url:e.data.path}]},uploadSuccessFileExpert:function(e,t,a){this.ruleForm.expertMMPlan=[{name:e.data.name,url:e.data.path}]},uploadSuccessFileBudget:function(e,t,a){this.ruleForm.budgetMPlan=[{name:e.data.name,url:e.data.path}]},uploadSuccessFile6:function(e,t,a){this.ruleForm.file6=a},uploadErrorFile1:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file1=[]},uploadErrorFile3:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file3=[]},uploadErrorFile4:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file4=[]},uploadErrorFileLeader:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.leaderMPlan=[]},uploadErrorFileExpert:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.expertMMPlan=[]},uploadErrorFileBudget:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.budgetMPlan=[]},uploadErrorFile6:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file6=[]},beforeRemove1:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.file1=t,a.ruleForm.file1=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.uploadForm.file1=t,a.ruleForm.file1=t,a.$message({type:"info",message:"已取消删除"})})},beforeRemove3:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.file3=t,a.ruleForm.file3=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.uploadForm.file3=t,a.ruleForm.file3=t,a.$message({type:"info",message:"已取消删除"})})},beforeRemove4:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.file4=t,a.ruleForm.file4=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.uploadForm.file4=t,a.ruleForm.file4=t,a.$message({type:"info",message:"已取消删除"})})},beforeRemove6:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.uploadForm.file6=t,a.ruleForm.file6=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.uploadForm.file6=t,a.ruleForm.file6=t,a.$message({type:"info",message:"已取消删除"})})}},mounted:function(){this.getDetail(),this.getDeclareUnit()}},Na=$a,Ia=(a("e077"),a("0ec0"),Object(u["a"])(Na,Da,Pa,!1,null,"7afc3962",null));Ia.options.__file="BaseInfo.vue";var ja,Ta=Ia.exports,Aa=(ja={components:{"progress-report":ya,"base-info":Ta,"file-list":Sa},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")}},computed:{returnObject:function(e){return JSON.parse(e)}},data:function(){return{isVclass:"vertical"==sessionStorage.getItem("navMode")||!sessionStorage.getItem("navMode"),isHclass:"horizontal"==sessionStorage.getItem("navMode"),chnNumChar:["一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十"],fileDialogVisible:!1,taskDialogVisible:!1,fileUrl:null,isShowBaseInfo:null,isShowForm:null,stageNameArr:["","项目申报","项目受理","项目预审","专家评审","网信会议","财政意见","项目归档","进度汇报","进度汇报","","","","","","","","","","进度汇报"],isLoading:!0,userData:JSON.parse(sessionStorage.getItem("userData")),projectId:this.$route.params.id,detailData:null,isShowPrintTemplate:!1,activeName:"base",tabPosition:"",isShowAddPoint:!1,pointDetail:"",point:"",token:{Authorization:"Bearer ".concat(JSON.parse(sessionStorage.getItem("token")))},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},formSchedule:{pointDate:"",attachment:"",payMoney:"",schedule:"",remark:"",pointName:""},pointDate:"",attachment:"",payMoney:"",schedule:"",point_desc:"",point_name:"",isShowSchedulePoint:!0,isShowScheduleText:!1,history:[],stepsHistory:[],currentTask:{},currentExpertList:[],currentExpertIndex:0,processTaskIdArr:[],opinionArr:[],headimg:'this.src="'+a("3244")+'"',opinionContent:"",headimgindex:"",placeholder:"请填写你的宝贵审核意见...",myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},itemTask:null}},methods:{print:function(){if(document.getElementById("myDivId")){var e=document.getElementById("myDivId").innerHTML;document.body.innerHTML;document.body.innerHTML=e,document.getElementsByClassName("pic")[0].style.width="1800px",window.print(),location.reload()}},back:function(){this.$router.back(-1)},validatorProgress:function(e,t,a){var s=/^\d+$/;s.test(t)?t>100?a(new Error("只能填写小于一百的正整数")):a():a(new Error("只能填写小于一百的正整数"))},getDetail:function(){var e=this;this.isLoading=!0,this.axios.get("".concat(this.common.basePath,"/project/detail/").concat(this.projectId),this._detailParams()).then(function(t){e.detailData=t.data.data,e.tabPosition=t.data.data.stage,e.isLoading=!1,e.processHistory()}).catch(function(t){e.$message.error(t),e.isLoading=!1})},_detailParams:function(){return{params:{id:this.projectId}}},getPointDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/checkpoint/point/").concat(this.projectId),this._pointDetailParams()).then(function(t){e.pointDetail=t.data.data,e.point=t.data.data.checkPoint,8==t.data.data.stage&&(e.isShowSchedulePoint=!1,e.isShowScheduleText=!0)}).catch(function(t){e.$message.error(t)})},_pointDetailParams:function(){return{params:{projectId:this.projectId}}},addPointEmitClick:function(){this.getDetail()},processHistory:function(){var e=this;this.isLoading=!0;var t={instanceId:this.detailData.instanceId};this.axios.post("".concat(this.common.basePath,"/activiti/history"),t).then(function(t){e.stepsHistory=JSON.parse(JSON.stringify(t.data.data)),e._forEachHistory(t.data.data).then(function(t){e.history=t,e.isLoading=!1})}).catch(function(t){e.$message.error(t,20),e.isLoading=!1})},_forEachHistory:function(e){var t=this;return new Promise(function(a,s){e.forEach(function(e){e.opinionArr=[],e.childrens?e.childrens.forEach(function(e){t._itemHistory(e)}):t._itemHistory(e)}),a(e)})},_itemHistory:function(e){var t=this;e.taskLocalVariables&&(4!=e.taskLocalVariables.cur_status&&7!=e.taskLocalVariables.cur_status||this._opinionArr(e.processTaskId).then(function(t){e.opinionArr=t.data.data,e.headimgindex=t.data.data.length?t.data.data[0].id:null}).catch(function(e){t.$message.error(e)}))},_opinionArr:function(e){var t=this;return new Promise(function(a,s){t.axios.get("".concat(t.common.basePath,"/assessment_expert/list"),{params:{taskId:e}}).then(function(e){a(e)}).catch(function(e){s(e)})})},publishOpinion:function(e,t){var a=this,s={comment:JSON.stringify(e),id:t.id};this.axios.post("".concat(this.common.basePath,"/assessment_expert/expert/opinion"),s).then(function(e){0===e.data.meta.code?(a.$message.success("发表"+e.data.meta.message,20),a.opinionContent=""):a.$message.error(e.data.meta.message,20)}).catch(function(e){a.$message.error(e,20)})},clickHeadImg:function(e){this.itemTask.headimgindex=e.id,this.itemTask=Object.assign({},this.itemTask,this.itemTask),this.placeholder="请 "+e.assExpertName+" 专家填写宝贵审核意见..."},postAdd:function(){var e=this;this.$refs.formSchedule.validate(function(t){if(!t)return!1;var a=JSON.parse(JSON.stringify(e.formSchedule));a.beginTime=a.pointDate[0],a.endTime=a.pointDate[1],a.schedule=a.schedule/100,a.projectId=e.projectId,e.axios.post("".concat(e.common.basePath,"/checkpoint/point"),a).then(function(t){0===t.data.meta.code?(e.isShowAddPoint=!1,e.$refs.formSchedule.resetFields(),e.getPointDetail(),e.getDetail()):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})})},handleRemoveComment:function(e,t,a){0==e.meta.code&&(this.publishOpinion(e.data,t),t.comment=JSON.stringify(e.data),this.$refs[a][0].clearFiles())},UploadUrl:function(){return this.common.basePath+"/file/"+this.projectId+"/uplode"},uploadSuccessFile:function(e){this.formSchedule.attachment=JSON.stringify(e.data)},uploadErrorFile:function(e,t,a){this.$message.error("上传失败!!",20),this.attachment=[]},clickIsShowAddPoint:function(){this.isShowAddPoint=!this.isShowAddPoint},savePoint:function(){this.postAdd()},handleClick:function(e){"0"==e.index&&this.getDetail(),"1"==e.index&&this.processHistory(),e.index},getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){0===t.data.meta.code?e.company=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},handlePreview:function(e){this.fileUrl=e.url,this.fileDialogVisible=!0},successMettingHandlePreview:function(e,t){var a={taskId:t.processTaskId,metingFile:JSON.parse(JSON.stringify(t.taskLocalVariables.metingFile))};0==e.meta.code&&(a.metingFile.push({name:e.data.name,url:e.data.path}),this._updateMsg(0,a,t))},mettingHandleRemove:function(e,t){var a={taskId:t.processTaskId,metingFile:JSON.parse(JSON.stringify(t.taskLocalVariables.metingFile))};a.metingFile.splice(e,1),this._updateMsg(0,a,t)},saveMettingMsg:function(e,t){var a={taskId:e.processTaskId};a[t]=e.taskLocalVariables[t],this._updateMsg(1,a,e)},_updateMsg:function(e,t,a){var s=this;this.axios.post("".concat(this.common.basePath,"/activiti/update/msg"),t).then(function(s){0==e&&(a.metingFile=t.metingFile)}).catch(function(e){s.$message.error(e)})},taskBindFun:function(e){var t=this;1==e.taskLocalVariables.cur_status||2==e.taskLocalVariables.cur_status&&1==e.taskLocalVariables.read_status||3==e.taskLocalVariables.cur_status||5==e.taskLocalVariables.cur_status||15==e.taskLocalVariables.cur_status||12==e.taskLocalVariables.cur_status&&1==e.taskLocalVariables.read_status||18==e.taskLocalVariables.cur_status||(this.currentTask=e,console.log(this.currentTask),this.taskDialogVisible=!0),4!=e.taskLocalVariables.cur_status&&7!=e.taskLocalVariables.cur_status||this.getExpertList(e.processTaskId).then(function(e){t.currentExpertList=e,t.taskDialogVisible=!0})},getExpertList:function(e){var t=this,a=new Promise(function(a,s){t.axios.get("".concat(t.common.basePath,"/assessment_expert/list"),{params:{taskId:e}}).then(function(e){a(e.data.data)}).catch(function(e){s(e)})});return a},uploadSuccess:function(e,t,a){var s=this;this.publishOpinion(e.data,this.currentExpertList[this.currentExpertIndex]),this.getExpertList(this.currentExpertList[this.currentExpertIndex].id).then(function(e){s.currentExpertList=e})}}},Object(la["a"])(ja,"computed",{stepNow:function(){var e=this,t=e.stepsHistory.length;return e.stepsHistory.length>0&&e.stepsHistory.forEach(function(e,a){(e.isSelect||e.isReject)&&(t=a)}),t}}),Object(la["a"])(ja,"mounted",function(){}),Object(la["a"])(ja,"created",function(){this.getDetail()}),ja),za=Aa,Ba=(a("43621"),a("579d"),Object(u["a"])(za,pa,ha,!1,null,null,null));Ba.options.__file="DeclareDetail.vue";var La=Ba.exports,Oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Va=[],Ea={},Ma=Ea,Ra=Object(u["a"])(Ma,Oa,Va,!1,null,null,null);Ra.options.__file="Index.vue";var Ja=Ra.exports,Ua=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目受理")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("项目受理列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,fixed:"","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"processVariables.name",label:"项目名称",width:"240","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"name-style",on:{click:function(a){e.openDetails(t.row)}}},[e._v("\n                    "+e._s(t.row.processVariables.name)+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.company",label:"申报单位",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("convertToText")(t.row.processVariables.company))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.applyTime",label:"申报时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("formatDate")(t.row.processVariables.applyTime))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.budgetMoney",label:"项目金额",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(t.row.processVariables.budgetMoney+"万元")+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.cur_status",label:"当前状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.processVariables.cur_status?a("span",[e._v("待受理")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.acceptanceClick(t.row)}}},[e._v("受理")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.goToDeclareAgain(t.row)}}},[e._v("编辑")])]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},qa=[],Qa={data:function(){return{elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")},convertToText:function(e){return Wt(e,JSON.parse(sessionStorage.getItem("unitArr")))}},methods:{goToDeclareAgain:function(e,t){sessionStorage.setItem("rowDeclareInfo",JSON.stringify(e)),sessionStorage.setItem("historyPath",this.$route.path),this.$router.push({name:"DeclareAgain",params:{id:e.processVariables.projectId,type:t?e.processVariables.cur_status:"edit"}})},getDeclareUnit:function(){var e={id:6},t=this,a=new Promise(function(a,s){t.axios.post("".concat(t.common.basePath,"/hr_users/user/list"),e).then(function(e){if(0===e.data.meta.code){var s=e.data.data;sessionStorage.setItem("unitArr",JSON.stringify(s)),a("查询成功")}else t.$message.error(e.data.meta.message,20),a("查询失败")}).catch(function(e){a("查询失败"),t.$message.error(e,20)})});return a},openDetails:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.processVariables.projectId}})},acceptanceClick:function(e){sessionStorage.setItem("acceptanceId",e.processVariables.projectId),sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({path:"/project_set_up/acceptance/project"})},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList()},getList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/page"),this._acceptanceListParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_acceptanceListParams:function(){return{params:{status:2,pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}}}},mounted:function(){var e=this;this.getDeclareUnit().then(function(){e.getList()})}},Ha=Qa,Ka=(a("4e88"),Object(u["a"])(Ha,Ua,qa,!1,null,null,null));Ka.options.__file="AcceptanceList.vue";var Wa=Ka.exports,Ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目受理")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"}),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("base-info",{attrs:{projectId:e.projectId}})],1)]),a("div",{staticClass:"block-bottom"},[a("div",{staticClass:"btn-t4"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.yes}},[e._v("受理")]),a("el-button",{attrs:{size:"small"},on:{click:e.no}},[e._v("返回修改")]),a("el-button",{attrs:{size:"small"},on:{click:e.stop}},[e._v("关闭")])],1)])])])},Xa=[],Ya={components:{"base-info":Ta},data:function(){return{projectId:sessionStorage.getItem("acceptanceId"),detailData:null,assignee:sessionStorage.getItem("assignee")}},methods:{yes:function(){var e=this;this.$confirm("是否受理该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.adopt()}).catch(function(){e.$message({type:"info",message:"您已取消受理该项目"})})},no:function(){var e=this;this.$prompt("请输入返回修改原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.reject(a)}).catch(function(){})},stop:function(){var e=this;this.$prompt("请输关闭原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.void_(a)}).catch(function(){})},getDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/detail/").concat(this.projectId),this._detailParams()).then(function(t){0===t.data.meta.code?e.detailData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_detailParams:function(){return{params:{id:this.projectId}}},adopt:function(){var e=this,t={read_status:1,curStatus:2,instanceId:this.detailData.instanceId,assignee:this.assignee};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?e.$router.push({path:"/project_set_up/acceptance"}):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},reject:function(e){var t=this,a={read_status:2,curStatus:2,instanceId:this.detailData.instanceId,assignee:this.assignee,rejectReason:e};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),a).then(function(e){0===e.data.meta.code?(t.$message.success("请等待申报单位修改后重新提交...",20),t.$router.push({path:"/project_set_up/acceptance"})):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})},void_:function(e){var t=this,a={instanceId:this.detailData.instanceId,rejectReason:e};this.axios.post("".concat(this.common.basePath,"/activiti/instance/delete"),a).then(function(e){0===e.data.meta.code?(t.$message.success("该项目已关闭！！",20),t.$router.push({path:"/project_set_up/acceptance"})):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})}},mounted:function(){this.getDetail()}},Za=Ya,es=(a("938a"),Object(u["a"])(Za,Ga,Xa,!1,null,"1d95d98c",null));es.options.__file="AcceptanceProject.vue";var ts=es.exports,as=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},ss=[],rs={},is=rs,os=Object(u["a"])(is,as,ss,!1,null,null,null);os.options.__file="Index.vue";var ns=os.exports,ls=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目预审")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("项目预审列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,fixed:"","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"processVariables.projectNum",label:"项目编号",width:"120"}}),a("el-table-column",{attrs:{prop:"processVariables.name",label:"项目名称",width:"300","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"name-style",on:{click:function(a){e.openDetails(t.row)}}},[e._v("\n                    "+e._s(t.row.processVariables.name)+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.company",label:"申报单位","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("convertToText")(t.row.processVariables.company))+"\n                    ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.applyTime",label:"申报时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("formatDate")(t.row.processVariables.applyTime))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.budgetMoney",label:"项目金额",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(t.row.processVariables.budgetMoney+"万元")+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.cur_status",label:"当前状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.processVariables.cur_status?a("span",[e._v("待确认预审专家")]):e._e(),4==t.row.processVariables.cur_status?a("span",[e._v("待预审")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"280","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[3==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.pretrialClick(t.row)}}},[e._v("建立专家组\n                    ")]):e._e(),4==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.pretrialClick(t.row)}}},[e._v("预审\n                    ")]):e._e(),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.goToDeclareAgain(t.row)}}},[e._v("编辑")])]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},cs=[],us={data:function(){return{elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")},convertToText:function(e){return Wt(e,JSON.parse(sessionStorage.getItem("unitArr")))}},methods:{goToDeclareAgain:function(e,t){sessionStorage.setItem("rowDeclareInfo",JSON.stringify(e)),sessionStorage.setItem("historyPath",this.$route.path),this.$router.push({name:"DeclareAgain",params:{id:e.processVariables.projectId,type:t?e.processVariables.cur_status:"edit"}})},getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){if(0===t.data.meta.code){var a=t.data.data;sessionStorage.setItem("unitArr",JSON.stringify(a))}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},openDetails:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.processVariables.projectId}})},pretrialClick:function(e){sessionStorage.setItem("rowPretrialInfo",JSON.stringify(e)),4===JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.cur_status?this.$router.push({path:"/project_set_up/pretrial/expert"}):3===JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.cur_status&&this.$router.push({path:"/project_set_up/pretrial/expert_group"})},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList()},getList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/page"),this._acceptanceListParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_acceptanceListParams:function(){return{params:{status:3,pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}}}},mounted:function(){this.getList(),this.getDeclareUnit()}},ms=us,ds=(a("8dc7"),Object(u["a"])(ms,ls,cs,!1,null,null,null));ds.options.__file="PretrialList.vue";var ps=ds.exports,hs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目预审")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("专家预审")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content body-contents"},[a("el-row",[a("h4",{staticClass:"block-depart-title expert-opinion"},[e._v("预审专家")]),a("div",{staticClass:"clear"}),a("div",e._l(e.member,function(t,s){return a("el-tag",{key:t.assExpert},[a("span",{on:{click:function(a){e.clickExpert(t.assExpert,t.assExpertName,t.childrens,s)}}},[e._v(e._s(t.assExpertName))])])})),e._l(e.member,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.memberindex==s,expression:"memberindex==index"}],staticClass:"opinion-input"},[a("span",{staticClass:"expert"},[e._v(e._s("专家："+t.assExpertName))]),a("el-upload",{ref:"commentUpload",refInFor:!0,staticClass:"upload-demo fill-width",attrs:{"before-upload":e.beforeUpload,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"on-success":function(a){e.handleRemoveComment(a,t,"commentUpload")},"show-file-list":!1,multiple:"",limit:100}},e._l(e.member_,function(t,s){return e.member_?a("div",{directives:[{name:"show",rawName:"v-show",value:e.memberindex==s,expression:"memberindex==index"}]},[a("ul",{staticClass:"opinion-img_"},e._l(t.childrens,function(t,s){return a("li",{on:{click:function(a){e.clickPic(t.id)}}},[a("hr"),null!=t.comment?a("p",[e._v(e._s("第"+(s+1)+"轮意见："))]):e._e(),t.comment?a("img",{staticClass:"avatar",attrs:{src:"/pics"+JSON.parse(t.comment).path}}):e._e(),null!=t.comment||2!=e.rotation&&3!=e.rotation||0!=s?e._e():a("p",[a("span",{on:{click:function(t){t.stopPropagation(),e.$message.error("该阶段，您不能上传第一轮的意见！！",20)}}},[e._v("第1轮您未上传意见")])]),null==t.comment&&1==e.rotation?a("div",{staticStyle:{position:"relative"}},[a("div",{attrs:{slot:"trigger"},slot:"trigger"},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("span",{staticClass:"el-upload__tip",staticStyle:{position:"absolute",top:"75%",left:"15%",width:"70%"},attrs:{slot:""},slot:"default"},[e._v("请上传图片格式的文件")])])]):e._e(),null!=t.comment||2!=e.rotation&&3!=e.rotation||1!=s?e._e():a("div",{staticStyle:{position:"relative"}},[null!=t.comment?a("p",[e._v("请上传第2轮意见")]):e._e(),t.comment?a("img",{staticClass:"avatar",attrs:{src:"/pics"+JSON.parse(t.comment).path}}):e._e(),null==t.comment&&3==e.rotation&&1==s?a("p",[a("span",{on:{click:function(t){t.stopPropagation(),e.$message.error("该阶段，您不能上传第二轮的意见！！",20)}}},[e._v("第2轮您未上传意见")])]):e._e(),2==e.rotation?a("div",{attrs:{slot:"trigger"},slot:"trigger"},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("span",{staticClass:"el-upload__tip",staticStyle:{position:"absolute",top:"75%",left:"15%",width:"70%"},attrs:{slot:""},slot:"default"},[e._v("请上传图片格式的文件")])]):e._e()])])}))]):e._e()}))],1)}),a("div",{staticClass:"tips-s"},[e._v("点击图片可重新上传。")])],2)],1)]),e.rotation?a("div",{staticClass:"block-bottom"},[a("div",{staticClass:"btn-t4"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.yes}},[e._v("通过")]),e.rotation<3?a("el-button",{attrs:{size:"small"},on:{click:e.no}},[e._v("返回修改")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:e.stop}},[e._v("关闭")])],1)]):e._e()]),a("el-dialog",{attrs:{title:"提示",visible:e.noDialogVisible,width:"50%"},on:{"update:visible":function(t){e.noDialogVisible=t}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"修改原因:"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入修改原因"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"修改后是否再次邮件通知预审专家？","label-width":"300px"}},[a("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.noDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.reject}},[e._v("确 定")])],1)],1)],1)},fs=[],gs=(a("c5f6"),{data:function(){return{radio:"",value:"",noDialogVisible:!1,id:"",index:0,myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},budgetRoute:["","国家专项资金","市财政资金","区财政资金","其他资金"],isEdit:!0,assignee:sessionStorage.getItem("assignee"),memberindex:"",member:"",member_:"",placeholder:"请输入专家意见",pretrialExpertOpinion:[],projectId:JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.projectId,rotation:JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.budgetRotation}},methods:{clickPic:function(e){this.id=e},clickPlus:function(e){this.id=e},yes:function(){var e=this;this.$confirm("是否通过该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.adopt()}).catch(function(){e.$message({type:"info",message:"您已取消通过该项目"})})},no:function(){this.noDialogVisible=!0},stop:function(){var e=this;this.$prompt("请输入关闭原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.void_(a)}).catch(function(){})},handleRemoveComment:function(e,t,a,s){0==e.meta.code&&(this.publishOpinion_(e.data,t),t.comment=JSON.stringify(e.data))},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;return t||a||this.$message.error("上传文件只能是 JPG/PNG 格式!"),t||a},publishOpinion_:function(e,t){var a=this,s={comment:JSON.stringify(e),id:this.id};this.axios.post("".concat(this.common.basePath,"/assessment_expert/expert/opinion"),s).then(function(e){0===e.data.meta.code?(a.$message.success("发表"+e.data.meta.message,20),a.getPretrialExpertArr()):a.$message.error(e.data.meta.message,20)}).catch(function(e){a.$message.error(e,20)})},clickExpert:function(e,t,a,s){console.log(s),this.memberindex=s},adopt:function(){var e=this,t={read_status:1,curStatus:4,instanceId:JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.instanceId,assignee:JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.assignee};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?e.$router.push({path:"/project_set_up/pretrial"}):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},reject:function(e){var t=this;if(""!=this.radio){var a={isEmailA:Number(this.radio),read_status:2,curStatus:4,instanceId:JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.instanceId,assignee:JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.assignee,rejectReason:this.value};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),a).then(function(e){0===e.data.meta.code?(t.$message.success("请等待申报单位上传预审改进方案后提交...",20),t.noDialogVisible=!1,t.$router.push({path:"/project_set_up/pretrial"})):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})}else this.$message.error("请选择是否发送邮件。",20)},void_:function(e){var t=this,a={instanceId:JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.instanceId,rejectReason:e};this.axios.post("".concat(this.common.basePath,"/activiti/instance/delete"),a).then(function(e){0===e.data.meta.code?(t.$message.error("该项目已关闭！！",20),t.$router.push({path:"/project_set_up/pretrial"})):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})},getPretrialExpertArr:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/assessment_expert/all/").concat(this.projectId),this._pretrialExpertParams()).then(function(t){0===t.data.meta.code?(e.member=t.data.data,e.member_=t.data.data):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_pretrialExpertParams:function(){return{params:{type:1}}}},mounted:function(){this.getPretrialExpertArr()}}),bs=gs,vs=(a("f5a4"),a("1bf1"),Object(u["a"])(bs,hs,fs,!1,null,"d2dc8480",null));vs.options.__file="PretrialExpert.vue";var _s=vs.exports,ys=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目预审")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("确认预审专家")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"left-content",attrs:{span:e.spanNum}},[e.isShowChoiseBtn?a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.isShowChoisePage}},[a("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}})]):e._e(),a("h4",{staticClass:"block-depart-title"},[e._v("建立专家组")]),e.dataExpert?a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"max-height":"400",data:e.dataExpert,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"专家姓名",width:"80","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"phoneNum",label:"电话",width:"120","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"workUnit",label:"工作单位",width:"100","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"technicalTitle",label:"职称",width:"100","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"contrastname",label:"专业领域",width:"","header-align":"center",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.contrastname,function(t){return a("span",[e._v(e._s(t.name+" ")+"  ")])})}}])}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"","header-align":"center",align:"center",width:"180"}})],1):e._e(),a("div",{staticClass:"add-del-btn"},[a("span",{staticClass:"fa-stack fa-lg"},[a("i",{staticClass:"fa fa-circle fa-stack-2x"}),a("i",{staticClass:"fa fa-exchange fa-rotate-90 fa-stack-1x fa-inverse"})])]),a("div",{staticClass:"screening"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.screeningThreeExperts}},[e._v("随机筛选专家")]),a("el-input",{staticStyle:{},attrs:{placeholder:"请输入随机筛选的专家数",clearable:"",size:"small"},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1),a("el-table",{attrs:{"max-height":"400",data:e.newDataExpert,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"专家姓名",width:"","header-align":"center",align:"center"}})],1)],1),a("el-col",{attrs:{span:8,offset:1}},[e.isShowChoise?a("div",[a("h4",{staticClass:"block-depart-title"},[e._v("筛选操作")]),a("div",{staticClass:"buttons fr"},[a("el-button",{on:{click:e.getCheckedKeys}},[e._v("筛选")])],1),a("div",{staticClass:"clear"}),a("h4",{staticClass:"block-depart-title"},[e._v("根据专家领域筛选专家组")]),a("el-input",{attrs:{placeholder:"输入关键字进行筛选"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("div",{staticStyle:{height:"10px"}}),a("el-tree",{ref:"tree",attrs:{data:e.treeData,"show-checkbox":"","default-expand-all":!1,accordion:"","node-key":"id","highlight-current":"","filter-node-method":e.filterNode,props:e.defaultProps}}),a("div",{staticClass:"buttons fr"},[a("el-button",{on:{click:e.setCheckedNodes}},[e._v("全选")]),a("el-button",{on:{click:e.resetChecked}},[e._v("清空")])],1)],1):e._e()])],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-button",{staticClass:"center",attrs:{type:"primary",icon:"",size:"small"},on:{click:e.buildExpertGroup}},[e._v("生成专家组")])],1)])])},ws=[],xs={data:function(){return{num:1,isShowChoise:!1,isShowChoiseBtn:!0,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},filterText:"",treeData:[],treeIdArr:[],defaultProps:{children:"childrens",label:"name"},dataExpert:[],valueExpert:[],newDataExpert:[],arrExpert:[],spanNum:24}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{indexMethod:function(e){return 1*(e+1)},handleSelectionChange:function(e){this.newDataExpert=e;for(var t=[],a=0;a<e.length;a++)t.push(e[a].id);this.valueExpert=t},screeningThreeExperts:function(){var e=this;if(this.num<=0)this.$message.warning("请输入不小于0的专家数",20);else{var t=this.dataExpert,a=new Array;for(var s in t)a.push(t[s]);for(var r=new Array,i=0;i<this.num;i++){if(!(a.length>0))break;var o=Math.floor(Math.random()*a.length);r[i]=a[o],a.splice(o,1)}var n=r;n?(this.$refs.multipleTable.clearSelection(),n.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection(),this.newDataExpert=r;var l=[];for(i=0;i<r.length;i++)l.push(r[i].id);this.valueExpert=l}},isShowChoisePage:function(){this.isShowChoiseBtn=!1,this.isShowChoise=!0,this.spanNum=15},sureGroup:function(){var e=this,t={tips:"已建立项目预审专家组",curStatus:3,pretrialExpertArr:this.valueExpert,instanceId:JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.instanceId,assignee:JSON.parse(sessionStorage.getItem("rowPretrialInfo")).processVariables.assignee};0!=this.valueExpert.length?this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?e.$router.push({path:"/project_set_up/pretrial"}):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)}):this.$message.warning("你还未建立预审专家组",20)},buildExpertGroup:function(){var e=this;this.$confirm("确认专家组成员并发送预审方案?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.sureGroup()}).catch(function(){})},filterNode:function(e,t){return!e||-1!==t.nameAndPhone.indexOf(e)},getTree:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/contrast/all/tree"),this._assessmentExpertParams()).then(function(t){if(0===t.data.meta.code){e.treeData=t.data.data;for(var a=[],s=0;s<t.data.data.length;s++)a.push(t.data.data[s].id);e.treeIdArr=a}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_assessmentExpertParams:function(){return{params:{typeId:2}}},getCommonExpert:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/hr_users/commused/expert"),this._commonExpertParams()).then(function(t){0===t.data.meta.code?e.dataExpert=t.data.data.rows:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_commonExpertParams:function(){return{params:{}}},screen:function(){var e=this;this.dataExpert="";var t={industryId:this.$refs.tree.getCheckedKeys(),id:4};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){0===t.data.meta.code?e.dataExpert=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys()),this.screen()},setCheckedKeys:function(){var e=this,t=this.treeIdArr,a=new Array;for(var s in t)a.push(t[s]);for(var r=new Array,i=0;i<3;i++){if(!(a.length>0))break;var o=Math.floor(Math.random()*a.length);r[i]=a[o],a.splice(o,1)}this.$refs.tree.setCheckedKeys(r),this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),{id:4,industryId:r}).then(function(t){0===t.data.meta.code?e.dataExpert=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},setCheckedNodes:function(){this.$refs.tree.setCheckedNodes(this.treeData)},resetChecked:function(){this.$refs.tree.setCheckedKeys([])},handleChange:function(e){for(var t=0;t<this.dataExpert.length;t++)for(var a=0;a<this.valueExpert.length;a++)this.dataExpert[t].id===e[a]&&this.arrExpert.push(this.dataExpert[t].name)}},mounted:function(){this.getTree(),this.getCommonExpert()}},Cs=xs,Fs=(a("e446"),Object(u["a"])(Cs,ys,ws,!1,null,"c6d1ab9c",null));Fs.options.__file="PretrialExpertGroup.vue";var ks=Fs.exports,Ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Ds=[],Ps={},$s=Ps,Ns=Object(u["a"])($s,Ss,Ds,!1,null,null,null);Ns.options.__file="Index.vue";var Is=Ns.exports,js=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("专家评审")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("专家评审列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,fixed:"","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"processVariables.projectNum",label:"项目编号",width:"120"}}),a("el-table-column",{attrs:{prop:"processVariables.name",label:"项目名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"name-style",on:{click:function(a){e.openDetails(t.row)}}},[e._v("\n                    "+e._s(t.row.processVariables.name)+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.company",label:"申报单位",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("convertToText")(t.row.processVariables.company))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.applyTime",label:"申报时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("formatDate")(t.row.processVariables.applyTime))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.budgetMoney",label:"项目金额",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(t.row.processVariables.budgetMoney+"万元")+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.cur_status",label:"当前状态",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[5==t.row.processVariables.cur_status?a("span",[e._v("待确认正式评审专家")]):e._e(),7==t.row.processVariables.cur_status?a("span",[e._v("待专家评审")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"280","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[5==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.reviewClick(t.row)}}},[e._v("建立专家组\n                    ")]):e._e(),7==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.reviewClick(t.row)}}},[e._v("评审\n                    ")]):e._e(),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.goToDeclareAgain(t.row)}}},[e._v("编辑")])]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},Ts=[],As={data:function(){return{elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")},convertToText:function(e){return Wt(e,JSON.parse(sessionStorage.getItem("unitArr")))}},methods:{goToDeclareAgain:function(e,t){sessionStorage.setItem("rowDeclareInfo",JSON.stringify(e)),sessionStorage.setItem("historyPath",this.$route.path),this.$router.push({name:"DeclareAgain",params:{id:e.processVariables.projectId,type:t?e.processVariables.cur_status:"edit"}})},getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){if(0===t.data.meta.code){var a=t.data.data;sessionStorage.setItem("unitArr",JSON.stringify(a))}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},openDetails:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.processVariables.projectId}})},reviewClick:function(e){sessionStorage.setItem("rowReviewInfo",JSON.stringify(e)),5===JSON.parse(sessionStorage.getItem("rowReviewInfo")).processVariables.cur_status?this.$router.push({path:"/project_set_up/review/record"}):7===JSON.parse(sessionStorage.getItem("rowReviewInfo")).processVariables.cur_status&&this.$router.push({path:"/project_set_up/review/approval"})},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList()},getList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/page"),this._acceptanceListParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_acceptanceListParams:function(){return{params:{status:4,pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}}}},mounted:function(){this.getList(),this.getDeclareUnit()}},zs=As,Bs=(a("4b78"),Object(u["a"])(zs,js,Ts,!1,null,null,null));Bs.options.__file="ReviewList.vue";var Ls=Bs.exports,Os=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("专家评审")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("确认正式评审专家")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content body-contents"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"left-content",attrs:{span:e.spanNum}},[e.isShowChoiseBtn?a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.isShowChoisePage}},[a("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}})]):e._e(),a("h4",{staticClass:"block-depart-title"},[e._v("建立专家组")]),e.dataExpert?a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"max-height":"400",data:e.dataExpert,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"专家姓名",width:"80","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"phoneNum",label:"电话",width:"120","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"workUnit",label:"工作单位",width:"100","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"technicalTitle",label:"职称",width:"100","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"contrastname",label:"专业领域",width:"","header-align":"center",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.contrastname,function(t){return a("span",[e._v(e._s(t.name+" ")+"  ")])})}}])}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"","header-align":"center",align:"center",width:"180"}})],1):e._e(),a("div",{staticClass:"add-del-btn"},[a("span",{staticClass:"fa-stack fa-lg"},[a("i",{staticClass:"fa fa-circle fa-stack-2x"}),a("i",{staticClass:"fa fa-exchange fa-rotate-90 fa-stack-1x fa-inverse"})])]),a("div",{staticClass:"screening"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.screeningThreeExperts}},[e._v("随机筛选专家")]),a("el-input",{staticStyle:{},attrs:{placeholder:"请输入随机筛选的专家数",clearable:"",size:"small"},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1),a("el-table",{staticStyle:{width:"100%",margin:"0 auto"},attrs:{"max-height":"400",data:e.newDataExpert,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"专家姓名",width:"","header-align":"center",align:"center"}})],1)],1),a("el-col",{attrs:{span:8,offset:1}},[e.isShowChoise?a("div",[a("h4",{staticClass:"block-depart-title"},[e._v("筛选操作")]),a("div",{staticClass:"buttons fr"},[a("el-button",{on:{click:e.getCheckedKeys}},[e._v("筛选")])],1),a("div",{staticClass:"clear"}),a("h4",{staticClass:"block-depart-title"},[e._v("根据专家领域筛选专家组")]),a("el-input",{attrs:{placeholder:"输入关键字进行筛选"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("div",{staticStyle:{height:"10px"}}),a("el-tree",{ref:"tree",attrs:{data:e.treeData,"show-checkbox":"","default-expand-all":!1,accordion:"","node-key":"id","highlight-current":"","filter-node-method":e.filterNode,props:e.defaultProps}}),a("div",{staticClass:"buttons fr"},[a("el-button",{on:{click:e.setCheckedNodes}},[e._v("全选")]),a("el-button",{on:{click:e.resetChecked}},[e._v("清空")])],1)],1):e._e()])],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-button",{staticClass:"center",attrs:{type:"primary",icon:"",size:"small"},on:{click:e.buildExpertGroup}},[e._v("生成专家组")])],1)])])},Vs=[],Es={data:function(){return{num:1,isShowChoise:!1,isShowChoiseBtn:!0,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},rowData:sessionStorage.getItem("rowReviewInfo"),rowDataArr:[],filterText:"",treeData:[],defaultProps:{children:"childrens",label:"name"},dataExpert:[],newDataExpert:[],valueExpert:[],arrExpert:[],spanNum:24}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{indexMethod:function(e){return 1*(e+1)},handleSelectionChange:function(e){this.newDataExpert=e;for(var t=[],a=0;a<e.length;a++)t.push(e[a].id);this.valueExpert=t},screeningThreeExperts:function(){var e=this;if(this.num<=0)this.$message.warning("请输入不小于0的专家数",20);else{var t=this.dataExpert,a=new Array;for(var s in t)a.push(t[s]);for(var r=new Array,i=0;i<this.num;i++){if(!(a.length>0))break;var o=Math.floor(Math.random()*a.length);r[i]=a[o],a.splice(o,1)}var n=r;n?(this.$refs.multipleTable.clearSelection(),n.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection(),this.newDataExpert=r;var l=[];for(i=0;i<r.length;i++)l.push(r[i].id);this.valueExpert=l}},isShowChoisePage:function(){this.isShowChoiseBtn=!1,this.isShowChoise=!0,this.spanNum=15},sureGroup:function(){var e=this,t={curStatus:5,tips:"已建立正审专家组",formalExpertArr:this.valueExpert,instanceId:this.rowDataArr[0].processVariables.instanceId,assignee:this.rowDataArr[0].processVariables.assignee};0!=this.valueExpert.length?this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?e.$router.push({path:"/project_set_up/review"}):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)}):this.$message.warning("你还未建立正审专家组",20)},buildExpertGroup:function(){var e=this;this.$confirm("确认专家组成员并发送评审方案?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.sureGroup()}).catch(function(){})},filterNode:function(e,t){return!e||-1!==t.nameAndPhone.indexOf(e)},getTree:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/contrast/all/tree"),this._assessmentExpertParams()).then(function(t){0===t.data.meta.code?e.treeData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_assessmentExpertParams:function(){return{params:{typeId:2}}},getCommonExpert:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/hr_users/commused/expert"),this._commonExpertParams()).then(function(t){0===t.data.meta.code?e.dataExpert=t.data.data.rows:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_commonExpertParams:function(){return{params:{}}},screen:function(){var e=this;this.dataExpert="";var t={industryId:this.$refs.tree.getCheckedKeys(),id:4};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){0===t.data.meta.code?e.dataExpert=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},getCheckedKeys:function(){this.screen()},setCheckedNodes:function(){this.$refs.tree.setCheckedNodes(this.treeData)},resetChecked:function(){this.$refs.tree.setCheckedKeys([])},handleChange:function(e){for(var t=0;t<this.dataExpert.length;t++)for(var a=0;a<this.valueExpert.length;a++)this.dataExpert[t].id===e[a]&&this.arrExpert.push(this.dataExpert[t].name)}},mounted:function(){var e=this,t=[];t.push(JSON.parse(this.rowData)),e.rowDataArr=t,this.getTree(),this.getCommonExpert()}},Ms=Es,Rs=(a("83eb"),Object(u["a"])(Ms,Os,Vs,!1,null,"0bc958ce",null));Rs.options.__file="ReviewRecord.vue";var Js=Rs.exports,Us=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("专家评审")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("综合专家意见")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content body-contents"},[a("h4",{staticClass:"block-depart-title"},[e._v("正审专家")]),a("div",{staticClass:"clear"}),a("div",e._l(e.member,function(t,s){return a("el-tag",{key:t.assExpert},[a("span",{on:{click:function(a){e.clickExpert(t.assExpert,t.assExpertName,t.childrens,s)}}},[e._v(e._s(t.assExpertName))])])})),e._l(e.member,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.memberindex==s,expression:"memberindex==index"}],staticClass:"opinion-input"},[a("span",{staticClass:"expert"},[e._v(e._s("专家："+t.assExpertName))]),a("el-upload",{ref:"commentUpload",refInFor:!0,staticClass:"upload-demo",attrs:{"before-upload":e.beforeUpload,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"on-success":function(a){e.handleRemoveComment(a,t,"commentUpload")},"show-file-list":!1,multiple:"",limit:100}},e._l(e.member_,function(t,s){return e.member_?a("div",{directives:[{name:"show",rawName:"v-show",value:e.memberindex==s,expression:"memberindex==index"}]},[a("ul",{staticClass:"opinion-img_"},e._l(t.childrens,function(t,s){return a("li",{on:{click:function(a){e.clickPic(t.id)}}},[a("hr"),null!=t.comment?a("p",[e._v(e._s("第"+(s+1)+"轮意见："))]):e._e(),t.comment?a("img",{staticClass:"avatar",attrs:{src:"/pics"+JSON.parse(t.comment).path}}):e._e(),null!=t.comment||2!=e.rotation&&3!=e.rotation||0!=s?e._e():a("p",[a("span",{on:{click:function(t){t.stopPropagation(),e.$message.error("该阶段，您不能上传第一轮的意见！！",20)}}},[e._v("第1轮您未上传意见")])]),null==t.comment&&1==e.rotation?a("div",{staticStyle:{position:"relative"}},[a("div",{attrs:{slot:"trigger"},slot:"trigger"},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("span",{staticClass:"el-upload__tip",staticStyle:{position:"absolute",top:"75%",left:"15%",width:"70%"},attrs:{slot:""},slot:"default"},[e._v("请上传图片格式的文件")])])]):e._e(),null!=t.comment||2!=e.rotation&&3!=e.rotation||1!=s?e._e():a("div",{staticStyle:{position:"relative"}},[null!=t.comment?a("p",[e._v("请上传第2轮意见")]):e._e(),t.comment?a("img",{staticClass:"avatar",attrs:{src:"/pics"+JSON.parse(t.comment).path}}):e._e(),null==t.comment&&3==e.rotation&&1==s?a("p",[a("span",{on:{click:function(t){t.stopPropagation(),e.$message.error("该阶段，您不能上传第二轮的意见！！",20)}}},[e._v("第2轮您未上传意见")])]):e._e(),2==e.rotation?a("div",{attrs:{slot:"trigger"},slot:"trigger"},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("span",{staticClass:"el-upload__tip",staticStyle:{position:"absolute",top:"75%",left:"15%",width:"70%"},attrs:{slot:""},slot:"default"},[e._v("请上传图片格式的文件")])]):e._e()])])}))]):e._e()}))],1)}),a("div",{staticClass:"tips-s"},[e._v("点击图片可重新上传。")])],2)]),e.rotation?a("div",{staticClass:"block-bottom"},[a("div",{staticClass:"btn-t6"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.yes}},[e._v("通过")]),e.rotation<3?a("el-button",{attrs:{size:"small"},on:{click:e.no}},[e._v("返回修改")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:e.stop}},[e._v("关闭")])],1)]):e._e()]),a("el-dialog",{attrs:{title:"提示",visible:e.noDialogVisible,width:"40%"},on:{"update:visible":function(t){e.noDialogVisible=t}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"修改原因:"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入修改原因"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"修改后是否再次邮件通知正审专家？","label-width":"300px"}},[a("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.noDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.reject}},[e._v("确 定")])],1)],1)],1)},qs=[],Qs={data:function(){return{radio:"",value:"",noDialogVisible:!1,id:"",index:0,myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},rowData:sessionStorage.getItem("rowReviewInfo"),rowDataArr:[],memberindex:"",member:"",member_:"",placeholder:"请输入专家意见",formalExpertOpinion:"",activiteId:JSON.parse(sessionStorage.getItem("rowReviewInfo")).processVariables.instanceId,projectId:JSON.parse(sessionStorage.getItem("rowReviewInfo")).processVariables.projectId,rotation:JSON.parse(sessionStorage.getItem("rowReviewInfo")).processVariables.expertRotation}},methods:{clickPic:function(e){console.log(e),this.id=e},clickPlus:function(e){console.log(e),this.id=e},yes:function(){var e=this;this.$confirm("是否通过该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.adopt()}).catch(function(){e.$message({type:"info",message:"您已取消通过该项目"})})},no:function(){this.noDialogVisible=!0},stop:function(){var e=this;this.$prompt("请输关闭原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.void_(a)}).catch(function(){})},handleRemoveComment:function(e,t,a){0==e.meta.code&&(this.publishOpinion_(e.data,t),t.comment=JSON.stringify(e.data))},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;return t||a||this.$message.error("上传文件只能是 JPG/PNG 格式!"),t||a},publishOpinion_:function(e,t){var a=this,s={comment:JSON.stringify(e),id:this.id};this.axios.post("".concat(this.common.basePath,"/assessment_expert/expert/opinion"),s).then(function(e){0===e.data.meta.code?(a.$message.success("发表"+e.data.meta.message,20),a.getFormalExpertArr()):a.$message.error(e.data.meta.message,20)}).catch(function(e){a.$message.error(e,20)})},clickExpert:function(e,t,a,s){this.memberindex=s},adopt:function(){var e=this,t={read_status:1,curStatus:7,instanceId:this.rowDataArr[0].processVariables.instanceId,assignee:this.rowDataArr[0].processVariables.assignee};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?(e.$message.success("请等待申报单位上传项目方案（简版）后提交...",20),e.modifyDialogVisible=!1,e.$router.push({path:"/project_set_up/review"})):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},reject:function(e){var t=this;if(""!=this.radio){var a={isEmailB:Number(this.radio),read_status:2,curStatus:7,instanceId:this.rowDataArr[0].processVariables.instanceId,assignee:this.rowDataArr[0].processVariables.assignee,rejectReason:this.value};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),a).then(function(e){0===e.data.meta.code?(t.$message.success("请等待申报单位上传正审改进方案后提交...",20),t.noDialogVisible=!1,t.$router.push({path:"/project_set_up/review"})):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})}else this.$message.error("请选择是否发送邮件。",20)},void_:function(e){var t=this,a={instanceId:JSON.parse(sessionStorage.getItem("rowReviewInfo")).processVariables.instanceId,rejectReason:e};this.axios.post("".concat(this.common.basePath,"/activiti/instance/delete"),a).then(function(e){0===e.data.meta.code?(t.$message.error("该项目已关闭！！",20),t.$router.push({path:"/project_set_up/review"})):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})},getFormalExpertArr:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/assessment_expert/all/").concat(this.projectId),this._pretrialExpertParams()).then(function(t){0===t.data.meta.code?(e.member=t.data.data,e.member_=t.data.data):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_pretrialExpertParams:function(){return{params:{type:2}}}},mounted:function(){var e=this,t=[];t.push(JSON.parse(this.rowData)),e.rowDataArr=t,this.getFormalExpertArr()}},Hs=Qs,Ks=(a("5dac"),a("a826"),Object(u["a"])(Hs,Us,qs,!1,null,"2386053c",null));Ks.options.__file="ReviewApproval.vue";var Ws=Ks.exports,Gs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Xs=[],Ys={},Zs=Ys,er=Object(u["a"])(Zs,Gs,Xs,!1,null,null,null);er.options.__file="Index.vue";var tr=er.exports,ar=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("网信会议")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("网信会议列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,fixed:"","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"processVariables.projectNum",label:"项目编号",width:"120"}}),a("el-table-column",{attrs:{prop:"processVariables.name",label:"项目名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"name-style",on:{click:function(a){e.openDetails(t.row)}}},[e._v("\n                    "+e._s(t.row.processVariables.name)+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.company",label:"申报单位",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("convertToText")(t.row.processVariables.company))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.applyTime",label:"申报时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("formatDate")(t.row.processVariables.applyTime))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.budgetMoney",label:"项目金额",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(t.row.processVariables.budgetMoney+"万元")+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.cur_status",label:"当前状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[8==t.row.processVariables.cur_status?a("span",[e._v("待上会准备")]):e._e(),9==t.row.processVariables.cur_status?a("span",[e._v("待会议评审")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[8==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.leaderClick(t.row)}}},[e._v("上会材料\n                    ")]):e._e(),9==t.row.processVariables.cur_status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.leaderClick(t.row)}}},[e._v("会议意见\n                    ")]):e._e(),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.goToDeclareAgain(t.row)}}},[e._v("编辑")])]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},sr=[],rr={data:function(){return{elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1,options:[{value:"选项1",label:"选中所有"},{value:"选项2",label:"删除选中"},{value:"选项3",label:"批量编辑"},{value:"选项4",label:"导出所选"}],value:"",options4:[],value9:[],list:[],loading:!1,states:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")},convertToText:function(e){return Wt(e,JSON.parse(sessionStorage.getItem("unitArr")))}},methods:{goToDeclareAgain:function(e,t){sessionStorage.setItem("rowDeclareInfo",JSON.stringify(e)),sessionStorage.setItem("historyPath",this.$route.path),this.$router.push({name:"DeclareAgain",params:{id:e.processVariables.projectId,type:t?e.processVariables.cur_status:"edit"}})},getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){if(0===t.data.meta.code){var a=t.data.data;sessionStorage.setItem("unitArr",JSON.stringify(a))}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},openDetails:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.processVariables.projectId}})},leaderClick:function(e){sessionStorage.setItem("rowLeaderInfo",JSON.stringify(e)),8===e.processVariables.cur_status?this.$router.push({path:"/project_set_up/leader/record"}):9===e.processVariables.cur_status&&this.$router.push({path:"/project_set_up/leader/approval"})},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList()},getList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/page"),this._acceptanceListParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_acceptanceListParams:function(){return{params:{status:5,pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}}}},mounted:function(){this.getList(),this.getDeclareUnit()}},ir=rr,or=(a("c419"),Object(u["a"])(ir,ar,sr,!1,null,null,null));or.options.__file="ReviewList.vue";var nr=or.exports,lr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("领导评审")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("网信办意见")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content body-contents"},[a("h4",{staticClass:"block-depart-title expert-opinion"},[e._v("上会材料")]),a("div",{staticClass:"clear"}),a("el-upload",{ref:"uploadFlie",staticClass:"upload-demo",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:99,"on-success":e.uploadSuccessFile,"on-error":e.uploadErrorFile}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传会议材料")]),a("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("允许上传多个文件")])],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-button",{staticClass:"center",attrs:{type:"primary",size:"small"},on:{click:e.next}},[e._v("下一步")])],1)])])},cr=[],ur={data:function(){return{file:[],id:-1,myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},rowData:sessionStorage.getItem("rowLeaderInfo"),rowDataArr:[]}},methods:{UploadUrl:function(){return this.common.basePath+"/file/"+JSON.parse(sessionStorage.getItem("rowLeaderInfo")).processVariables.projectId+"/uplode"},uploadSuccessFile:function(e,t,a){var s=a.map(function(e,t){return{name:e.response.data.name,url:e.response.data.path}});this.file=s},uploadErrorFile:function(e,t,a){this.$message.error("上传失败!!",20),this.file=[]},next:function(){this.metting()},metting:function(){var e=this,t={tips:"已准备好开会材料",curStatus:8,metingFile:this.file,instanceId:this.rowDataArr[0].processVariables.instanceId,assignee:this.rowDataArr[0].processVariables.assignee};""!=this.file?this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?e.$router.push({path:"/project_set_up/leader/approval"}):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)}):this.$message.error("您还未上传会议材料！！！",20)}},mounted:function(){var e=this,t=[];t.push(JSON.parse(this.rowData)),e.rowDataArr=t}},mr=ur,dr=(a("58e1"),Object(u["a"])(mr,lr,cr,!1,null,null,null));dr.options.__file="ReviewRecord.vue";var pr=dr.exports,hr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("网信会议")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("网信会议")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content body-contents"},[a("h4",{staticClass:"block-depart-title expert-opinion"},[e._v("审批结果")]),a("div",{staticClass:"clear"}),a("el-input",{attrs:{type:"textarea"},model:{value:e.desc,callback:function(t){e.desc=t},expression:"desc"}}),a("h4",{staticClass:"block-depart-title expert-opinion"},[e._v("网信会议-调整预算金额")]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm base-info",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px",size:"middle"}},[a("el-form-item",{attrs:{label:"网信会议-调整预算金额：",prop:"budgetApproval"}},[a("el-input",{attrs:{placeholder:"请输入预算金额"},model:{value:e.ruleForm.budgetApproval,callback:function(t){e.$set(e.ruleForm,"budgetApproval",t)},expression:"ruleForm.budgetApproval"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1)],1),a("h4",{staticClass:"block-depart-title expert-opinion"},[e._v("附件上传")]),a("el-upload",{ref:"uploadFlie",staticClass:"upload-demo mart10",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:99,"on-success":e.uploadSuccessFile,"on-error":e.uploadErrorFile}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传附件")]),a("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("允许上传多个文件")])],1)],1)]),e.rotation?a("div",{staticClass:"block-bottom"},[a("div",{staticClass:"btn-t4"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.yes}},[e._v("通过")]),a("el-button",{attrs:{size:"small"},on:{click:e.stop}},[e._v("关闭")])],1)]):e._e()])])},fr=[],gr={data:function(){return{desc:"",file:[],myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},rowData:sessionStorage.getItem("rowLeaderInfo"),rowDataArr:[],rotation:JSON.parse(sessionStorage.getItem("rowLeaderInfo")).processVariables.leaderRotation,ruleForm:{budgetApproval:null},rules:{budgetApproval:[{required:!0,message:"请输入预算金额",trigger:"blur"}]},id:JSON.parse(sessionStorage.getItem("rowLeaderInfo")).processVariables.projectId}},methods:{yes:function(){var e=this;this.$confirm("是否通过该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.adopt()}).catch(function(){})},no:function(){var e=this;this.$prompt("请输入修改原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.reject(a)}).catch(function(){})},stop:function(){var e=this;this.$prompt("请输关闭原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.void_(a)}).catch(function(){})},adopt:function(){var e=this,t={read_status:1,curStatus:9,leaderOpinion:this.desc,instanceId:this.rowDataArr[0].processVariables.instanceId,assignee:this.rowDataArr[0].processVariables.assignee,meetingAttachment:this.file,budgetApproval:this.ruleForm.budgetApproval};""!=this.desc?null!=this.ruleForm.budgetApproval?this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?e.$router.push({path:"/project_set_up/leader"}):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)}):this.$message.error("您还未输入调整预算金额！！！",20):this.$message.error("您还未填写审批结果！！！",20)},reject:function(e){var t=this,a={read_status:2,curStatus:9,instanceId:this.rowDataArr[0].processVariables.instanceId,assignee:this.rowDataArr[0].processVariables.assignee,rejectReason:e};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),a).then(function(e){0===e.data.meta.code?t.$router.push({path:"/project_set_up/leader"}):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})},void_:function(e){var t=this,a={instanceId:JSON.parse(sessionStorage.getItem("rowLeaderInfo")).processVariables.instanceId,rejectReason:e};this.axios.post("".concat(this.common.basePath,"/activiti/instance/delete"),a).then(function(e){0===e.data.meta.code?(t.$message.error("该项目已关闭！！",20),t.$router.push({path:"/project_set_up/leader"})):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})},UploadUrl:function(){return this.common.basePath+"/file/"+JSON.parse(sessionStorage.getItem("rowLeaderInfo")).processVariables.projectId+"/uplode"},uploadSuccessFile:function(e,t,a){var s=a.map(function(e,t){return{name:e.response.data.name,url:e.response.data.path}});this.file=s},uploadErrorFile:function(e,t,a){this.$message.error("上传失败!!",20),this.file=[]}},mounted:function(){var e=this,t=[];t.push(JSON.parse(this.rowData)),e.rowDataArr=t}},br=gr,vr=(a("af48"),Object(u["a"])(br,hr,fr,!1,null,null,null));vr.options.__file="ReviewApproval.vue";var _r=vr.exports,yr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},wr=[],xr={},Cr=xr,Fr=Object(u["a"])(Cr,yr,wr,!1,null,null,null);Fr.options.__file="Index.vue";var kr=Fr.exports,Sr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("财政意见")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("财政意见列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,fixed:"","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"processVariables.projectNum",label:"项目编号",width:"120"}}),a("el-table-column",{attrs:{prop:"processVariables.name",label:"项目名称",width:"240","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"name-style",on:{click:function(a){e.openDetails(t.row)}}},[e._v("\n                    "+e._s(t.row.processVariables.name)+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.company",label:"申报单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("convertToText")(t.row.processVariables.company))+"\n                    ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.applyTime",label:"申报时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("formatDate")(t.row.processVariables.applyTime))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.budgetMoney",label:"项目金额",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(t.row.processVariables.budgetMoney+"万元")+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.cur_status",label:"当前状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[11==t.row.processVariables.cur_status?a("span",[e._v("待财政审批")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.financialClick(t.row)}}},[e._v("录入")])]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},Dr=[],Pr={data:function(){return{elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")},convertToText:function(e){return Wt(e,JSON.parse(sessionStorage.getItem("unitArr")))}},methods:{getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){if(0===t.data.meta.code){var a=t.data.data;sessionStorage.setItem("unitArr",JSON.stringify(a))}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},openDetails:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.processVariables.projectId}})},financialClick:function(e){sessionStorage.setItem("rowFinancialInfo",JSON.stringify(e)),this.$router.push({name:"FinancialApproval",params:{id:e.processVariables.projectId}})},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList()},getList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/page"),this._acceptanceListParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_acceptanceListParams:function(){return{params:{status:6,pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum,company:JSON.parse(sessionStorage.getItem("userData")).id}}}},mounted:function(){this.getList(),this.getDeclareUnit()}},$r=Pr,Nr=(a("bfe2"),Object(u["a"])($r,Sr,Dr,!1,null,null,null));Nr.options.__file="FinancialList.vue";var Ir=Nr.exports,jr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("财政意见")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("财政意见")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("h4",{staticClass:"block-depart-title"},[e._v("录入财政评审相关意见")]),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"200px",size:"small",enctype:"multipart/form-data"}},[a("el-form-item",{staticClass:"is-required",attrs:{label:"财政专家评审意见：",prop:"file5"}},[a("el-upload",{ref:"uploadFlie5",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file5,"before-upload":e.beforeUpload5,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:99,"on-success":e.uploadSuccessFile5,"on-error":e.uploadErrorFile5}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),a("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 若有二次评审请都要上传(.jpg .png .pdf格式)")])],1)],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"项目建设方案(终审稿)：",prop:"file2"}},[a("el-upload",{ref:"uploadFlie2",staticClass:"upload-demo",attrs:{"file-list":e.ruleForm.file2,"before-remove":e.beforeRemove2,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile2,"on-error":e.uploadErrorFile2}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")])],1)],1)],1),a("h4",{staticClass:"block-depart-title"},[e._v("财政意见-调整预算金额")]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm base-info",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px",size:"middle"}},[a("el-form-item",{attrs:{label:"财政意见-调整预算金额：",prop:"budgetFinance"}},[a("el-input",{attrs:{placeholder:"请输入预算金额"},model:{value:e.ruleForm.budgetFinance,callback:function(t){e.$set(e.ruleForm,"budgetFinance",t)},expression:"ruleForm.budgetFinance"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("div",{staticClass:"btn-t4"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.yes}},[e._v("提交材料")])],1)])])])},Tr=[],Ar={data:function(){return{desc:"",detailData:null,projectId:this.$route.params.id,rowData:sessionStorage.getItem("rowFinancialInfo"),rowDataArr:[],myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},ruleForm:{file2:[],file5:[],budgetFinance:null},rules:{budgetFinance:[{required:!0,message:"请输入预算金额",trigger:"blur"}]}}},methods:{getDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/detail/").concat(this.projectId),this._detailParams()).then(function(t){e.ruleForm.file2=null==t.data.data.financePlan?[]:JSON.parse(t.data.data.financePlan),e.ruleForm.file5=null==t.data.data.financeDudget?[]:JSON.parse(t.data.data.financeDudget)}).catch(function(t){e.$message.error(t)})},_detailParams:function(){return{params:{id:this.projectId}}},yes:function(){var e=this;this.$confirm("是否确认提交材料？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.adopt()}).catch(function(){})},no:function(){var e=this;this.$prompt("请输入驳回原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.reject(a)}).catch(function(){})},UploadUrl:function(){return this.common.basePath+"/file/"+JSON.parse(sessionStorage.getItem("rowFinancialInfo")).processVariables.projectId+"/uplode"},uploadSuccessFile2:function(e){this.ruleForm.file2=[{name:e.data.name,url:e.data.path}]},uploadSuccessFile5:function(e,t,a){this.ruleForm.file5=a},uploadSuccessFile99:function(e){this.ruleForm.file99=[{name:e.data.name,url:e.data.path}]},uploadErrorFile2:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file2=[]},uploadErrorFile5:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file5=[]},uploadErrorFile99:function(e,t,a){this.$message.error("上传失败!!",20),this.ruleForm.file99=[]},beforeRemove2:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.ruleForm.file2=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.ruleForm.file2=t,a.$message({type:"info",message:"已取消删除"})})},beforeUpload5:function(e,t){var a="image/jpeg"===e.type,s="image/png"===e.type,r="application/pdf"===e.type;return a||s||r||this.$message.error("上传文件只能是 JPG/PNG/PDF 格式!"),a||s||r},beforeRemove99:function(e,t){var a=this;return this.$confirm("确定移除 ".concat(e.name,"？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:""}).then(function(){a.ruleForm.file99=t,a.$message({type:"success",message:"删除成功!"})}).catch(function(){var t=[];t.push(e),a.ruleForm.file99=t,a.$message({type:"info",message:"已取消删除"})})},adopt:function(){var e=this;if(""!=this.ruleForm.file5)if(""!=this.ruleForm.file2)if(null!=this.ruleForm.budgetFinance){var t={read_status:1,curStatus:11,instanceId:this.rowDataArr[0].processVariables.instanceId,assignee:this.rowDataArr[0].processVariables.assignee,file2:this.ruleForm.file2,file5:this.ruleForm.file5,budgetFinance:this.ruleForm.budgetFinance};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?(e.opinionFileDialogVisible=!1,e.$router.push({path:"/project_set_up/financial"})):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})}else this.$message.error("您还未输入调整预算金额！！！",20);else this.$message.error("上传的 项目建设方案(终审稿) 缺失!!!",60);else this.$message.error("上传的 财务出具的评审报告 缺失!!!",60)},reject:function(e){var t=this,a={read_status:0,curStatus:11,instanceId:this.rowDataArr[0].processVariables.instanceId,assignee:this.rowDataArr[0].processVariables.assignee,rejectReason:e};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),a).then(function(e){0===e.data.meta.code?t.$router.push({path:"/project_set_up/financial"}):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})}},mounted:function(){var e=this,t=[];t.push(JSON.parse(this.rowData)),e.rowDataArr=t,this.getDetail()}},zr=Ar,Br=(a("e056"),Object(u["a"])(zr,jr,Tr,!1,null,null,null));Br.options.__file="FinancialApproval.vue";var Lr=Br.exports,Or=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Vr=[],Er={},Mr=Er,Rr=Object(u["a"])(Mr,Or,Vr,!1,null,null,null);Rr.options.__file="Index.vue";var Jr=Rr.exports,Ur=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目归档")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("审核列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,fixed:"","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"processVariables.projectNum",label:"项目编号",width:"120"}}),a("el-table-column",{attrs:{prop:"processVariables.name",label:"项目名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"name-style",on:{click:function(a){e.openDetails(t.row)}}},[e._v("\n                    "+e._s(t.row.processVariables.name)+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.company",label:"申报单位",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(t.row.processVariables.companyName)+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.applyTime",label:"申报时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(e._f("formatDate")(t.row.processVariables.applyTime))+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.budgetMoney",label:"项目金额",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                    "+e._s(t.row.processVariables.budgetMoney+"万元")+"\n                  ")])]}}])}),a("el-table-column",{attrs:{prop:"processVariables.cur_status",label:"当前状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[12==t.row.processVariables.cur_status?a("span",[e._v("待归档")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.fileClick(t.row)}}},[e._v("审批")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.goToDeclareAgain(t.row)}}},[e._v("编辑")])]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},qr=[],Qr={data:function(){return{elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")},convertToText:function(e){return Wt(e,JSON.parse(sessionStorage.getItem("unitArr")))}},methods:{goToDeclareAgain:function(e,t){sessionStorage.setItem("rowDeclareInfo",JSON.stringify(e)),sessionStorage.setItem("historyPath",this.$route.path),this.$router.push({name:"DeclareAgain",params:{id:e.processVariables.projectId,type:t?e.processVariables.cur_status:"edit"}})},getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){if(0===t.data.meta.code){var a=t.data.data;sessionStorage.setItem("unitArr",JSON.stringify(a))}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},openDetails:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.processVariables.projectId}})},fileClick:function(e){sessionStorage.setItem("rowFileInfo",JSON.stringify(e)),this.$router.push({name:"FileProject",params:{id:e.processVariables.projectId}})},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList()},getList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/project/page"),this._acceptanceListParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_acceptanceListParams:function(){return{params:{status:7,pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}}}},mounted:function(){this.getList(),this.getDeclareUnit()}},Hr=Qr,Kr=(a("e91b"),Object(u["a"])(Hr,Ur,qr,!1,null,null,null));Kr.options.__file="FileList.vue";var Wr=Kr.exports,Gr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("审核归档")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("审核归档")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("div",{staticClass:"grid-content_f bg-gray"},[e.detailData?a("el-form",{attrs:{size:"small","label-width":"200px"}},[a("el-form-item",{attrs:{label:"财政意见-调整预算金额：",prop:"budgetFinance"}},[a("span",[e._v(e._s(e.detailData.budgetFinance+"万元"))])]),a("el-form-item",{attrs:{label:"财政专家评审意见："}},[e.financeDudget.length>0?a("a",{staticClass:"fl",attrs:{href:"pics"+e.financeDudget[0].response.data.path,target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.financeDudget[0].name)+"\n\t\t\t\t\t\t\t")]):e._e()]),a("el-form-item",{attrs:{label:"项目建设方案(终审稿)："}},[e.financePlan.length>0?a("a",{staticClass:"fl",attrs:{href:"pics"+e.financePlan[0].url,target:"view_window"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.financePlan[0].name)+"\n\t\t\t\t\t\t\t")]):e._e()])],1):e._e()],1)])]),a("div",{staticClass:"block-bottom"},[a("div",{staticClass:"btn-t4"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.yes}},[e._v("通过")]),a("el-button",{attrs:{size:"small"},on:{click:e.no}},[e._v("返回修改")])],1)])])])},Xr=[],Yr={components:{"file-list":Sa},data:function(){return{desc:"",projectId:this.$route.params.id,detailData:{},financePlan:[],financeDudget:[]}},methods:{yes:function(){var e=this;e.$confirm("是否通过该项目？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.adopt()}).catch(function(e){})},no:function(){var e=this;e.$prompt("请输入返回修改原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){var a=t.value;e.reject(a)}).catch(function(){})},adopt:function(){var e=this,t={read_status:1,curStatus:12,instanceId:this.detailData.instanceId,assignee:JSON.parse(sessionStorage.getItem("userData")).id};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),t).then(function(t){0===t.data.meta.code?(e.$message.success("归档"+t.data.meta.message,20),e.$router.push({path:"/project_set_up/file"})):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},reject:function(e){var t=this,a={read_status:2,curStatus:12,instanceId:this.detailData.instanceId,assignee:JSON.parse(sessionStorage.getItem("userData")).id,rejectReason:e};this.axios.post("".concat(this.common.basePath,"/activiti/complete"),a).then(function(e){0===e.data.meta.code?(t.$message.success("请等待申报单位修改财政评审相关意见后重新提交...",20),t.$router.push({path:"/project_set_up/file"})):t.$message.error(e.data.meta.message,20)}).catch(function(e){t.$message.error(e,20)})}},mounted:function(){var e=this;e.axios.get("".concat(e.common.basePath,"/project/detail/").concat(e.projectId),{params:{id:e.projectId}}).then(function(t){e.detailData=t.data.data,e.financePlan=JSON.parse(e.detailData.financePlan)||[],e.financeDudget=JSON.parse(e.detailData.financeDudget)||[]}).catch(function(t){e.$message.error(t)})}},Zr=Yr,ei=(a("df51"),Object(u["a"])(Zr,Gr,Xr,!1,null,"cee1a17c",null));ei.options.__file="FileProject.vue";var ti=ei.exports,ai=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},si=[],ri={},ii=ri,oi=Object(u["a"])(ii,ai,si,!1,null,null,null);oi.options.__file="Index.vue";var ni=oi.exports,li=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("进度汇报")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("进度汇报列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,fixed:"","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"processVariables.projectNum",label:"项目编号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.row.projectNum)+"\n\t\t\t\t\t\t\t\t\t\t")])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"240","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"name-style",on:{click:function(a){e.openDetails(t.row)}}},[e._v("\n                      "+e._s(t.row.name)+"\n                    ")])]}}])}),a("el-table-column",{attrs:{prop:"orgName",label:"申报单位",width:"150"}}),a("el-table-column",{attrs:{prop:"createTime",label:"申报时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                      "+e._s(e._f("formatDate")(t.row.createTime))+"\n                    ")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"230",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"",size:"small"},on:{click:function(a){a.stopPropagation(),e.eye(t.row)}}},[e._v("进度汇报")])]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},ci=[],ui={data:function(){return{elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")},convertToText:function(e){return Wt(e,JSON.parse(sessionStorage.getItem("unitArr")))}},methods:{getDeclareUnit:function(){var e=this,t={id:6};this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),t).then(function(t){if(0===t.data.meta.code){var a=t.data.data;sessionStorage.setItem("unitArr",JSON.stringify(a))}else e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})},eye:function(e){this.$router.push({name:"TrackList",params:{id:e.id}})},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList()},getList:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/project/org"),this._queryListParams()).then(function(t){e.tableData=t.data.data}).catch(function(t){e.$message.error(t)})},_queryListParams:function(){return{orgId:JSON.parse(sessionStorage.getItem("assignee")),stage:8,pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}},openDetails:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.id}})}},mounted:function(){this.getList(),this.getDeclareUnit()}},mi=ui,di=(a("0cd9"),Object(u["a"])(mi,li,ci,!1,null,null,null));di.options.__file="ApprovalList.vue";var pi=di.exports,hi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"back-button",attrs:{type:"primary",icon:"el-icon-back",size:"middle"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v(" \n      进度汇报 \n    ")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-content"},[a("progress-report",{attrs:{projectId:e.projectId}})],1)])])],1)},fi=[],gi={components:{"progress-report":ya},methods:{processHistory:function(){var e=this,t={instanceId:JSON.parse(sessionStorage.getItem("historyId"))};this.axios.post("".concat(this.common.basePath,"/activiti/history"),t).then(function(t){0===t.data.meta.code?e.history=t.data.data.reverse():e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})}},mounted:function(){},data:function(){return{loading:!1,projectId:this.$route.params.id}}},bi=gi,vi=(a("e21a"),Object(u["a"])(bi,hi,fi,!1,null,null,null));vi.options.__file="TrackList.vue";var _i=vi.exports,yi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目跟踪图")]),a("div",{staticClass:"block-wrap"},[a("div",{staticClass:"block-body"},[a("div",{staticClass:"wrapper"},[a("ul",{staticClass:"time-line"},[a("div",[a("el-button",{staticClass:"clear tl-title tl-title-color",attrs:{type:"",size:"small"}},[e._v("现在")])],1),a("div",[e._m(0),e._m(1),e._m(2),a("ul",{staticClass:"tl-item"},[a("li",{staticClass:"tl-item-left fl"},[e._v("2018-06-01")]),a("li",{staticClass:"tl-item-right fl b-c-j"},[a("div",{staticClass:"content content-h1"},[a("span",{staticClass:"arrow-left fl"}),a("div",{staticClass:"content-title fl"},[e._v("技术审批")]),a("div",{staticClass:"content-desc clear"},[a("div",{staticClass:"content-left fl"},[a("el-button",{attrs:{type:"text",size:"mini"}},[e._v("@专家组 ")]),a("hr"),a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"fa fa-eye",size:"mini"}}),a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(" 确定参加")])],1)],1),e._m(3)])])])]),e._m(4),a("el-button",{staticClass:"clear tl-title",attrs:{type:"",size:"small",round:""}},[e._v("审批")])],1),a("div",[e._m(5),a("el-button",{staticClass:"clear tl-title-icon",attrs:{type:"",size:"small",circle:""}},[a("i",{staticClass:"fa fa-twitter"})])],1),a("div",[e._m(6),a("el-button",{staticClass:"clear tl-title",attrs:{type:"",size:"small",round:""}},[e._v("开始")])],1)])])])])])},wi=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"tl-item"},[a("li",{staticClass:"tl-item-left fl"},[e._v("2018-06-25")]),a("li",{staticClass:"tl-item-right fl"},[a("div",{staticClass:"content"},[a("span",{staticClass:"arrow-left"}),e._v("\n\t\t\t\t\t\t\t\t\t\t财政审核通过\n\t\t\t\t\t\t\t\t\t")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"tl-item"},[a("li",{staticClass:"tl-item-left fl"},[e._v("2018-06-20")]),a("li",{staticClass:"tl-item-right fl b-c-c"},[a("div",{staticClass:"content"},[a("span",{staticClass:"arrow-left"}),e._v("\n\t\t\t\t\t\t\t\t\t\t财政审批\n\t\t\t\t\t\t\t\t\t")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"tl-item"},[a("li",{staticClass:"tl-item-left fl"},[e._v("2018-06-10")]),a("li",{staticClass:"tl-item-right fl b-c-g"},[a("div",{staticClass:"content content-bg"},[a("span",{staticClass:"arrow-left arrow-left-bg"}),e._v("\n\t\t\t\t\t\t\t\t\t\t审批通过\n\t\t\t\t\t\t\t\t\t")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content-right fl"},[s("a",{staticClass:"avatar"},[s("img",{attrs:{src:a("3da2"),alt:"管理员"}}),s("i",{staticClass:"spot"})])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"tl-item"},[s("li",{staticClass:"tl-item-left fl"},[e._v("2018-05-04")]),s("li",{staticClass:"tl-item-right fl b-c-e"},[s("div",{staticClass:"content content-h2"},[s("span",{staticClass:"arrow-left fl"}),s("div",{staticClass:"content-title fl"},[e._v("专家审批")]),s("div",{staticClass:"content-desc clear"},[e._v("这是有个非常棒的好项目，请您提出您的宝贵意见，以便我们最终审核。")]),s("ul",{staticClass:"content-list"},[s("li",{staticClass:"fl item-img"},[s("a",{attrs:{href:"#"}},[s("img",{attrs:{src:a("972d"),alt:"专家甲"}}),s("i",{staticClass:"spot"})])]),s("li",{staticClass:"fl item-img"},[s("a",{attrs:{href:"#"}},[s("img",{attrs:{src:a("1569"),alt:"专家乙"}}),s("i",{staticClass:"spot"})])]),s("li",{staticClass:"fl item-img"},[s("a",{attrs:{href:"#"}},[s("img",{attrs:{src:a("2a25"),alt:"专家丙"}}),s("i",{staticClass:"spot"})])]),s("li",{staticClass:"fl item-img"},[s("a",{attrs:{href:"#"}},[s("img",{attrs:{src:a("a6d0"),alt:"专家丁"}}),s("i",{staticClass:"spot"})])]),s("li",{staticClass:"fl item-img"},[s("a",{staticClass:"add-btn",attrs:{href:"#"}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t+20名\n\t\t\t\t\t\t\t\t\t\t\t\t")])]),s("li",{staticClass:"fl item-img item-text"},[e._v("专家已预审")])]),s("div",{staticClass:"content-opinion"},[s("span",{staticClass:"arrow-up"}),s("textarea",{attrs:{placeholder:"请填写你的宝贵审核意见..."}}),s("p",{staticClass:"opinion-publish"},[s("a",{staticClass:"fl camera",attrs:{href:"#"}},[s("i",{staticClass:"fa fa-camera"})]),s("a",{staticClass:"fl",attrs:{href:"#"}},[s("i",{staticClass:"fa fa-video-camera"})]),s("a",{staticClass:"fr submit-btn",attrs:{href:"#"}},[s("button",[e._v("提交审核意见")])])])])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"tl-item"},[a("li",{staticClass:"tl-item-left fl"},[e._v("2018-03-06")]),a("li",{staticClass:"tl-item-right fl b-c-t"},[a("div",{staticClass:"content"},[a("span",{staticClass:"arrow-left"}),e._v("\n\t\t\t\t\t\t\t\t\t\t项目受理\n\t\t\t\t\t\t\t\t\t")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"tl-item"},[a("li",{staticClass:"tl-item-left fl"},[e._v("2018-03-05")]),a("li",{staticClass:"tl-item-right fl b-c-s"},[a("div",{staticClass:"content"},[a("span",{staticClass:"arrow-left"}),e._v("\n\t\t\t\t\t\t\t\t\t\t立项申请\n\t\t\t\t\t\t\t\t\t")])])])}],xi={methods:{processHistory:function(){var e=this,t={instanceId:JSON.parse(sessionStorage.getItem("historyId"))};this.axios.post("".concat(this.common.basePath,"/activiti/history"),t).then(function(t){0===t.data.meta.code?(e.$message.success(t.data.meta.message,20),e.history=t.data.data):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)})}},mounted:function(){this.processHistory()},data:function(){return{history:[]}}},Ci=xi,Fi=(a("ca03"),Object(u["a"])(Ci,yi,wi,!1,null,null,null));Fi.options.__file="TrackList_.vue";var ki,Si,Di=Fi.exports,Pi={},$i=Object(u["a"])(Pi,ki,Si,!1,null,null,null);$i.options.__file="projectEdit.vue";$i.exports;var Ni=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Ii=[],ji={},Ti=ji,Ai=Object(u["a"])(Ti,Ni,Ii,!1,null,null,null);Ai.options.__file="Index.vue";Ai.exports;var zi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("预算单位查询")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("预算单位查询")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-form",{ref:"searchForm",staticClass:"padt10 danwei-form",attrs:{model:e.searchForm,size:"middle","label-width":"100px",inline:""}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"名称：",prop:"keyWords"}},[a("el-input",{attrs:{placeholder:"请输入项目名"},model:{value:e.searchForm.keyWords,callback:function(t){e.$set(e.searchForm,"keyWords",t)},expression:"searchForm.keyWords"}})],1)],1),a("el-col",{attrs:{span:11,offset:1}},[a("el-form-item",{attrs:{label:"状态：",prop:"stage"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.stage,callback:function(t){e.$set(e.searchForm,"stage",t)},expression:"searchForm.stage"}},e._l(e.common.projectStatusData(),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"申报单位：",prop:"orgId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.searchForm.orgId,callback:function(t){e.$set(e.searchForm,"orgId",t)},expression:"searchForm.orgId"}},e._l(e.userList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),a("el-col",{attrs:{span:11,offset:1}},[a("el-form-item",{attrs:{label:"申报时间：",prop:"timeRange"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.timeRange,callback:function(t){e.$set(e.searchForm,"timeRange",t)},expression:"searchForm.timeRange"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:e.getQueryList}},[e._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:function(t){e.resetSearchForm("searchForm")}}},[e._v("重置")])],1)],1)],1)],1)],1),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"body-content",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows},on:{"row-click":e.handleClick}},[e._v("\n              <"),a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod,align:"center","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"name",label:"项目名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"orgName",label:"申报单位",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(t.row.orgName))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"申报时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(e.common._convertDate(t.row.createTime,"yyyy年MM月dd日")))])]}}])}),a("el-table-column",{attrs:{prop:"budgetMoney",label:"项目金额",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(t.row.budgetMoney))])]}}])}),a("el-table-column",{attrs:{prop:"state",label:"当前状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:e.common.showStatusText(t.row.stage)?e.common.showStatusText(t.row.stage).stageColor:""},[e._v(e._s(e.common.showStatusText(t.row.stage)?e.common.showStatusText(t.row.stage).name:""))])]}}])}),a("el-table-column",{attrs:{prop:"state",label:"项目进度",width:"350"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{percentage:parseInt(100*e.row.schedule)}})]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{staticClass:"ce-pagination",attrs:{span:24,"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":function(t){e.handleSizeChange(t)},"current-change":function(t){e.handleCurrentChange(t)}}})],1)]),a("el-dialog",{attrs:{title:"查看详情",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("project-detail",{attrs:{detail:e.currentRowDetail}})],1)],1)},Bi=[],Li=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.detail?a("div",[a("p",[e._v("项目名称：{}")]),a("el-radio-group",{staticStyle:{"margin-bottom":"30px","text-align":"right"},attrs:{size:"small"},model:{value:e.tabPosition,callback:function(t){e.tabPosition=t},expression:"tabPosition"}},e._l(e.common.projectStatusData(),function(t,s){return a("el-radio-button",{attrs:{label:t.id}},[e._v(e._s(t.name))])})),a("el-tabs",{staticClass:"block-wrap",attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"基础信息"}}),a("el-tab-pane",{attrs:{label:"申报历史"}}),a("el-tab-pane",{attrs:{label:"进度汇报"}})],1)],1):e._e()},Oi=[],Vi={props:{detail:{default:null,required:!0}},methods:{},mounted:function(){},data:function(){return{tabPosition:1}}},Ei=Vi,Mi=Object(u["a"])(Ei,Li,Oi,!1,null,null,null);Mi.options.__file="DetailComponent.vue";var Ri=Mi.exports,Ji={components:{"project-detail":Ri},methods:{indexMethod:function(e){return e+1+(this.elementPageData.pageNum-1)*this.elementPageData.pageSize},getQueryList:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/project/org"),this._queryListParams()).then(function(t){e.tableData=t.data.data,e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t)})},_queryListParams:function(){return this.searchForm.beginTime=this.searchForm.timeRange?new Date(this.searchForm.timeRange[0]).getTime():null,this.searchForm.endTime=this.searchForm.timeRange?new Date(this.searchForm.timeRange[1]).getTime():null,this.searchForm.pageNum=this.elementPageData.pageNum,this.searchForm.pageSize=this.elementPageData.pageSize,this.searchForm.timeRange=null,this.searchForm},getQueryUserList:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),{id:6}).then(function(t){e.userList=t.data.data}).catch(function(t){e.$message.error(t)})},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getQueryList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getQueryList()},handleClick:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.id}})},resetSearchForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getQueryUserList(),this.getQueryList()},data:function(){return{loading:!0,dialogVisible:!1,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},userData:JSON.parse(sessionStorage.getItem("userData")),tableData:{rows:[],total:0},formInline:{user:"",region:""},currentRowDetail:null,userList:null,searchForm:{orgId:null,keyWords:null,stage:null,beginTime:null,endTime:null,timeRange:null,pageNum:null,pageSize:null}}}},Ui=Ji,qi=(a("22db"),Object(u["a"])(Ui,zi,Bi,!1,null,null,null));qi.options.__file="Budget.vue";qi.exports;var Qi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目查询")]),a("div",{staticClass:"block-wrap"},[a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-form",{ref:"searchForm",staticClass:"padt10 danwei-form",attrs:{model:e.searchForm,size:"middle","label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称：",prop:"keyWords"}},[a("el-input",{attrs:{placeholder:"请输入项目名"},model:{value:e.searchForm.keyWords,callback:function(t){e.$set(e.searchForm,"keyWords",t)},expression:"searchForm.keyWords"}})],1),a("el-form-item",{attrs:{label:"申报单位：",prop:"orgId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.searchForm.orgId,callback:function(t){e.$set(e.searchForm,"orgId",t)},expression:"searchForm.orgId"}},e._l(e.userList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"编号：",prop:"projectNum"}},[a("el-input",{attrs:{placeholder:"请输入项目编号"},model:{value:e.searchForm.projectNum,callback:function(t){e.$set(e.searchForm,"projectNum",t)},expression:"searchForm.projectNum"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"状态：",prop:"stage"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.stage,callback:function(t){e.$set(e.searchForm,"stage",t)},expression:"searchForm.stage"}},e._l(e.common.projectStatusData(),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"申报时间：",prop:"timeRange"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.timeRange,callback:function(t){e.$set(e.searchForm,"timeRange",t)},expression:"searchForm.timeRange"}})],1),a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:e.getQueryList}},[e._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:function(t){e.resetSearchForm("searchForm")}}},[e._v("重置")])],1)],1)],1)],1)],1),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"body-content",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows},on:{"row-click":e.handleClick}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,"class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"name",label:"项目编号",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(t.row.projectNum))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"项目名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"orgName",label:"申报单位",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(t.row.orgName))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"申报时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(e.common._convertDate(t.row.createTime,"yyyy年MM月dd日")))])]}}])}),a("el-table-column",{attrs:{prop:"state",label:"当前状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:e.common.showStatusText(t.row.stage)?e.common.showStatusText(t.row.stage).stageColor:""},[e._v(e._s(e.common.showStatusText(t.row.stage)?e.common.showStatusText(t.row.stage).name:""))])]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{staticClass:"ce-pagination",attrs:{span:24,"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":function(t){e.handleSizeChange(t)},"current-change":function(t){e.handleCurrentChange(t)}}})],1)]),a("el-dialog",{attrs:{title:"查看详情",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("project-detail",{attrs:{detail:e.currentRowDetail}})],1)],1)},Hi=[],Ki={components:{"project-detail":Ri},methods:{indexMethod:function(e){return e+1+(this.elementPageData.pageNum-1)*this.elementPageData.pageSize},getQueryList:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/project/all"),this._queryListParams()).then(function(t){e.tableData=t.data.data,e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t)})},_queryListParams:function(){return this.searchForm.beginTime=this.searchForm.timeRange?new Date(this.searchForm.timeRange[0]).getTime():null,this.searchForm.endTime=this.searchForm.timeRange?new Date(this.searchForm.timeRange[1]).getTime():null,this.searchForm.pageNum=this.elementPageData.pageNum,this.searchForm.pageSize=this.elementPageData.pageSize,this.searchForm.timeRange=null,this.searchForm},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getQueryList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getQueryList()},handleClick:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.id}})},getQueryUserList:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),{id:6}).then(function(t){e.userList=t.data.data}).catch(function(t){e.$message.error(t)})},resetSearchForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getQueryUserList(),this.getQueryList()},data:function(){return{loading:!0,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},userData:JSON.parse(sessionStorage.getItem("userData")),tableData:{rows:[],total:0},formInline:{user:"",region:""},dialogVisible:!1,currentRowDetail:null,userList:null,searchForm:{orgId:null,keyWords:null,stage:null,beginTime:null,endTime:null,timeRange:null,pageNum:null,pageSize:null}}}},Wi=Ki,Gi=(a("9fa8"),Object(u["a"])(Wi,Qi,Hi,!1,null,null,null));Gi.options.__file="Director.vue";var Xi=Gi.exports,Yi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("专家查询")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("查询表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-form",{ref:"searchForm",staticClass:"padt10",attrs:{model:e.searchForm,size:"small","label-width":"100px",inline:""}},[a("el-form-item",{attrs:{label:"名称",prop:"keyWords"}},[a("el-input",{attrs:{placeholder:"请输入项目名"},model:{value:e.searchForm.keyWords,callback:function(t){e.$set(e.searchForm,"keyWords",t)},expression:"searchForm.keyWords"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"stage"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.stage,callback:function(t){e.$set(e.searchForm,"stage",t)},expression:"searchForm.stage"}},e._l(e.commonJs.projectStatusData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"申报单位",prop:"orgId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.orgId,callback:function(t){e.$set(e.searchForm,"orgId",t)},expression:"searchForm.orgId"}},e._l(e.userList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"申报时间",prop:"timeRange"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.timeRange,callback:function(t){e.$set(e.searchForm,"timeRange",t)},expression:"searchForm.timeRange"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.getQueryList}},[e._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:function(t){e.resetSearchForm("searchForm")}}},[e._v("重置")])],1)],1)],1),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"body-content",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,border:""},on:{"row-click":e.handleClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"name",label:"项目名称"}}),a("el-table-column",{attrs:{prop:"orgName",label:"申报单位",width:"200"}}),a("el-table-column",{attrs:{prop:"createTime",label:"申报时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e.common._convertDate(t.row.createTime,"yyyy年MM月dd日"))+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"budgetMoney",label:"项目金额",width:"150"}}),a("el-table-column",{attrs:{prop:"state",label:"当前状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:e.common.showStatusText(t.row.curStatus).stageColor},[e._v(e._s(e.common.showStatusText(t.row.curStatus).name))])]}}])}),a("el-table-column",{attrs:{prop:"state",label:"项目进度",width:"350"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{percentage:parseInt(100*e.row.schedule)}})]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-col",{attrs:{span:8,offset:4}},[a("div",{staticClass:"block"},[a("el-pagination",{staticClass:"ce-pagination",attrs:{span:24,"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":function(t){e.handleSizeChange(t)},"current-change":function(t){e.handleCurrentChange(t)}}})],1)])],1)]),a("el-dialog",{attrs:{title:"查看详情",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("project-detail",{attrs:{detail:e.currentRowDetail}})],1)],1)},Zi=[],eo={components:{"project-detail":Ri},methods:{indexMethod:function(e){return e+1+(this.elementPageData.pageNum-1)*this.elementPageData.pageSize},getQueryList:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/project/expert"),this._queryListParams()).then(function(t){e.tableData=t.data.data}).catch(function(t){e.$message.error(t)})},_queryListParams:function(){return{expert:this.expertId,pageNum:this.elementPageData.pageNum,pageSize:this.elementPageData.pageSize}},getQueryExpertList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/hr_users/expert/list"),"").then(function(t){e.expertList=t.data.data,e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t)})},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getQueryList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getQueryList()},onSubmit:function(){this.getQueryList()},handleClick:function(e){this.dialogVisible=!0,this.currentRowDetail=e},getQueryUserList:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/hr_users/user/list"),{id:6}).then(function(t){e.userList=t.data.data}).catch(function(t){e.$message.error(t)})},resetSearchForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getQueryUserList(),this.getQueryExpertList(),this.getQueryList()},data:function(){return{loading:!0,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},userData:JSON.parse(sessionStorage.getItem("userData")),expertList:{rows:[],total:0},expertId:null,tableData:{rows:[],total:0},formInline:{user:"",region:""},dialogVisible:!1,currentRowDetail:null,userList:null,searchForm:{orgId:null,keyWords:null,stage:null,beginTime:null,endTime:null,timeRange:null,pageNum:null,pageSize:null}}}},to=eo,ao=(a("be73"),Object(u["a"])(to,Yi,Zi,!1,null,null,null));ao.options.__file="Expert.vue";ao.exports;var so=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("其他查询")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("查询表")]),a("div",{staticClass:"block-body"},[a("el-row",{attrs:{gutter:20,justify:"center"}},[a("el-col",{attrs:{span:24}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"项目编号"}},[a("el-input",{attrs:{placeholder:"输入项目编号"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),a("el-form-item",{attrs:{label:"项目名称 "}},[a("el-input",{attrs:{placeholder:"输入项目名称 "},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),a("el-form-item",{attrs:{label:"预算科目"}},[a("el-select",{attrs:{placeholder:"选择预算科目"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:""},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"num",label:"编号",width:"150"}}),a("el-table-column",{attrs:{prop:"date",label:"填报日期",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"180"}}),a("el-table-column",{attrs:{prop:"state",label:"处理状态"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"",icon:"el-icon-view",size:"mini"},on:{click:function(a){e.handleClick(t.row)}}},[e._v("查看")]),a("el-button",{attrs:{type:"",icon:"el-icon-edit",size:"mini"}},[e._v("编辑")])]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[100,200,300,400],"page-size":100,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:400},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])])},ro=[],io={methods:{handleClick:function(e){console.log(e)},onSubmit:function(){console.log("submit!")},handleSizeChange:function(e){console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){console.log("当前页: ".concat(e))}},data:function(){return{options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],value:"",tableData:[{date:"2016-05-03",name:"王小虎",state:"完成",num:200333},{date:"2016-05-03",name:"王小虎",state:"完成",num:200333},{date:"2016-05-03",name:"王小虎",state:"完成",num:200333},{date:"2016-05-03",name:"王小虎",state:"完成",num:200333}],formInline:{user:"",region:""},currentPage:4}}},oo=io,no=(a("8977"),Object(u["a"])(oo,so,ro,!1,null,null,null));no.options.__file="Other.vue";no.exports;var lo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("申报单位查询")]),a("div",{staticClass:"block-wrap"},[a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-form",{ref:"searchForm",staticClass:"padt10 danwei-form",attrs:{model:e.searchForm,size:"middle","label-width":"100px",inline:""}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"名称：",prop:"keyWords"}},[a("el-input",{attrs:{placeholder:"请输入项目名"},model:{value:e.searchForm.keyWords,callback:function(t){e.$set(e.searchForm,"keyWords",t)},expression:"searchForm.keyWords"}})],1)],1),a("el-col",{attrs:{span:11,offset:1}},[a("el-form-item",{attrs:{label:"状态：",prop:"stage"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.searchForm.stage,callback:function(t){e.$set(e.searchForm,"stage",t)},expression:"searchForm.stage"}},e._l(e.common.projectStatusData(),function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"申报时间：",prop:"timeRange"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.timeRange,callback:function(t){e.$set(e.searchForm,"timeRange",t)},expression:"searchForm.timeRange"}})],1)],1),a("el-col",{attrs:{span:11,offset:1}},[a("el-form-item",{attrs:{label:"编号：",prop:"projectNum"}},[a("el-input",{attrs:{placeholder:"请输入项目编号"},model:{value:e.searchForm.projectNum,callback:function(t){e.$set(e.searchForm,"projectNum",t)},expression:"searchForm.projectNum"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:e.getQueryList}},[e._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:function(t){e.resetSearchForm("searchForm")}}},[e._v("重置")])],1)],1)],1)],1)],1),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"body-content",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows},on:{"row-click":e.handleClick}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,"class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"name",label:"项目编号",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(t.row.projectNum))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"项目名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"orgName",label:"申报单位",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(t.row.orgName))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"申报时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"cursor-pointer"},[e._v(e._s(e.common._convertDate(t.row.createTime,"yyyy年MM月dd日")))])]}}])}),a("el-table-column",{attrs:{prop:"state",label:"当前状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:e.common.showStatusText(t.row.stage)?e.common.showStatusText(t.row.stage).stageColor:""},[e._v(e._s(e.common.showStatusText(t.row.stage)?e.common.showStatusText(t.row.stage).name:""))])]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{staticClass:"ce-pagination",attrs:{span:24,"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":function(t){e.handleSizeChange(t)},"current-change":function(t){e.handleCurrentChange(t)}}})],1)]),a("el-dialog",{attrs:{title:"查看详情",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("project-detail",{attrs:{detail:e.currentRowDetail}})],1)],1)},co=[],uo={components:{"project-detail":Ri},methods:{indexMethod:function(e){return e+1+(this.elementPageData.pageNum-1)*this.elementPageData.pageSize},getQueryList:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/project/org"),this._queryListParams()).then(function(t){e.tableData=t.data.data,e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t)})},_queryListParams:function(){return this.searchForm.beginTime=this.searchForm.timeRange?new Date(this.searchForm.timeRange[0]).getTime():null,this.searchForm.endTime=this.searchForm.timeRange?new Date(this.searchForm.timeRange[1]).getTime():null,this.searchForm.pageNum=this.elementPageData.pageNum,this.searchForm.pageSize=this.elementPageData.pageSize,this.searchForm.timeRange=null,this.searchForm.orgId=JSON.parse(sessionStorage.getItem("userData")).id,this.searchForm},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getQueryList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getQueryList()},handleClick:function(e){sessionStorage.setItem("declareProjectIsEdit",1),this.$router.push({name:"DeclareDetail",params:{id:e.id}})},resetSearchForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getQueryList()},data:function(){return{loading:!0,dialogVisible:!1,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},userData:JSON.parse(sessionStorage.getItem("userData")),tableData:{rows:[],total:0},formInline:{user:"",region:""},currentRowDetail:null,searchForm:{orgId:null,keyWords:null,stage:null,beginTime:null,endTime:null,timeRange:null,pageNum:null,pageSize:null}}}},mo=uo,po=(a("c0a1"),Object(u["a"])(mo,lo,co,!1,null,null,null));po.options.__file="Reporting.vue";var ho=po.exports,fo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},go=[],bo={},vo=bo,_o=Object(u["a"])(vo,fo,go,!1,null,null,null);_o.options.__file="Index.vue";var yo=_o.exports,wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},xo=[],Co={},Fo=Co,ko=Object(u["a"])(Fo,wo,xo,!1,null,null,null);ko.options.__file="Index.vue";var So=ko.exports,Do=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目进度")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("项目进度汇报列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}}),a("el-col",{staticClass:"fr",attrs:{span:12,offset:0}},[a("el-button",{staticClass:"fr",attrs:{type:"",icon:"el-icon-search",size:"small"}},[e._v("检索")]),a("el-autocomplete",{staticClass:"fr w300",attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入项目名称",size:"small","value-key":"name",clearable:""},on:{select:e.handleSelect},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1)],1)],1),a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:"",border:""}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"50"}}),a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"createTime",label:"日期",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(e._f("formatDate")(t.row.createTime))+"\n\t\t\t\t\t\t\t\t\t\t")])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"240"}}),a("el-table-column",{attrs:{prop:"orgName",label:"负责人",width:"150"}}),a("el-table-column",{attrs:{prop:"payMoney",label:"项目集资(万元)",width:"150"}}),a("el-table-column",{attrs:{label:"进度(百分比)"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{percentage:100*e.row.schedule}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"240","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"",icon:"el-icon-circle-plus",size:"mini"},on:{click:function(a){e.add(t.row)}}},[e._v("添加")]),a("el-button",{attrs:{type:"",icon:"el-icon-view",size:"mini"},on:{click:function(a){e.check(t.row)}}},[e._v("查看")])]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-col",{attrs:{span:12,offset:0}}),a("el-col",{attrs:{span:8,offset:4}},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)]),a("el-dialog",{attrs:{title:"添加节点",visible:e.addDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"时间段","label-width":e.formLabelWidth,prop:"date"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.addForm.date,callback:function(t){e.$set(e.addForm,"date",t)},expression:"addForm.date"}})],1),a("el-form-item",{attrs:{label:"项目集资","label-width":e.formLabelWidth,prop:"payMoney"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入金额"},model:{value:e.addForm.payMoney,callback:function(t){e.$set(e.addForm,"payMoney",t)},expression:"addForm.payMoney"}},[a("template",{slot:"append"},[e._v("万元")])],2)],1),a("el-form-item",{attrs:{label:"评估进度","label-width":e.formLabelWidth,prop:"schedule"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入进度值(0~1的小数)"},model:{value:e.addForm.schedule,callback:function(t){e.$set(e.addForm,"schedule",t)},expression:"addForm.schedule"}})],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"附件","label-width":e.formLabelWidth}},[a("el-upload",{staticClass:"upload-demo",attrs:{"before-upload":e.beforeUpload,action:e.common.basePath+"/file/-1/uplode",headers:e.myHeaders,"auto-upload":!0,multiple:"",limit:1,"on-success":e.uploadSuccessFile,"on-error":e.uploadErrorFile}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传文件")]),a("span",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"10px"},attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetForm("addForm")}}},[e._v("重置")]),a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sure("addForm")}}},[e._v("确 定")])],1)],1)],1)},Po=[],$o={filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")}},methods:{UploadUrl:function(){return this.common.basePath+"/file/"+JSON.parse(sessionStorage.getItem("addPointId"))+"/uplode"},add:function(e){sessionStorage.setItem("addPointId",e.id),this.addDialogVisible=!0},check:function(e){sessionStorage.setItem("addCheckPointId",e.id),this.$router.push({name:"ReportDetail"})},sure:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.warning("信息未填写完整！！！",60),!1;t.postAdd()})},indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList(),this.getKeyList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList(),this.getKeyList()},getKeyList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/checkpoint/point"),this._listKeyParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_listKeyParams:function(){return{params:{projectId:"",keyWords:this.key,pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}}},getList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/checkpoint/point"),this._listParams()).then(function(t){0===t.data.meta.code?(e.tableData=t.data.data,e.restaurants=t.data.data.rows):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_listParams:function(){return{params:{projectId:"",pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}}},postAdd:function(){var e=this,t={attachment:JSON.stringify(this.addForm.attachment),beginTime:this.addForm.date[0],endTime:this.addForm.date[1],payMoney:this.addForm.payMoney,projectId:sessionStorage.getItem("addPointId"),schedule:this.addForm.schedule};""!=this.addForm.attachment?this.axios.post("".concat(this.common.basePath,"/checkpoint/point"),t).then(function(t){0===t.data.meta.code?(e.addDialogVisible=!1,e.getList(),e.getKeyList()):e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t,20)}):this.$message.error("未上传附件!!!",60)},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;return t||a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),t||a},uploadSuccessFile:function(e){this.addForm.attachment=e.data},uploadErrorFile:function(e,t,a){this.$message.error("上传失败!!",20),this.addForm.attachment=[]},querySearchAsync:function(e,t){var a=this.restaurants,s=e?a.filter(this.createStateFilter(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(s)},3e3*Math.random())},createStateFilter:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.key=e.name,this.getKeyList()}},mounted:function(){this.getList()},data:function(){return{addDialogVisible:!1,formLabelWidth:"120px",addForm:{attachment:"",payMoney:"",schedule:"",date:""},rules:{payMoney:[{required:!0,message:"请输入集资金额",trigger:"blur"}],date:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],schedule:[{required:!0,message:"请输入进度值",trigger:"blur"}]},myHeaders:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},state:"",timeout:null,restaurants:[],key:""}}},No=$o,Io=(a("ea54"),Object(u["a"])(No,Do,Po,!1,null,null,null));Io.options.__file="List.vue";var jo=Io.exports,To=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目进度")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("项目进度汇报详情")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}}),a("el-col",{attrs:{span:12,offset:0}})],1)],1),a("div",{staticClass:"body-content"},[a("ul",{staticClass:"content"},[a("h4",{staticClass:"block-depart-title"},[e._v("基本信息")]),a("li",[a("span",{staticClass:"item fl"},[e._v("项目名称：")]),a("span",{staticClass:"fl"},[e._v(e._s(e.detail.name))])]),a("li",[a("span",{staticClass:"item fl"},[e._v("创建日期：")]),a("span",{staticClass:"fl"},[e._v(e._s(e._f("formatDate")(e.detail.createTime)))])]),a("li",[a("span",{staticClass:"item fl"},[e._v("负责人：")]),a("span",{staticClass:"fl"},[e._v(e._s(e.detail.orgName))])]),a("li",[a("span",{staticClass:"item fl"},[e._v("项目集资：")]),a("span",{staticClass:"fl"},[e._v(e._s(e.detail.payMoney))]),a("span",{staticClass:"fl"},[e._v("/万元")])]),a("li",[a("span",{staticClass:"item fl"},[e._v("总进度：")]),a("span",{staticClass:"fl"},[e._v(e._s(100*e.detail.schedule+"%"))])]),a("h4",{staticClass:"block-depart-title"},[e._v("节点展示")]),e._l(e.detail.checkPoint,function(t,s){return a("ul",{staticClass:"point-box"},[a("p",[e._v(e._s("节点 "+(s+1)))]),a("li",[a("span",{staticClass:"item fl"},[e._v("时间段：")]),a("span",{staticClass:"fl"},[e._v(e._s(e._f("formatDate")(t.beginTime)))]),a("span",{staticClass:"fl"},[e._v(" 至 ")]),a("span",{staticClass:"fl"},[e._v(e._s(e._f("formatDate")(t.endTime)))])]),a("li",[a("span",{staticClass:"item fl"},[e._v("创建日期：")]),a("span",{staticClass:"fl"},[e._v(e._s(e._f("formatDate")(t.createTime)))])]),a("li",[a("span",{staticClass:"item fl"},[e._v("创建者：")]),a("span",{staticClass:"fl"},[e._v(e._s(t.creator))])]),a("li",[a("span",{staticClass:"item fl"},[e._v("项目集资：")]),a("span",{staticClass:"fl"},[e._v(e._s(t.payMoney))]),a("span",{staticClass:"fl"},[e._v(" /万元")])]),a("li",{staticClass:"schedule-h"},[a("span",{staticClass:"fl item"},[e._v("项目进度：")]),a("el-progress",{staticClass:"fl",attrs:{percentage:100*t.schedule,"stroke-width":5,type:"circle"}})],1),a("li",[a("span",{staticClass:"item fl"},[e._v("项目附件：")]),a("a",{staticClass:"fl",attrs:{href:JSON.parse(t.attachment).path,target:"view_window"}},[e._v(e._s(JSON.parse(t.attachment).name))])])])})],2)])])])])},Ao=[],zo={data:function(){return{id:sessionStorage.getItem("addCheckPointId"),detail:{}}},filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")}},methods:{getDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/checkpoint/point/").concat(this.id),this._detailParams()).then(function(t){0===t.data.meta.code?e.detail=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_detailParams:function(){return{params:{projectId:sessionStorage.getItem("addCheckPointId")}}}},mounted:function(){this.getDetail()}},Bo=zo,Lo=(a("cf5c"),Object(u["a"])(Bo,To,Ao,!1,null,null,null));Lo.options.__file="Detail.vue";var Oo=Lo.exports,Vo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("项目进度")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("项目进度监督")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}}),a("el-col",{attrs:{span:12,offset:0}})],1)],1),a("div",{staticClass:"body-content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:"",border:""}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"50"}}),a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"createTime",label:"日期",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(e._f("formatDate")(t.row.createTime))+"\n\t\t\t\t\t\t\t\t\t\t")])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"240"}}),a("el-table-column",{attrs:{prop:"orgName",label:"负责人",width:"150"}}),a("el-table-column",{attrs:{prop:"payMoney",label:"项目集资(万元)",width:"240"}}),a("el-table-column",{attrs:{label:"进度(百分比)"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-progress",{attrs:{percentage:100*e.row.schedule}})]}}])})],1)],1)],1)],1)]),a("div",{staticClass:"block-bottom"},[a("el-col",{attrs:{span:12,offset:0}}),a("el-col",{attrs:{span:8,offset:4}},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)])])},Eo=[],Mo={filters:{formatDate:function(e){var t=new Date(e);return kt(t,"yyyy-MM-dd")}},methods:{indexMethod:function(e){return 1*(e+1)},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getList()},getList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/checkpoint/point/all"),this._acceptanceListParams()).then(function(t){0===t.data.meta.code?e.tableData=t.data.data:e.$message.error(t.data.meta.message,20)}).catch(function(t){e.$message.error(t)})},_acceptanceListParams:function(){return{params:{projectId:"",pageSize:this.elementPageData.pageSize,pageNum:this.elementPageData.pageNum}}}},mounted:function(){this.getList()},data:function(){return{elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},currentPage:1}}},Ro=Mo,Jo=(a("9795"),Object(u["a"])(Ro,Vo,Eo,!1,null,null,null));Jo.options.__file="Supervise.vue";var Uo=Jo.exports,qo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Qo=[],Ho={},Ko=Ho,Wo=Object(u["a"])(Ko,qo,Qo,!1,null,null,null);Wo.options.__file="Index.vue";var Go=Wo.exports,Xo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("h2",{staticClass:"page-title"},[e._v("新增项目")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("项目信息表单")]),a("div",{staticClass:"block-body"},[a("el-form",{ref:"projectForm",attrs:{model:e.projectForm,rules:e.rules,"label-width":"150px",size:"middle"}},[a("el-row",{attrs:{gutter:0}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-vcard-o title-icon"}),e._v("基本信息")]),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目名称：",prop:"name"}},[a("el-input",{model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,"name",t)},expression:"projectForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预算负责人：",prop:"budget_leader"}},[a("el-input",{model:{value:e.projectForm.budget_leader,callback:function(t){e.$set(e.projectForm,"budget_leader",t)},expression:"projectForm.budget_leader"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预算联系人：",prop:"linkman"}},[a("el-input",{model:{value:e.projectForm.linkman,callback:function(t){e.$set(e.projectForm,"linkman",t)},expression:"projectForm.linkman "}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话：",prop:"cellphone"}},[a("el-input",{attrs:{type:"number"},model:{value:e.projectForm.cellphone,callback:function(t){e.$set(e.projectForm,"cellphone",t)},expression:"projectForm.cellphone"}})],1)],1)],1),a("el-row",{attrs:{gutter:0}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-database title-icon"}),e._v("预算信息")]),a("el-col",{attrs:{span:12}}),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预算单位：",prop:"budget_user"}},[a("el-select",{staticClass:"fill-width",model:{value:e.projectForm.budget_user,callback:function(t){e.$set(e.projectForm,"budget_user",t)},expression:"projectForm.budget_user"}},e._l(e.userList,function(e,t){return a("el-option",{key:"用户列表"+t,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"项目总预算：",prop:"total"}},[a("el-input-number",{staticClass:"fill-width",attrs:{precision:2,step:.1,"controls-position":"right",min:0},model:{value:e.projectForm.total,callback:function(t){e.$set(e.projectForm,"total",t)},expression:"projectForm.total"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请财政资金金额：",prop:"application_money"}},[a("el-input-number",{staticClass:"fill-width",attrs:{precision:2,step:.1,"controls-position":"right",min:0},model:{value:e.projectForm.application_money,callback:function(t){e.$set(e.projectForm,"application_money",t)},expression:"projectForm.application_money"}})],1),a("el-form-item",{attrs:{label:"自筹金额：",prop:"raise_money"}},[a("el-input-number",{staticClass:"fill-width",attrs:{precision:2,step:.1,"controls-position":"right",min:0},model:{value:e.projectForm.raise_money,callback:function(t){e.$set(e.projectForm,"raise_money",t)},expression:"projectForm.raise_money"}})],1)],1)],1),a("el-row",{attrs:{gutter:0}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-list-alt title-icon"}),e._v("立项情况")]),a("el-form-item",{attrs:{label:"预算依据："}},[a("el-upload",{attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,multiple:"",limit:99,"on-success":e.uploadBasisSuccess,"file-list":e.fileBasis}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),a("el-form-item",{attrs:{label:"可行性说明："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.projectForm.feasibility_statement,callback:function(t){e.$set(e.projectForm,"feasibility_statement",t)},expression:"projectForm.feasibility_statement"}})],1),a("el-form-item",{attrs:{label:"必要性说明："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.projectForm.necessity_statement,callback:function(t){e.$set(e.projectForm,"necessity_statement",t)},expression:"projectForm.necessity_statement "}})],1),a("el-form-item",{attrs:{label:"绩效目标："}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.projectForm.target,callback:function(t){e.$set(e.projectForm,"target",t)},expression:"projectForm.target"}})],1)],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:12}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-book title-icon"}),e._v("实施计划")]),a("el-form-item",{attrs:{label:"起止日期：",prop:"plan_begin_time"}},[a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期","value-format":"timestamp"},model:{value:e.projectForm.dateRange,callback:function(t){e.$set(e.projectForm,"dateRange",t)},expression:"projectForm.dateRange"}})],1),a("el-form-item",{attrs:{label:"实施方案："}},[a("el-upload",{attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,multiple:"",limit:99,"on-success":e.uploadPlanSuccess,"file-list":e.filePlan}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-file title-icon"}),e._v("备注说明")]),a("el-form-item",{attrs:{label:"附件材料："}},[a("el-upload",{attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,multiple:"",limit:3,"on-success":e.uploadAttachmentSuccess,"file-list":e.fileAttachment}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1),a("div",{staticClass:"text-center"},[a("el-button",{attrs:{size:"middle",type:"primary"},on:{click:function(t){e.submitForm("projectForm")}}},[e._v("提交")]),a("el-button",{attrs:{size:"middle"},on:{click:function(t){e.resetForm("projectForm")}}},[e._v("重置")])],1)],1)],1)])])},Yo=[],Zo={data:function(){return{formLoading:!1,userList:[],industryTree:[],treeProps:{label:"name",children:"childrens"},token:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},projectForm:{additional:"",budget_user:null,cellphone:null,create_basis:"",creator:JSON.parse(sessionStorage.getItem("userData")).id,cur_status:1,feasibility_statement:null,implementation:"",name:null,necessity_statement:null,dateRange:[],plan_begin_time:null,plan_end_time:null,profession:null,raise_money:null,application_money:null,total:null,target:null},fileBasis:[],filePlan:[],fileAttachment:[],rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择预算单位",trigger:"change"}],subject:[{required:!0,message:"请选择预算科目",trigger:"change"}],profession:[{required:!0,message:"请选择行业",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],budget_user:[{required:!0,message:"请选择预算单位",trigger:"change"}]}}},mounted:function(){var e=this;window.c=this,this.formLoading=!0,this.common.getDictionaryData(2).then(function(t){e.industryTree=t,e.formLoading=!1}),this.getUserListData()},methods:{getUserListData:function(){var e=this,t=this;this.formLoading=!0;var a={method:"post",url:"".concat(t.common.basePath,"/hr_users/user/list"),data:{id:6}};t.axios(a).then(function(a){t.userList=a.data.data,e.formLoading=!1}).catch(function(a){t.$message.error(a),e.formLoading=!1})},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.projectForm.profession=r.join(",")},submitForm:function(e){var t=this,a=this;a.$confirm("确定提交吗?","确认提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(s){a.$refs[e].validate(function(s){if(!s)return a.$message.error("请检查表单是否填写正确"),!1;var r={method:"post",url:"".concat(a.common.basePath,"/budget"),data:a[e]};t.handleForm(e),a.axios(r).then(function(e){a.$router.push({name:"ProjectManagement"}),a.$message.success(e.data.meta.message)}).catch(function(e){a.$message.error(e)})})})},handleForm:function(e){this[e].dateRange&&this[e].dateRange.length>0&&(this[e].plan_begin_time=this[e].dateRange[0],this[e].plan_end_time=this[e].dateRange[1]),this[e].create_basis=JSON.stringify(this.fileBasis),this[e].implementation=JSON.stringify(this.filePlan),this[e].additional=JSON.stringify(this.fileAttachment),delete this[e].dateRange},resetForm:function(e){this.$refs[e].resetFields()},getFileList:function(e){var t=JSON.parse(JSON.stringify(e));return t.map(function(e,t){return e.response?{name:e.name,path:e.response.data.path,url:e.url}:e})},uploadBasisSuccess:function(e,t,a){this.fileBasis=this.getFileList(a)},uploadPlanSuccess:function(e,t,a){this.filePlan=this.getFileList(a)},uploadAttachmentSuccess:function(e,t,a){this.fileAttachment=this.getFileList(a)}}},en=Zo,tn=Object(u["a"])(en,Xo,Yo,!1,null,null,null);tn.options.__file="Add.vue";var an=tn.exports,sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("h2",{staticClass:"page-title"},[e._v("\n    "+e._s("view"==e.mode?"项目详情":"编辑项目")+"\n  ")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v(e._s("view"==e.mode?"项目信息":"项目信息表单"))]),a("div",{staticClass:"block-body"},[a("el-form",{ref:"projectForm",class:"view"==e.mode?"show-form":"",attrs:{model:e.projectForm,rules:e.rules,"label-width":"view"==e.mode?null:"150px",size:"middle"}},[a("el-row",{attrs:{gutter:0}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-vcard-o title-icon"}),e._v("基本信息")]),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目名称：",prop:"name"}},["edit"==e.mode?a("el-input",{model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,"name",t)},expression:"projectForm.name"}}):a("span",[e._v(e._s(e.projectForm.name))])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预算负责人：",prop:"budget_leader"}},["edit"==e.mode?a("el-input",{model:{value:e.projectForm.budget_leader,callback:function(t){e.$set(e.projectForm,"budget_leader",t)},expression:"projectForm.budget_leader"}}):a("span",[e._v(e._s(e.projectForm.budget_leader))])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预算联系人：",prop:"linkman"}},["edit"==e.mode?a("el-input",{model:{value:e.projectForm.linkman,callback:function(t){e.$set(e.projectForm,"linkman",t)},expression:"projectForm.linkman "}}):a("span",[e._v(e._s(e.projectForm.linkman))])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话：",prop:"cellphone"}},["edit"==e.mode?a("el-input",{model:{value:e.projectForm.cellphone,callback:function(t){e.$set(e.projectForm,"cellphone",t)},expression:"projectForm.cellphone"}}):a("span",[e._v(e._s(e.projectForm.cellphone))])],1)],1)],1),a("el-row",{attrs:{gutter:0}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-database title-icon"}),e._v("预算信息")]),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预算单位：",prop:"budget_user"}},["edit"==e.mode?a("el-select",{staticClass:"fill-width",model:{value:e.projectForm.budget_user,callback:function(t){e.$set(e.projectForm,"budget_user",t)},expression:"projectForm.budget_user"}},e._l(e.userList,function(e,t){return a("el-option",{key:"用户列表"+t,attrs:{label:e.name,value:e.id}})})):a("span",[e._v(e._s(e.projectForm.budget_user_name))])],1),a("el-form-item",{attrs:{label:"项目总预算：",prop:"total"}},["edit"==e.mode?a("el-input-number",{staticClass:"fill-width",attrs:{precision:2,step:.1,"controls-position":"right",min:0},model:{value:e.projectForm.total,callback:function(t){e.$set(e.projectForm,"total",t)},expression:"projectForm.total"}}):a("span",[e._v(e._s(e.projectForm.total))])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请财政资金金额：",prop:"application_money"}},["edit"==e.mode?a("el-input-number",{staticClass:"fill-width",attrs:{precision:2,step:.1,"controls-position":"right",min:0},model:{value:e.projectForm.application_money,callback:function(t){e.$set(e.projectForm,"application_money",t)},expression:"projectForm.application_money"}}):a("span",[e._v(e._s(e.projectForm.application_money))])],1),a("el-form-item",{attrs:{label:"自筹金额：",prop:"raise_money"}},["edit"==e.mode?a("el-input-number",{staticClass:"fill-width",attrs:{precision:2,step:.1,"controls-position":"right",min:0},model:{value:e.projectForm.raise_money,callback:function(t){e.$set(e.projectForm,"raise_money",t)},expression:"projectForm.raise_money"}}):a("span",[e._v(e._s(e.projectForm.raise_money))])],1)],1)],1),a("el-row",{attrs:{gutter:0}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-list-alt title-icon"}),e._v("立项情况")]),a("el-form-item",{attrs:{label:"预算依据："}},["edit"==e.mode?a("el-upload",{attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,multiple:"",limit:99,"on-success":e.uploadBasisSuccess,"file-list":e.fileBasis}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1):a("file-list",{attrs:{fileList:e.fileBasis}})],1),a("el-form-item",{attrs:{label:"可行性说明："}},["edit"==e.mode?a("el-input",{attrs:{type:"textarea"},model:{value:e.projectForm.feasibility_statement,callback:function(t){e.$set(e.projectForm,"feasibility_statement",t)},expression:"projectForm.feasibility_statement"}}):a("span",[e._v(e._s(e.projectForm.feasibility_statement))])],1),a("el-form-item",{attrs:{label:"必要性说明："}},["edit"==e.mode?a("el-input",{attrs:{type:"textarea"},model:{value:e.projectForm.necessity_statement,callback:function(t){e.$set(e.projectForm,"necessity_statement",t)},expression:"projectForm.necessity_statement "}}):a("span",[e._v(e._s(e.projectForm.necessity_statement))])],1),a("el-form-item",{attrs:{label:"绩效目标："}},["edit"==e.mode?a("el-input",{attrs:{type:"textarea"},model:{value:e.projectForm.target,callback:function(t){e.$set(e.projectForm,"target",t)},expression:"projectForm.target"}}):a("span",[e._v(e._s(e.projectForm.target))])],1)],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:12}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-book title-icon"}),e._v("实施计划")]),a("el-form-item",{attrs:{label:"起止日期：",prop:"plan_begin_time"}},["edit"==e.mode?a("el-date-picker",{attrs:{type:"daterange",placeholder:"选择日期","value-format":"timestamp"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}):a("span",[e.projectForm.plan_begin_time?a("span",[e._v(e._s(e.common._convertDate(e.projectForm.plan_begin_time,"yyyy年MM月dd"))+"  至  "+e._s(e.common._convertDate(e.projectForm.plan_end_time,"yyyy年MM月dd")))]):a("span")])],1),a("el-form-item",{attrs:{label:"实施方案："}},["edit"==e.mode?a("el-upload",{attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,multiple:"",limit:99,"on-success":e.uploadPlanSuccess,"file-list":e.filePlan}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1):a("file-list",{attrs:{fileList:e.filePlan}})],1)],1),a("el-col",{attrs:{span:12}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-file title-icon"}),e._v("备注说明")]),a("el-form-item",{attrs:{label:"附件材料："}},["edit"==e.mode?a("el-upload",{attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,multiple:"",limit:3,"on-success":e.uploadAttachmentSuccess,"file-list":e.fileAttachment}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1):a("file-list",{attrs:{fileList:e.fileAttachment}})],1)],1)],1),"edit"==e.mode?a("div",{staticClass:"text-center"},[a("el-button",{attrs:{size:"middle",type:"primary"},on:{click:function(t){e.submitForm("projectForm")}}},[e._v("提交")]),a("el-button",{attrs:{size:"middle"},on:{click:function(t){e.resetForm("projectForm")}}},[e._v("重置")])],1):e._e()],1)],1)])])},rn=[],on={data:function(){return{formLoading:!1,viewMode:"detail",userList:[],industryTree:[],treeProps:{label:"name",children:"childrens"},token:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},projectForm:{additional:"",budget_user:null,cellphone:null,create_basis:"",creator:JSON.parse(sessionStorage.getItem("userData")).id,cur_status:1,feasibility_statement:null,implementation:"",name:null,necessity_statement:null,plan_begin_time:null,plan_end_time:null,profession:null,professionArray:[],raise_money:null,application_money:null,total:null,target:null},dateRange:[],fileBasis:[],filePlan:[],fileAttachment:[],rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择预算单位",trigger:"change"}],subject:[{required:!0,message:"请选择预算科目",trigger:"change"}],profession:[{required:!0,message:"请选择行业",trigger:"change"}],budget_user:[{required:!0,message:"请选择预算单位",trigger:"change"}]}}},props:{mode:{type:String},id:{type:Number}},components:{"file-list":Sa},watch:{dateRange:{handler:function(e,t){this.$refs.projectForm.validateField("plan_begin_time")},deep:!0},mode:{handler:function(e,t){this.init()},deep:!0},id:{handler:function(e,t){console.log(e)},deep:!0}},mounted:function(){this.init()},methods:{init:function(){this.formLoading=!0,this.getDetailData(),"detail"==this.viewMode&&this.getUserListData()},getDetailData:function(){var e=this;e.formLoading=!0;var t={method:"get",url:"".concat(e.common.basePath,"/budget/").concat(this.id)};e.axios(t).then(function(t){e.projectForm=t.data.data,e.dateRange=[e.projectForm.plan_begin_time,e.projectForm.plan_end_time],e.fileBasis=JSON.parse(t.data.data.create_basis)||[],e.filePlan=JSON.parse(t.data.data.implementation)||[],e.fileAttachment=JSON.parse(t.data.data.additional)||[],e.formLoading=!1}).catch(function(t){e.$message.error(t),e.formLoading=!1})},getUserListData:function(){var e=this,t=this;this.formLoading=!0;var a={method:"post",url:"".concat(t.common.basePath,"/hr_users/user/list"),data:{id:6}};t.axios(a).then(function(a){t.userList=a.data.data,e.formLoading=!1}).catch(function(a){t.$message.error(a),e.formLoading=!1})},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.projectForm.profession=r.join(",")},submitForm:function(e){var t=this,a=this;a.$confirm("确定提交吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(s){a.$refs[e].validate(function(s){if(!s)return a.$message.error("请检查表单是否填写正确"),!1;var r={method:"patch",url:"".concat(a.common.basePath,"/budget/").concat(a.id),data:a[e]};t.handleForm(e),a.axios(r).then(function(e){a.$emit("submitSuccess"),a.$message.success(e.data.meta.message)}).catch(function(e){a.$message.error(e)})})})},handleForm:function(e){this.dateRange.length>0&&(this[e].plan_begin_time=this.dateRange[0],this[e].plan_end_time=this.dateRange[1]),this[e].create_basis=JSON.stringify(this.fileBasis),this[e].implementation=JSON.stringify(this.filePlan),this[e].additional=JSON.stringify(this.fileAttachment)},resetForm:function(e){this.$refs[e].resetFields()},getFileList:function(e){var t=JSON.parse(JSON.stringify(e));return t.map(function(e,t){return e.response?{name:e.name,path:e.response.data.path,url:e.url}:e})},uploadBasisSuccess:function(e,t,a){this.fileBasis=this.getFileList(a)},uploadPlanSuccess:function(e,t,a){this.filePlan=this.getFileList(a)},uploadAttachmentSuccess:function(e,t,a){this.fileAttachment=this.getFileList(a)}}},nn=on,ln=Object(u["a"])(nn,sn,rn,!1,null,null,null);ln.options.__file="Detail.vue";var cn=ln.exports,un=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"project-management"}},[e.detailVisible?a("el-button",{staticClass:"back-button",attrs:{type:"primary",icon:"el-icon-back",size:"middle"},on:{click:function(t){e.detailVisible=!1}}},[e._v("返回")]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailVisible,expression:"!detailVisible"}]},[a("h2",{staticClass:"page-title"},[e._v("项目管理")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("项目列表")]),a("div",{staticClass:"block-body"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"row-click":e.tableRowClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,"class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"name",label:"项目名","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"profession",label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e.common._convertDate(t.row.create_time,"yyyy年MM月dd日"))+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"total",label:"总预算"}}),a("el-table-column",{attrs:{prop:"profession",label:"计划开始日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e.common._convertDate(t.row.plan_begin_time,"yyyy年MM月dd日"))+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"profession",label:"计划结束日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e.common._convertDate(t.row.plan_end_time,"yyyy年MM月dd日"))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"280","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-center"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.tableItemClick("view",t.row.id)}}},[a("i",{staticClass:"fa fa-eye fa-in-button"}),e._v("查看")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.tableItemClick("edit",t.row.id)}}},[a("i",{staticClass:"fa fa-edit fa-in-button"}),e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){a.stopPropagation(),e.deleteItem(t.row.id)}}},[e._v("删除")])],1)]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":e.currentPerPage,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])]),e.detailVisible?a("detail",{attrs:{mode:e.mode,id:e.itemId},on:{submitSuccess:e.afterSubmit}}):e._e()],1)},mn=[],dn={data:function(){return{loading:!1,tableData:[],multipleSelection:[],currentPage:1,currentPerPage:10,total:0,industryTree:[],treeProps:{label:"name",children:"childrens"},detailVisible:!1,mode:"view",itemId:null}},components:{detail:cn},watch:{editDialogVisible:{handler:function(e,t){e||e==t||this.resetForm("expertForm")},deep:!0}},mounted:function(){var e=this;e.getTableListData()},methods:{indexMethod:function(e){return e+1+(this.currentPage-1)*this.currentPerPage},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.currentPerPage=e,this.getTableListData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableListData()},getTableListData:function(){var e=this;this.loading=!0;var t={method:"get",url:"".concat(this.common.basePath,"/budget"),params:{pageNum:this.currentPage,pageSize:this.currentPerPage}};this.axios(t).then(function(t){e.tableData=t.data.data.rows,e.total=t.data.data.total,e.loading=!1}).catch(function(t){e.$message.error(t),e.loading=!1})},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.expertForm.profession=r.join(",")},tableRowClick:function(e,t,a){this.mode="view",this.itemId=e.id,this.detailVisible=!0,document.getElementsByClassName("content-wrap")[0].scrollTo(0,0)},tableItemClick:function(e,t){this.mode=e,this.itemId=t,this.detailVisible=!0,document.getElementsByClassName("content-wrap")[0].scrollTo(0,0)},afterSubmit:function(){this.getTableListData(),this.detailVisible=!1},deleteItem:function(e){var t=this,a={method:"patch",url:"".concat(t.common.basePath,"/budget/delete/").concat(e),data:{}};t.$confirm("删除后需要重新添加","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.getTableListData()}).catch(function(e){t.$message.error(e)})})},resetForm:function(e){this.$refs[e].resetFields()}}},pn=dn,hn=Object(u["a"])(pn,un,mn,!1,null,null,null);hn.options.__file="Management.vue";var fn=hn.exports,gn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.detailVisible?a("el-button",{staticClass:"back-button",attrs:{type:"primary",icon:"el-icon-back",size:"middle"},on:{click:function(t){e.detailVisible=!1}}},[e._v("返回")]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailVisible,expression:"!detailVisible"}]},[a("h2",{staticClass:"page-title"},[e._v("项目查询")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("项目列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-form",{ref:"searchForm",staticClass:"padt10",attrs:{model:e.searchForm,size:"middle","label-width":"100px",inline:""}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入项目名"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getTableListData("manual")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("el-row",{staticClass:"body-content"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,width:"60",label:"序号",fixed:"left","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"name",label:"项目名","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"profession",label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e.common._convertDate(t.row.create_time,"yyyy年MM月dd日"))+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"total",label:"总预算"}}),a("el-table-column",{attrs:{prop:"profession",label:"计划开始日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e.common._convertDate(t.row.plan_begin_time,"yyyy年MM月dd日"))+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"profession",label:"计划结束日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e.common._convertDate(t.row.plan_end_time,"yyyy年MM月dd日"))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-center"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.tableItemClick("view",t.row.id)}}},[a("i",{staticClass:"fa fa-eye fa-in-button"}),e._v("查看\n                    ")])],1)]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":e.currentPerPage,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])]),e.detailVisible?a("detail",{attrs:{mode:e.mode,id:e.itemId}}):e._e()],1)},bn=[],vn={data:function(){return{loading:!1,tableData:[],multipleSelection:[],currentPage:1,currentPerPage:10,total:0,searchForm:{name:null},detailVisible:!1,mode:"view",itemId:null,industryTree:[],treeProps:{label:"name",children:"childrens"}}},components:{detail:cn},watch:{editDialogVisible:{handler:function(e,t){e||e==t||this.resetForm("expertForm")},deep:!0}},mounted:function(){var e=this;e.common.getDictionaryData(2).then(function(t){e.industryTree=t}),e.getTableListData()},methods:{indexMethod:function(e){return e+1+(this.currentPage-1)*this.currentPerPage},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.currentPerPage=e,this.getTableListData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableListData()},getTableListData:function(e){var t=this;this.loading=!0,"manual"==e&&(this.currentPage=1),this.searchForm.pageNum=this.currentPage,this.searchForm.pageSize=this.currentPerPage;var a={method:"get",url:"".concat(this.common.basePath,"/budget"),params:this.searchForm};this.axios(a).then(function(e){t.tableData=e.data.data.rows,t.total=e.data.data.total,t.loading=!1}).catch(function(e){self.$message.error(e),t.loading=!1})},resetSearchForm:function(){this.$refs.searchForm.resetFields()},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.expertForm.profession=r.join(",")},validateAccount:function(){var e=this,t={method:"get",url:"".concat(this.common.basePath,"/hr_users/judge"),params:{account:this.expertForm.account}},a=new Promise(function(a,s){e.axios(t).then(function(e){a("success")}).catch(function(e){s(e)})});return a},tableItemClick:function(e,t){this.mode=e,this.itemId=t,this.detailVisible=!0,document.getElementsByClassName("content-wrap")[0].scrollTo(0,0)},getDetail:function(e){var t=this,a={method:"get",url:"".concat(t.common.basePath,"/hr_users/details"),params:{id:e}};t.axios(a).then(function(e){t.expertForm=e.data.data,t.$nextTick(function(){t.$refs.expertForm.clearValidate()});var a=t.expertForm.professiones.map(function(e){return e.id});t.$refs.industryTree.setCheckedKeys(a),t.expertForm.profession=a.join(",")}).catch(function(e){t.$message.error("获取详情失败"),t.editDialogVisible=!1})},submitForm:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;var a={method:"patch",url:"".concat(t.common.basePath,"/hr_users/user/update/").concat(t.expertForm.id),data:t.expertForm};t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.editDialogVisible=!1,t.getTableListData()}).catch(function(e){t.$message.error(e)})})},deleteItem:function(e){var t=this,a={method:"patch",url:"".concat(t.common.basePath,"/budget/delete/").concat(e),data:{}};t.$confirm("删除后需要重新添加","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.getTableListData()}).catch(function(e){t.$message.error(e)})})},resetForm:function(e){this.$refs[e].resetFields()}}},_n=vn,yn=Object(u["a"])(_n,gn,bn,!1,null,null,null);yn.options.__file="Query.vue";var wn=yn.exports,xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Cn=[],Fn={},kn=Fn,Sn=Object(u["a"])(kn,xn,Cn,!1,null,null,null);Sn.options.__file="Index.vue";var Dn=Sn.exports,Pn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("新增专家")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("专家信息表单")]),a("div",{staticClass:"block-body"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"expertForm",attrs:{model:e.expertForm,rules:e.rules,"label-width":"150px",size:"middle"}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-vcard-o title-icon"}),e._v("基本信息")]),a("el-form-item",{attrs:{label:"头像：",prop:"picture"}},[a("el-upload",{staticClass:"upload-picture",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,"show-file-list":!1,"before-upload":e.beforeUpload,"on-success":e.uploadSuccess,name:"file"}},[e.expertForm.picture?a("img",{staticClass:"avatar",attrs:{src:e.common.picsBasePath+"/"+e.expertForm.picture}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"账号：",prop:"account"}},[a("el-input",{on:{blur:e.validateAccount},model:{value:e.expertForm.account,callback:function(t){e.$set(e.expertForm,"account",t)},expression:"expertForm.account"}})],1),a("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[a("el-input",{model:{value:e.expertForm.name,callback:function(t){e.$set(e.expertForm,"name",t)},expression:"expertForm.name"}})],1),a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{model:{value:e.expertForm.password,callback:function(t){e.$set(e.expertForm,"password",t)},expression:"expertForm.password"}})],1),a("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{model:{value:e.expertForm.email,callback:function(t){e.$set(e.expertForm,"email",t)},expression:"expertForm.email"}})],1),a("el-form-item",{attrs:{label:"手机：",prop:"phoneNum"}},[a("el-input-number",{staticClass:"fill-width text-left",attrs:{min:0,controls:!1},model:{value:e.expertForm.phoneNum,callback:function(t){e.$set(e.expertForm,"phoneNum",t)},expression:"expertForm.phoneNum"}})],1),a("el-form-item",{attrs:{label:"行业：",prop:"profession"}},[a("el-tree",{ref:"industryTree",attrs:{data:e.industryTree,props:e.treeProps,"show-checkbox":"",accordion:""},on:{"check-change":e.handleCheckChange}})],1),a("el-form-item",{attrs:{label:"工作单位：",prop:"workUnit"}},[a("el-input",{model:{value:e.expertForm.workUnit,callback:function(t){e.$set(e.expertForm,"workUnit",t)},expression:"expertForm.workUnit"}})],1),a("el-form-item",{attrs:{label:"职称：",prop:"technicalTitle"}},[a("el-input",{model:{value:e.expertForm.technicalTitle,callback:function(t){e.$set(e.expertForm,"technicalTitle",t)},expression:"expertForm.technicalTitle"}})],1),a("el-form-item",{attrs:{label:"是否常用：",prop:"commUsed"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":2},model:{value:e.expertForm.commUsed,callback:function(t){e.$set(e.expertForm,"commUsed",t)},expression:"expertForm.commUsed"}})],1),a("div",{staticClass:"text-center"},[a("el-button",{attrs:{type:"primary",size:"normal"},on:{click:function(t){e.submitForm("expertForm")}}},[e._v("提交")]),a("el-button",{attrs:{type:"default",size:"normal"},on:{click:function(t){e.resetForm("expertForm")}}},[e._v("重置")])],1)],1)],1)])])},$n=[],Nn={data:function(){var e=this,t=function(t,a,s){if(!a)return s(new Error("账号不能为空"));e.validateAccount().then(function(){s()}).catch(function(e){s(new Error(e))})},a=function(t,a,s){return a?e.common.emailReg.test(a)?s():s(new Error("请输入正确的邮箱")):s(new Error("请输入邮箱"))},s=function(t,a,s){return a?e.common.mobileReg.test(a)?s():s(new Error("请输入正确的手机号码")):s(new Error("请输入手机号码"))};return{formLoading:!1,expertForm:{account:null,profession:null,picture:"",commUsed:1},token:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},rules:{account:[{required:!0,message:"请输入账号",trigger:"change"},{validator:t,trigger:"change"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"change"}],profession:[{required:!0,message:"请选择对应行业",trigger:"change"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:a,trigger:"blur"}],phoneNum:[{required:!0,message:"请输入手机",trigger:"blur"},{validator:s,trigger:"blur"}]},industryTree:[],treeProps:{label:"name",children:"childrens"}}},watch:{"expertForm.account":{handler:function(e,t){},deep:!0}},mounted:function(){var e=this;this.common.getDictionaryData(2).then(function(t){e.industryTree=t})},methods:{getDictionaryData:function(e,t){var a=this,s={method:"get",url:"".concat(this.common.basePath,"/contrast/all/tree"),params:{typeId:e}};this.axios(s).then(function(e){var s=JSON.parse(JSON.stringify(e.data.data));s.forEach(function(e,t){a.common.traverseTree(e)}),a[t]=s}).catch(function(e){})},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.expertForm.profession=r.join(",")},validateAccount:function(){var e=this,t={method:"get",url:"".concat(this.common.basePath,"/hr_users/judge"),params:{account:this.expertForm.account}},a=new Promise(function(a,s){e.axios(t).then(function(e){a("success")}).catch(function(e){s(e)})});return a},submitForm:function(e){var t=this,a=this;a.$confirm("确定提交吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(s){t.$refs[e].validate(function(e){if(!e)return a.$message.error("请检查表单是否填写正确"),!1;var s={method:"post",url:"".concat(t.common.basePath,"/hr_users/expert/add"),data:t.expertForm};t.axios(s).then(function(e){a.$message.success(e.data.meta.message),a.$router.push({name:"ExpertManagement"})}).catch(function(e){a.$message.error(e)})})})},resetForm:function(e){console.log(this[forName]),this.$refs[e].resetFields()},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;return this.formLoading=!0,t||a||(this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),this.formLoading=!1),t||a},uploadSuccess:function(e,t){this.expertForm.picture=e.data.path,this.formLoading=!1},uploadError:function(e,t,a){this.$message.error("上传失败!!",20),this.formLoading=!1}}},In=Nn,jn=Object(u["a"])(In,Pn,$n,!1,null,null,null);jn.options.__file="Add.vue";var Tn=jn.exports,An=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("专家管理")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("专家列表")]),a("div",{staticClass:"block-body"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"50"}}),a("el-table-column",{attrs:{type:"index",width:"60",label:"序号",index:e.indexMethod,"class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"account",label:"账号",width:"150"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"150"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"150"}}),a("el-table-column",{attrs:{prop:"phoneNum",label:"手机",width:"150"}}),a("el-table-column",{attrs:{label:"常用"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.commUsed?a("span",[e._v("是")]):a("span",[e._v("否")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-center"},[a("el-button",{attrs:{type:"success",icon:1==t.row.commUsed?"el-icon-check":"el-icon-edit",size:"small"},on:{click:function(a){e.setCommonUsed(t.row.id)}}},[e._v("标记")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){e.showEditDialog(t.row.id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){e.deleteItem(t.row.id)}}},[e._v("删除")])],1)]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:0==e.multipleSelection.length},on:{click:function(t){e.deleteItem(!1)}}},[e._v("批量删除")]),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":e.currentPerPage,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{title:"编辑",visible:e.editDialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"expertForm",attrs:{model:e.expertForm,rules:e.rules,"label-width":"150px",size:"middle"}},[a("el-form-item",{attrs:{label:"头像：",prop:"picture"}},[a("el-upload",{staticClass:"upload-picture",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,"show-file-list":!1,"before-upload":e.beforeUpload,"on-success":e.uploadSuccess,name:"file"}},[e.expertForm.picture?a("img",{staticClass:"avatar",attrs:{src:e.common.picsBasePath+"/"+e.expertForm.picture}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"账号：",prop:"account"}},[a("span",[e._v(" "+e._s(e.expertForm.account)+" ")])]),a("el-form-item",{attrs:{label:"姓名：",prop:"name"}},[a("el-input",{model:{value:e.expertForm.name,callback:function(t){e.$set(e.expertForm,"name",t)},expression:"expertForm.name"}})],1),a("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{model:{value:e.expertForm.email,callback:function(t){e.$set(e.expertForm,"email",t)},expression:"expertForm.email"}})],1),a("el-form-item",{attrs:{label:"手机：",prop:"phoneNum"}},[a("el-input",{attrs:{type:"number"},model:{value:e.expertForm.phoneNum,callback:function(t){e.$set(e.expertForm,"phoneNum",t)},expression:"expertForm.phoneNum"}})],1),a("el-form-item",{attrs:{label:"行业：",prop:"profession"}},[a("el-tree",{ref:"industryTree",attrs:{data:e.industryTree,"node-key":"id",props:e.treeProps,"show-checkbox":"",accordion:""},on:{"check-change":e.handleCheckChange}})],1),a("el-form-item",{attrs:{label:"工作单位：",prop:"workUnit"}},[a("el-input",{model:{value:e.expertForm.workUnit,callback:function(t){e.$set(e.expertForm,"workUnit",t)},expression:"expertForm.workUnit"}})],1),a("el-form-item",{attrs:{label:"职称：",prop:"technicalTitle"}},[a("el-input",{model:{value:e.expertForm.technicalTitle,callback:function(t){e.$set(e.expertForm,"technicalTitle",t)},expression:"expertForm.technicalTitle"}})],1),a("el-form-item",{attrs:{label:"是否常用："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":2},model:{value:e.expertForm.commUsed,callback:function(t){e.$set(e.expertForm,"commUsed",t)},expression:"expertForm.commUsed"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("expertForm")}}},[e._v("提交")])],1)],1)],1)},zn=[],Bn={data:function(){var e=this,t=function(t,a,s){return a?e.common.emailReg.test(a)?s():s(new Error("请输入正确的邮箱")):s(new Error("请输入邮箱"))},a=function(t,a,s){return a?e.common.mobileReg.test(a)?s():s(new Error("请输入正确的手机号码")):s(new Error("请输入手机号码"))};return{loading:!1,token:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},tableData:[],multipleSelection:[],currentPage:1,currentPerPage:10,total:0,editDialogVisible:!1,expertForm:{account:null,profession:null,commonUsed:!1},rules:{profession:[{required:!0,message:"请选择对应行业",trigger:"change"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:t,trigger:"blur"}],phoneNum:[{required:!0,message:"请输入手机",trigger:"blur"},{validator:a,trigger:"blur"}]},industryTree:[],treeProps:{label:"name",children:"childrens"}}},computed:{},watch:{editDialogVisible:{handler:function(e,t){e||e==t||this.resetForm("expertForm")},deep:!0}},mounted:function(){var e=this;window.em=this,e.common.getDictionaryData(2).then(function(t){e.industryTree=t}),e.getTableListData()},methods:{indexMethod:function(e){return e+1+(this.currentPage-1)*this.currentPerPage},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.currentPerPage=e,this.getTableListData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableListData()},getTableListData:function(){var e=this;this.loading=!0;var t={method:"get",url:"".concat(this.common.basePath,"/hr_users/expert/list"),params:{pageNum:this.currentPage,pageSize:this.currentPerPage}};this.axios(t).then(function(t){e.tableData=t.data.data.rows,e.total=t.data.data.total,e.loading=!1}).catch(function(t){self.$message.error(t),e.loading=!1})},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.expertForm.profession=r.join(",")},validateAccount:function(){var e=this,t={method:"get",url:"".concat(this.common.basePath,"/hr_users/judge"),params:{account:this.expertForm.account}},a=new Promise(function(a,s){e.axios(t).then(function(e){a("success")}).catch(function(e){s(e)})});return a},showEditDialog:function(e){this.editDialogVisible=!0,this.getDetail(e)},setCommonUsed:function(e){var t=this,a={method:"get",url:"".concat(t.common.basePath,"/hr_users/expert/sign/").concat(e)};t.axios(a).then(function(e){t.getTableListData()}).catch(function(e){t.$message.error(e)})},getDetail:function(e){var t=this,a={method:"get",url:"".concat(t.common.basePath,"/hr_users/details"),params:{id:e}};t.axios(a).then(function(e){t.expertForm=e.data.data,t.$nextTick(function(){t.$refs.expertForm.clearValidate()});var a=t.expertForm.professiones.map(function(e){return e.id});t.$refs.industryTree.setCheckedKeys(a),t.expertForm.profession=a.join(",")}).catch(function(e){t.$message.error("获取详情失败"),t.editDialogVisible=!1})},submitForm:function(e){var t=this;t.$confirm("确定提交吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(a){t.$refs[e].validate(function(e){if(!e)return t.$message.error("请检查表单是否填写正确"),!1;var a={method:"patch",url:"".concat(t.common.basePath,"/hr_users/user/update/").concat(t.expertForm.id),data:t.expertForm};t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.editDialogVisible=!1,t.getTableListData()}).catch(function(e){t.$message.error(e)})})})},deleteItem:function(e){var t=this,a={method:"delete",url:"".concat(t.common.basePath,"/hr_users/ids/delete"),data:[e]};e||(a.data=t.multipleSelection.map(function(e){return e.id})),t.$confirm("删除后需要重新添加","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.getTableListData()}).catch(function(e){t.$message.error(e)})})},resetForm:function(e){console.log(this[e]),this.$refs[e].resetFields()},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type;return t||a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),t||a},uploadSuccess:function(e,t){this.expertForm.picture=e.data.path}}},Ln=Bn,On=(a("3c8f"),Object(u["a"])(Ln,An,zn,!1,null,null,null));On.options.__file="ExpertManagement.vue";var Vn=On.exports,En=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("专家管理")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("专家组列表")]),a("div",{staticClass:"block-body"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"50"}}),a("el-table-column",{attrs:{type:"index",index:e.indexMethod}}),a("el-table-column",{attrs:{prop:"account",label:"账号",width:"150"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"150"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{label:"操作",width:"240","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-center"},[a("el-button",{attrs:{type:"default",icon:"el-icon-edit",size:"mini"},on:{click:function(a){e.showEditDialog(t.row.id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){e.deleteItem(t.row.id)}}},[e._v("删除")])],1)]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:0==e.multipleSelection.length},on:{click:function(t){e.deleteItem(!1)}}},[e._v("批量删除")]),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":e.currentPerPage,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{title:"编辑",visible:e.editDialogVisible,width:"60%",center:""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"expertForm",attrs:{model:e.expertForm,rules:e.rules,"label-width":"150px",size:"small"}},[a("h4",{staticClass:"block-depart-title"},[e._v("基本信息")]),a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("span",[e._v(" "+e._s(e.expertForm.account)+" ")])]),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.expertForm.name,callback:function(t){e.$set(e.expertForm,"name",t)},expression:"expertForm.name"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.expertForm.email,callback:function(t){e.$set(e.expertForm,"email",t)},expression:"expertForm.email"}})],1),a("el-form-item",{attrs:{label:"行业",prop:"profession"}},[a("el-tree",{ref:"industryTree",attrs:{data:e.industryTree,"node-key":"id",props:e.treeProps,"show-checkbox":""},on:{"check-change":e.handleCheckChange}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("expertForm")}}},[e._v("提交")]),a("el-button",{attrs:{type:"default"},on:{click:function(t){e.resetForm("expertForm")}}},[e._v("重置")])],1)],1)],1)},Mn=[],Rn={data:function(){var e=this,t=function(t,a,s){return a?e.common.emailReg.test(a)?s():s(new Error("请输入正确的邮箱")):s(new Error("请输入邮箱"))};return{loading:!1,tableData:[],multipleSelection:[],currentPage:1,currentPerPage:10,total:0,editDialogVisible:!1,expertForm:{account:null,profession:null},rules:{profession:[{required:!0,message:"请选择对应行业",trigger:"change"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:t,trigger:"blur"}]},industryTree:[],treeProps:{label:"name",children:"childrens"}}},watch:{editDialogVisible:{handler:function(e,t){e||e==t||this.resetForm("expertForm")},deep:!0}},mounted:function(){var e=this;e.common.getDictionaryData(2).then(function(t){e.industryTree=t}),e.getTableListData()},methods:{indexMethod:function(e){return e+1+(this.currentPage-1)*this.currentPerPage},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.currentPerPage=e,this.getTableListData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableListData()},getTableListData:function(){var e=this;this.loading=!0;var t={method:"get",url:"".concat(this.common.basePath,"/hr_users/expert/list"),params:{pageNum:this.currentPage,pageSize:this.currentPerPage}};this.axios(t).then(function(t){e.tableData=t.data.data.rows,e.total=t.data.data.total,e.loading=!1}).catch(function(t){self.$message.error(t),e.loading=!1})},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.expertForm.profession=r.join(",")},validateAccount:function(){var e=this,t={method:"get",url:"".concat(this.common.basePath,"/hr_users/judge"),params:{account:this.expertForm.account}},a=new Promise(function(a,s){e.axios(t).then(function(e){a("success")}).catch(function(e){s(e)})});return a},showEditDialog:function(e){this.editDialogVisible=!0,this.getDetail(e)},getDetail:function(e){var t=this,a={method:"get",url:"".concat(t.common.basePath,"/hr_users/details"),params:{id:e}};t.axios(a).then(function(e){t.expertForm=e.data.data,t.$nextTick(function(){t.$refs.expertForm.clearValidate()});var a=t.expertForm.professiones.map(function(e){return e.id});t.$refs.industryTree.setCheckedKeys(a),t.expertForm.profession=a.join(",")}).catch(function(e){t.$message.error("获取详情失败"),t.editDialogVisible=!1})},submitForm:function(e){var t=this;t.$confirm("确定提交吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){t.$refs[e].validate(function(e){if(!e)return!1;var a={method:"patch",url:"".concat(t.common.basePath,"/hr_users/user/update/").concat(t.expertForm.id),data:t.expertForm};t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.editDialogVisible=!1,t.getTableListData()}).catch(function(e){t.$message.error(e)})})})},deleteItem:function(e){var t=this,a={method:"delete",url:"".concat(t.common.basePath,"/hr_users/ids/delete"),data:[e]};e||(a.data=t.multipleSelection.map(function(e){return e.id})),t.$confirm("删除后需要重新添加","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.getTableListData()}).catch(function(e){t.$message.error(e)})})},resetForm:function(e){this.$refs[e].resetFields()}}},Jn=Rn,Un=(a("e2af"),Object(u["a"])(Jn,En,Mn,!1,null,null,null));Un.options.__file="GroupManagement.vue";Un.exports;var qn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Qn=[],Hn={},Kn=Hn,Wn=Object(u["a"])(Kn,qn,Qn,!1,null,null,null);Wn.options.__file="Index.vue";var Gn=Wn.exports,Xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("字典管理")]),a("div",{staticClass:"block-wrap"},[a("el-row",{staticClass:"pad10",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"",icon:"el-icon-circle-plus",size:"middle"},on:{click:function(t){e.showDialog("addParent")}}},[e._v("添加")])],1),a("el-col",{attrs:{span:18}},[a("el-form",{staticClass:"fr",attrs:{size:"middle","label-width":"100px",inline:""}},[a("el-form-item",{staticClass:"marb0",attrs:{label:"类型：",prop:"name"}},[a("el-select",{staticClass:"fl",attrs:{size:"middle",placeholder:"请选择"},on:{change:e.typeChange},model:{value:e.activeTypeId,callback:function(t){e.activeTypeId=t},expression:"activeTypeId"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:""}})],1)],1)],1),a("el-card",{staticClass:"box-card"},[a("el-tree",{attrs:{data:e.eachTypeAllTree,accordion:"","node-key":"id",props:e.defaultProps,"expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node my_custom-tree-node",on:{mouseover:function(t){e.tempAtId=r.id},mouseout:function(t){e.tempAtId=null}}},[a("span",[e._v(e._s(s.label))]),e.tempAtId==r.id?a("span",{staticClass:"tree-right-operate"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.showDialog("addChild",r)}}},[e._v("\n              添加子字典\n            ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.showDialog("edit",r)}}},[e._v("\n              编辑字典\n            ")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.del(r)}}},[e._v("\n              删除\n            ")])],1):e._e()])}}])})],1)],1),a("el-dialog",{attrs:{title:"add"==e.activeTypeDialog?"添加字典":"编辑字典",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:e.form,"label-width":"100px",size:"middle"}},["addParent"==e.addType?a("el-form-item",{attrs:{prop:"typeId",label:"类型：",rules:[{required:"add"==e.activeTypeDialog,message:"请选择类型",trigger:"blur"}]}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.typeId,callback:function(t){e.$set(e.form,"typeId",t)},expression:"form.typeId"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),a("el-form-item",{attrs:{prop:"codeStr",label:"编号：",rules:[{required:"add"==e.activeTypeDialog,message:"请输入编码",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.codeStr,callback:function(t){e.$set(e.form,"codeStr",t)},expression:"form.codeStr"}})],1),a("el-form-item",{attrs:{prop:"name",label:"名称：",rules:[{required:"add"==e.activeTypeDialog,message:"请输入名称",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},Yn=[],Zn={mounted:function(){this.getQueryTreeDictionary(),this.getQueryTypeList()},data:function(){return{dialogVisible:!1,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},multipleSelection:[],typeList:[],form:{codeStr:null,name:null,typeId:null,curStatus:0,parent_id:null},activeTypeDialog:"add",activeTypeId:null,searchText:null,itemActiveDictonary:null,eachTypeAllTree:null,defaultProps:{children:"childrens",label:"name"},tempAtId:null,addType:null}},methods:{getQueryTreeDictionary:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/contrast/all/tree"),this._queryListParams()).then(function(t){e.eachTypeAllTree=t.data.data}).catch(function(t){e.$message.error(t)})},_queryListParams:function(){return{params:{typeId:this.activeTypeId,name:this.searchText}}},getQueryTypeList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/contrast/all/type/list"),"").then(function(t){e.typeList=t.data.data}).catch(function(t){e.$message.error(t)})},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getQueryTreeDictionary()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getQueryTreeDictionary()},del:function(e){var t=this;e.curStatus="20",this.axios.patch("".concat(this.common.basePath,"/contrast/contrast/update/").concat(e.id),e).then(function(e){t.getQueryTreeDictionary()}).catch(function(e){t.$message.error(e)})},handleSelectionChange:function(e){var t=[];e.forEach(function(e,a){t.push(e.id)}),this.multipleSelection=t},showDialog:function(e,t){this.addType=e,"addParent"==e||"addChild"==e?(this.dialogVisible=!0,this.activeTypeDialog="add",this.form={code:null,name:null,typeId:null},"addChild"==e&&(this.form.parent_id=t.id,this.form.typeId=t.typeId)):(this.dialogVisible=!0,this.activeTypeDialog="edit",this.form=JSON.parse(JSON.stringify(t)))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;"add"==t.activeTypeDialog?t._addDictonary():t._editDictonary(),t.dialogVisible=!1})},_addDictonary:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/contrast/contrast/add"),this.form).then(function(t){e.getQueryTreeDictionary()}).catch(function(t){e.$message.error(t)})},_editDictonary:function(){var e=this;this.form.curStatus=null,this.axios.patch("".concat(this.common.basePath,"/contrast/contrast/update/").concat(this.form.id),this.form).then(function(t){e.getQueryTreeDictionary()}).catch(function(t){e.$message.error(t)})},typeChange:function(){this.getQueryTreeDictionary()}}},el=Zn,tl=(a("1b6e"),Object(u["a"])(el,Xn,Yn,!1,null,null,null));tl.options.__file="Dictionary.vue";var al=tl.exports,sl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("权限管理")]),a("div",{staticClass:"block-wrap"},[a("el-row",{staticClass:"pad10",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"",icon:"el-icon-circle-plus",size:"middle"},on:{click:function(t){e.showDialog("addParent")}}},[e._v("添加")])],1)],1),a("el-card",{staticClass:"box-card"},[a("el-tree",{attrs:{data:e.eachTypeAllTree,"node-key":"id",accordion:"",props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node my_custom-tree-node",on:{mouseover:function(t){e.tempAtId=r.id},mouseout:function(t){e.tempAtId=null}}},[a("span",[e._v(e._s(s.label))]),e.tempAtId==r.id?a("span",{staticClass:"tree-right-operate"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.showDialog("addChild",r)}}},[e._v("\n              添加子权限\n            ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.showDialog("edit",r)}}},[e._v("\n              编辑权限\n            ")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.del(r)}}},[e._v("\n              删除\n            ")])],1):e._e()])}}])})],1)],1),a("el-dialog",{attrs:{title:"add"==e.activeTypeDialog?"添加权限":"编辑权限",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:e.form,"label-width":"100px",size:"middle"}},[a("el-form-item",{attrs:{prop:"name",label:"名称：",rules:[{required:!0,message:"请输入名称",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"url",label:"地址：",rules:[{required:!0,message:"请输入地址",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},rl=[],il={mounted:function(){this.getQueryTree()},data:function(){return{dialogVisible:!1,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},multipleSelection:[],typeList:[],form:{code:null,creator:JSON.parse(sessionStorage.getItem("userData")).id,cur_status:0,name:null,parent_id:null,type:2,url:null},activeTypeDialog:"add",activeTypeId:null,searchText:null,itemActiveJurisdiction:null,eachTypeAllTree:null,defaultProps:{children:"childrens",label:"name"},tempAtId:null,addType:null}},methods:{getQueryTree:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/resources/tree"),this._queryTreeParams()).then(function(t){e.eachTypeAllTree=t.data.data}).catch(function(t){e.$message.error(t)})},_queryTreeParams:function(){return{params:{type:2}}},del:function(e){var t=this;e.curStatus="20",this.axios.patch("".concat(this.common.basePath,"/resources/delete/").concat(e.id),e).then(function(e){t.getQueryTree(),t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e)})},handleSelectionChange:function(e){var t=[];e.forEach(function(e,a){t.push(e.id)}),this.multipleSelection=t},showDialog:function(e,t){this.$refs.form&&this.$refs.form.resetFields(),this.addType=e,"addParent"==e||"addChild"==e?(this.form={code:null,creator:JSON.parse(sessionStorage.getItem("userData")).id,cur_status:0,name:null,parent_id:null,type:2,url:null},this.dialogVisible=!0,this.activeTypeDialog="add","addChild"==e&&(this.form.parent_id=t.id)):(this.dialogVisible=!0,this.activeTypeDialog="edit",this.form=JSON.parse(JSON.stringify(t)))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;"add"==t.activeTypeDialog?t._addJurisdiction():t._editJurisdiction(),t.dialogVisible=!1})},_addJurisdiction:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/resources"),this.form).then(function(t){e.getQueryTree(),e.$message.success(t.data.meta.message)}).catch(function(t){e.$message.error(t)})},_editJurisdiction:function(e){var t=this;this.form.curStatus=0,this.axios.patch("".concat(this.common.basePath,"/resources/").concat(this.form.id),this.form).then(function(e){t.getQueryTree(),t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e)})},typeChange:function(){this.getQueryTree()}}},ol=il,nl=(a("7fb9"),Object(u["a"])(ol,sl,rl,!1,null,null,null));nl.options.__file="Jurisdiction.vue";var ll=nl.exports,cl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("菜单管理")]),a("div",{staticClass:"block-wrap"},[a("el-row",{staticClass:"pad10",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"",icon:"el-icon-circle-plus",size:"middle"},on:{click:function(t){e.showDialog("addParent")}}},[e._v("添加")])],1)],1),a("el-card",{staticClass:"box-card"},[a("el-tree",{attrs:{data:e.eachTypeAllTree,"node-key":"id",accordion:"",props:e.defaultProps,"expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node my_custom-tree-node",on:{mouseover:function(t){e.tempAtId=r.id},mouseout:function(t){e.tempAtId=null}}},[a("span",[e._v(e._s(s.label))]),e.tempAtId==r.id?a("span",{staticClass:"tree-right-operate"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.showDialog("addChild",r)}}},[e._v("\n                添加子菜单\n              ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.showDialog("edit",r)}}},[e._v("\n                编辑菜单\n              ")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.del(r)}}},[e._v("\n                删除\n              ")])],1):e._e()])}}])})],1)],1),a("el-dialog",{attrs:{title:"add"==e.activeTypeDialog?"添加菜单":"编辑菜单",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-dynamic",attrs:{model:e.form,"label-width":"100px",size:"middle"}},[a("el-form-item",{attrs:{prop:"name",label:"名称：",rules:[{required:!0,message:"请输入名称",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"url",label:"地址：",rules:[{required:!0,message:"请输入地址",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},ul=[],ml={mounted:function(){this.getQueryTree()},data:function(){return{dialogVisible:!1,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},multipleSelection:[],typeList:[],form:{code:null,creator:JSON.parse(sessionStorage.getItem("userData")).id,cur_status:0,name:null,parent_id:null,type:1,url:null},activeTypeDialog:"add",activeTypeId:null,searchText:null,itemActiveJurisdiction:null,eachTypeAllTree:null,defaultProps:{children:"childrens",label:"name"},tempAtId:null,addType:null}},methods:{getQueryTree:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/resources/tree"),this._queryTreeParams()).then(function(t){e.eachTypeAllTree=t.data.data}).catch(function(t){e.$message.error(t)})},_queryTreeParams:function(){return{params:{type:1}}},del:function(e){var t=this;e.curStatus="20",this.axios.patch("".concat(this.common.basePath,"/resources/delete/").concat(e.id),e).then(function(e){t.getQueryTree(),t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e)})},handleSelectionChange:function(e){var t=[];e.forEach(function(e,a){t.push(e.id)}),this.multipleSelection=t},showDialog:function(e,t){this.$refs.form&&this.$refs.form.resetFields(),this.addType=e,"addParent"==e||"addChild"==e?(this.form={code:null,creator:JSON.parse(sessionStorage.getItem("userData")).id,cur_status:0,name:null,parent_id:null,type:1,url:null},this.dialogVisible=!0,this.activeTypeDialog="add","addChild"==e&&(this.form.parent_id=t.id)):(this.dialogVisible=!0,this.activeTypeDialog="edit",this.form=JSON.parse(JSON.stringify(t)))},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;"add"==t.activeTypeDialog?t._addJurisdiction():t._editJurisdiction(),t.dialogVisible=!1})},_addJurisdiction:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/resources"),this.form).then(function(t){e.getQueryTree(),e.$message.success(t.data.meta.message)}).catch(function(t){e.$message.error(t)})},_editJurisdiction:function(e){var t=this;this.form.curStatus=0,this.axios.patch("".concat(this.common.basePath,"/resources/").concat(this.form.id),this.form).then(function(e){t.getQueryTree(),t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e)})},typeChange:function(){this.getQueryTree()}}},dl=ml,pl=(a("db4f"),Object(u["a"])(dl,cl,ul,!1,null,null,null));pl.options.__file="Menu.vue";var hl=pl.exports,fl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("组织管理")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("组织管理")]),a("div",{staticClass:"block-body"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"middle"}},[e._v("编辑")]),a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus",size:"middle"}},[e._v("添加")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"middle"}},[e._v("删除")])],1),a("el-col",{attrs:{span:10,offset:6}},[a("el-button",{staticClass:"fr",attrs:{type:"",icon:"el-icon-search",size:"middle"}},[e._v("检索")]),a("el-select",{staticClass:"fr",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,size:"middle",loading:e.loading},model:{value:e.value9,callback:function(t){e.value9=t},expression:"value9"}},e._l(e.options4,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),a("el-row",[a("div",{staticStyle:{height:"10px"}})]),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"50"}}),a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"80","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){e.handleClick(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus",size:"small"}},[e._v("添加")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"}},[e._v("删除")])]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-col",{attrs:{span:12,offset:0}},[a("div",[a("el-select",{attrs:{placeholder:"请选择",size:"middle"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),a("el-button",{attrs:{type:"",icon:"el-icon-check",size:"middle"}},[e._v("确定")])],1)]),a("el-col",{attrs:{span:8,offset:4}},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[100,200,300,400],"page-size":100,background:"",middle:"",layout:"total, sizes, prev, pager, next, jumper",total:400},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)])])},gl=[],bl={methods:{handleClick:function(e,t){console.log(e,t)},indexMethod:function(e){return 1*e},handleSizeChange:function(e){console.log("每页 ".concat(e," 条"))},handleCurrentChange:function(e){console.log("当前页: ".concat(e))},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout(function(){t.loading=!1,t.options4=t.list.filter(function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1})},200)):this.options4=[]}},mounted:function(){this.list=this.states.map(function(e){return{value:e,label:e}})},data:function(){return{tableData:[{date:"2016-05-02",name:"王小虎",address:"天津和平区"},{date:"2016-05-04",name:"王小虎",address:"天津和平区"},{date:"2016-05-01",name:"王小虎",address:"天津和平区"},{date:"2016-05-03",name:"王小虎",address:"天津和平区"}],currentPage:4,options:[{value:"选项1",label:"选中所有"},{value:"选项2",label:"删除选中"},{value:"选项3",label:"批量编辑"},{value:"选项4",label:"导出所选"}],value:"",options4:[],value9:[],list:[],loading:!1,states:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]}}},vl=bl,_l=(a("c715"),Object(u["a"])(vl,fl,gl,!1,null,null,null));_l.options.__file="Organization.vue";var yl=_l.exports,wl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("角色管理")]),a("div",{staticClass:"block-wrap"},[a("el-form",{staticClass:"pad10",attrs:{size:"middle","label-width":"60px",inline:""}},[a("el-form-item",{staticClass:"marb0",attrs:{label:"角色：",prop:"name","label-width":"80px"}},[a("el-select",{staticClass:"fl width-minus-200",attrs:{size:"middle",placeholder:"请选择"},on:{change:e.typeChange},model:{value:e.activeTypeId,callback:function(t){e.activeTypeId=t},expression:"activeTypeId"}},e._l(e.rolesList.rows,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{staticClass:"marb0",attrs:{label:""}},[a("el-button",{staticClass:"fl",attrs:{type:"",icon:"el-icon-circle-plus",size:"middle"},on:{click:function(t){e.showDialog("addParent")}}},[e._v("添加")])],1)],1),a("el-card",{staticClass:"box-card"},[a("el-button",{staticClass:"width-absolutely",attrs:{type:"primary",size:"middle"},on:{click:e.saveResource}},[e._v("保存资源")]),a("el-checkbox-group",{staticClass:"my-tree-bar",model:{value:e.checkedResourceValue,callback:function(t){e.checkedResourceValue=t},expression:"checkedResourceValue"}},[a("tree-selected-loop",{attrs:{treeData:e.eachTypeAllTree,layer:"1"}})],1)],1)],1),a("el-dialog",{attrs:{title:"添加角色",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"roleForm",staticClass:"demo-dynamic",attrs:{model:e.roleForm,"label-width":"100px",size:"middle"}},[a("el-form-item",{attrs:{prop:"name",label:"名称：",rules:[{required:!0,message:"请输入名称",trigger:"blur"}]}},[a("el-input",{model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRoleForm("roleForm")}}},[e._v("确 定")])],1)],1)],1)},xl=[],Cl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-tree"},[a("ul",e._l(e.treeData,function(t,s){return a("li",{key:s,class:{"last-li":!t.childrens.length,open:t.isShow},on:{click:function(a){a.stopPropagation(),e.showChildren(t)}}},[t.childrens.length?e._e():a("el-checkbox",{attrs:{label:t.id}},[e._v(e._s(t.name))]),t.childrens.length?a("span",[e._v(e._s(t.name))]):e._e(),a("items",{directives:[{name:"show",rawName:"v-show",value:t.childrens&&t.isShow,expression:"item.childrens && item.isShow"}],attrs:{treeData:t.childrens}})],1)}))])},Fl=[],kl={name:"items",props:{treeData:null,layer:null},data:function(){return{checkedCities:null}},mounted:function(){},watch:{},destoryed:function(){},methods:{showChildren:function(e){e.isShow=!e.isShow}}},Sl=kl,Dl=Object(u["a"])(Sl,Cl,Fl,!1,null,null,null);Dl.options.__file="Tree_Selected_Loop.vue";var Pl=Dl.exports,$l={components:{"tree-selected-loop":Pl},mounted:function(){this.getQueryRoleList()},data:function(){return{dialogVisible:!1,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},tableData:{rows:[],total:0},rolesList:{rows:[],total:0},multipleSelection:[],typeList:[],eachTypeAllTree:null,activeTypeId:null,roleForm:{name:null},defaultProps:{children:"childrens",label:"name"},addType:null,checkedResourceValue:[],countLayer:0}},methods:{getQueryRoleList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/roles/list"),"").then(function(t){e.rolesList=t.data.data,e.rolesList&&(e.activeTypeId=e.rolesList.rows[0].id),e.getQueryTree()}).catch(function(t){e.$message.error(t)})},showDialog:function(){this.dialogVisible=!0,this.$refs.roleForm&&this.$refs.roleForm.resetFields()},saveResource:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/role_resources/batch/update/").concat(this.activeTypeId),this.checkedResourceValue).then(function(t){e.getQueryTree(),e.$message.success("".concat(t.data.meta.message,", 重新登录后生效"))}).catch(function(t){e.$message.error(t)})},getQueryTree:function(){var e=this;this.checkedResourceValue=[],this.axios.get("".concat(this.common.basePath,"/role_resources/select/tree"),this._queryTreeParams()).then(function(t){e.eachTypeAllTree=e._convertData(t.data.data)}).catch(function(t){e.$message.error(t)})},_queryTreeParams:function(){return{params:{roleId:this.activeTypeId}}},_convertData:function(e){var t=this;return this.countLayer++,e.forEach(function(e){t.countLayer,e.isShow=!1,e.childrens&&t._convertData(e.childrens),e.childrens.length||e.isSelect&&t.checkedResourceValue.push(e.id)}),e},typeChange:function(){this.getQueryTree()},submitRoleForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t._add(),t.dialogVisible=!1})},_add:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/roles/roles/add"),this.roleForm).then(function(t){e.getQueryRoleList(),e.$message.success(t.data.meta.message)}).catch(function(t){e.$message.error(t)})}}},Nl=$l,Il=(a("1f01"),Object(u["a"])(Nl,wl,xl,!1,null,null,null));Il.options.__file="Role.vue";var jl=Il.exports,Tl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("用户管理")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("用户管理")]),a("div",{staticClass:"block-body"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"",icon:"el-icon-circle-plus",size:"middle"},on:{click:function(t){e.showDialog("new",e.form)}}},[e._v("添加")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"middle"},on:{click:function(t){e.delDataClick(e.multipleSelection)}}},[e._v("批量删除")])],1),a("el-col",{attrs:{span:6,offset:12}},[a("el-button",{staticClass:"fr",attrs:{type:"",icon:"el-icon-search",size:"middle"},on:{click:e.searchClick}},[e._v("检索")]),a("el-input",{staticClass:"fr width-minus-100",attrs:{size:"middle",placeholder:"根据姓名或账号检索"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)],1),a("el-row",[a("div",{staticStyle:{height:"10px"}})]),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{attrs:{data:e.tableData.rows,stripe:""},on:{"selection-change":e.handleSelectionChange,"row-click":e.cellClick}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"50"}}),a("el-table-column",{attrs:{type:"index",index:e.indexMethod,width:"60",label:"序号","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"account",label:"账号",width:"150"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"150"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"240"}}),a("el-table-column",{attrs:{prop:"roles",label:"角色","min-width":"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"roles-list-box"},[a("div",{staticClass:"tag-div"},e._l(t.row.roles,function(s,r){return a("el-tag",{key:r,staticClass:"marr10",attrs:{closable:"",type:"info"},on:{close:function(a){e.delRoleDialog(t.row,s.id,"cell")}}},[e._v("\n                      "+e._s(s.name)+"\n                    ")])}))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"420",fixed:"right","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus",size:"small"},on:{click:function(a){e.showRoleDialog(t.row,"cell")}}},[e._v("添加角色")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){e.showDialog("edit",t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){e.delDataClick([t.row.id])}}},[e._v("删除")]),a("el-button",{attrs:{type:"primary",icon:"fa fa-unlock-alt",size:"small"},on:{click:function(a){e.resetPassClick(t.row)}}},[e._v(" 重置密码")])]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{staticClass:"ce-pagination",attrs:{span:24,"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",middle:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":function(t){e.handleSizeChange(t)},"current-change":function(t){e.handleCurrentChange(t)}}})],1)]),a("el-dialog",{attrs:{title:"new"==e.tempOperateType?"新增":"编辑",visible:e.dialogVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",size:"middle"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"picture","label-width":"0",label:""}},[a("el-upload",{staticClass:"avatar-wrap avatar-wrap-self",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,"show-file-list":!1,"on-success":e.uploadSuccess,name:"file"}},[e.form.picture?a("img",{attrs:{width:"100px",height:"100px",src:e.common.picsBasePath+"/"+e.form.picture}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[e._v("上传头像")])])],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"account",label:"账号：",rules:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:e.validateAccount,trigger:"blur"}]}},[a("el-input",{attrs:{disabled:"edit"==e.tempOperateType},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),"new"==e.tempOperateType?a("el-form-item",{attrs:{prop:"password",label:"密码：",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),a("el-form-item",{attrs:{prop:"name",label:"名称：",rules:{required:!0,message:"请输入名称",trigger:"blur"}}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"phoneNum",label:"手机号：",rules:{required:!0,message:"请输入手机号",trigger:"blur"}}},[a("el-input",{model:{value:e.form.phoneNum,callback:function(t){e.$set(e.form,"phoneNum",t)},expression:"form.phoneNum"}})],1),a("el-form-item",{attrs:{label:"邮箱：",prop:"email",rules:[{required:!1,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"roles",label:"角色列表：","label-width":"100px"}},[e._l(e.form.roles,function(t,s){return a("el-tag",{key:t.name,staticClass:"marr10",attrs:{closable:"",type:"info"},on:{close:function(t){e.delRoleDialog(e.form,s,e.tempOperateType)}}},[e._v("\n                "+e._s(t.name)+"\n              ")])}),a("el-button",{attrs:{type:"",icon:"el-icon-circle-plus",size:"mini"},on:{click:function(t){e.showRoleDialog(e.form,e.tempOperateType)}}},[e._v("添加角色")])],2)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:e.loading},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")]),a("el-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){e.resetForm("form")}}},[e._v("重 置")])],1)]),a("el-dialog",{attrs:{title:"授予角色",visible:e.roleDialogVisible,width:"30%"},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[a("el-form",{ref:"roleForm",staticClass:"demo-dynamic",attrs:{model:e.roleForm,"label-width":"100px",size:"middle"}},[a("el-form-item",{attrs:{prop:"role",label:"角色：",rules:[{required:!0,message:"请授予角色",trigger:"blur"}]}},[a("el-select",{attrs:{"value-key":"id",placeholder:"请选择"},model:{value:e.roleForm.role,callback:function(t){e.$set(e.roleForm,"role",t)},expression:"roleForm.role"}},e._l(e.rolesList.rows,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRoleForm("roleForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"重置密码",visible:e.resetPassDialogVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.resetPassDialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-form",{ref:"resetPasswordForm",staticClass:"demo-ruleForm",attrs:{size:"middle",rules:e.resetPasswordFormRules,model:e.resetPasswordForm,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{attrs:{type:"text"},model:{value:e.resetPasswordForm.password,callback:function(t){e.$set(e.resetPasswordForm,"password",t)},expression:"resetPasswordForm.password"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:e.loading},on:{click:function(t){e.resetPassDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){e.resetPassword("resetPasswordForm")}}},[e._v("确 定")])],1)])],1)},Al=[],zl={methods:{getQueryList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/hr_users/choice/list"),this._queryListParams()).then(function(t){e.tableData=t.data.data}).catch(function(t){e.$message.error(t)})},_queryListParams:function(){return{params:{name:this.searchText,pageNum:this.elementPageData.pageNum,pageSize:this.elementPageData.pageSize}}},_toUserDataAddRolesList:function(e){var t=this;return e.rows.forEach(function(e){e.roles=[],t.getQueryRolesListByUserId(e.id).then(function(t){e.roles=t}).catch(function(e){t.$message.error(e)})}),e},indexMethod:function(e){return 1*e},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getQueryList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getQueryList()},searchClick:function(){this.getQueryList()},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e.forEach(function(e){t.multipleSelection.push(e.id)})},delDataClick:function(e){var t=this;this.$confirm("确认要删除吗？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){t.axios.delete("".concat(t.common.basePath,"/hr_users/ids/delete"),{data:e}).then(function(e){t.getQueryList()}).catch(function(e){t.$message.error(e)})}).catch(function(e){})},uploadSuccess:function(e){0==e.meta.code&&(this.form.picture=e.data.path)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;"new"==t.tempOperateType?t._addForm():t._editForm(),t.dialogVisible=!1})},_addForm:function(){var e=this;this.axios.post("".concat(this.common.basePath,"/hr_users/user/add"),this.form).then(function(t){e.getQueryList(),e.$message.success(t.data.meta.message)}).catch(function(t){e.$message.error(t)})},_editForm:function(){var e=this;this.axios.patch("".concat(this.common.basePath,"/hr_users/user/update/").concat(this.form.id),this.form).then(function(t){e.getQueryList(),e.$message.success(t.data.meta.message)}).catch(function(t){e.$message.error(t)})},showDialog:function(e,t){this.$refs.form&&this.$refs.form.resetFields(),this.dialogVisible=!0,this.tempOperateType=e,"edit"==e&&this.getQueryUserDetailById(t.id)},getQueryUserDetailById:function(e){var t=this;this.loading=!0,this.axios.get("".concat(this.common.basePath,"/hr_users/details"),{params:{id:e}}).then(function(e){t.form=t.tempOPerateData=e.data.data,t.loading=!1}).catch(function(e){t.loading=!1,t.$message.error(e)})},validateAccount:function(e,t,a){"edit"!=this.tempOperateType||this.tempOPerateData.account!=t?this._validateAccount(t).then(function(e){a()}).catch(function(e){a(new Error(e))}):a()},_validateAccount:function(e){var t=this;return new Promise(function(a,s){t.axios.get("".concat(t.common.basePath,"/hr_users/judge"),{params:{account:e}}).then(function(e){a(e)}).catch(function(e){s(e)})})},getQueryRolesListByUserId:function(e){var t=this;return new Promise(function(a,s){t.axios.get("".concat(t.common.basePath,"/user_roles/roles"),{params:{userId:e}}).then(function(e){a(e.data.data)}).catch(function(e){s(e)})})},getQueryRoleList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/roles/list"),"").then(function(t){e.rolesList=t.data.data}).catch(function(t){e.$message.error(t)})},showRoleDialog:function(e,t){this.roleDialogVisible=!0,this.$refs.roleForm&&this.$refs.roleForm.resetFields(),this.roleForm.user_id=e.id,this.tempOPerateData="cell"==t?e:this.form,this.tempOperateType=t},submitRoleForm:function(e){var t=this;if(!this._validateRoleIsExist())return this.$message.error("已存在此角色，请重新选择！"),!1;"new"==this.tempOperateType||"edit"==this.tempOperateType?(this.form.roles.push(this.roleForm.role),this.roleDialogVisible=!1):this.$refs[e].validate(function(e){if(!e)return!1;t._addRole(),t.roleDialogVisible=!1})},_validateRoleIsExist:function(){var e=this,t=!0;return this.tempOPerateData.roles.forEach(function(a){"edit"==e.tempOperateType||"new"==e.tempOperateType?e.roleForm.role.id==a.id&&(t=!1):e.roleForm.role.id==a.roleId&&(t=!1)}),t},_addRole:function(){var e=this;this.roleForm.role_id=this.roleForm.role.id,this.axios.post("".concat(this.common.basePath,"/user_roles"),this.roleForm).then(function(t){e.getQueryRolesListByUserId(e.tempOPerateData.id).then(function(t){e.tempOPerateData.roles=t}).catch(function(t){e.$message.error(t)}),e.$message.success(t.data.meta.message)}).catch(function(t){e.$message.error(t)})},delRoleDialog:function(e,t,a){var s=this;"new"==a?e.roles.splice(t,1):this.axios.delete("".concat(this.common.basePath,"/user_roles/").concat(t)).then(function(t){s.getQueryRolesListByUserId(e.id).then(function(t){e.roles=t}).catch(function(e){s.$message.error(e)}),s.$message.success(t.data.meta.message)}).catch(function(e){s.$message.error(e)})},resetPassClick:function(e){this.resetPassDialogVisible=!0,this.resetPasswordForm.userId=e.id,this.$refs.resetPasswordForm&&this.$refs.resetPasswordForm.resetFields()},resetPassword:function(e){var t=this,a=this;a.$refs[e].validate(function(e){if(!e)return!1;t.axios.post("".concat(t.common.basePath,"/hr_users/pwd/reset"),t.resetPasswordForm).then(function(e){t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e)}),t.resetPassDialogVisible=!1})},cellClick:function(e,t,a){"account"!=a.property&&"name"!=a.property&&"email"!=a.property||this.$router.push({name:"SystemUserDetail",params:{id:e.id}})},resetForm:function(e){if("edit"==this.tempOperateType){var t=JSON.parse(JSON.stringify(this.form));this.$refs[e].resetFields(),this.form.account=t.account}else this.$refs[e].resetFields()}},mounted:function(){this.getQueryRoleList(),this.getQueryList()},data:function(){var e=function(e,t,a){t?t.length<6?a(new Error("密码长度必须是6位以上!")):a():a(new Error("请输入密码"))};return{loading:!1,dialogVisible:!1,roleDialogVisible:!1,resetPassDialogVisible:!1,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault},token:{Authorization:"Bearer ".concat(JSON.parse(sessionStorage.getItem("token")))},tableData:{rows:[],total:0},searchText:null,multipleSelection:null,tempOperateType:"new",rolesList:{rows:[],total:0},form:{account:null,curStatus:0,email:null,name:null,picture:null,phoneNum:null,roles:[]},roleForm:{role:null,user_id:null},tempOPerateData:null,resetPasswordForm:{password:null,userId:null},resetPasswordFormRules:{password:[{required:!0,message:"请输入密码"},{validator:e,trigger:"blur"}]}}}},Bl=zl,Ll=(a("4413"),Object(u["a"])(Bl,Tl,Al,!1,null,null,null));Ll.options.__file="User.vue";var Ol=Ll.exports,Vl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.detail?a("div",[a("el-button",{staticClass:"back-button",attrs:{type:"primary",icon:"el-icon-back",size:"middle"},on:{click:function(t){e.$router.push({path:"/system_management/user"})}}},[e._v(" 返回")]),a("h2",{staticClass:"page-title"},[e._v("用户管理")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("用户详情\n        \n      ")]),a("div",{staticClass:"block-body"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("img",{attrs:{width:"120",height:"120",src:e.common.picsBasePath+"/"+e.detail.picture}})]),a("el-col",{attrs:{span:18}},[a("p",{staticClass:"mar10"},[e._v("账号："+e._s(e.detail.account))]),a("p",{staticClass:"mar10"},[e._v("姓名："+e._s(e.detail.name))]),a("p",{staticClass:"mar10"},[e._v("手机："+e._s(e.detail.phone))]),a("p",{staticClass:"mar10"},[e._v("邮箱："+e._s(e.detail.email))])]),a("el-col",{attrs:{span:24}},[a("p",{staticClass:"mar10"},[e._v("角色列表："),e._l(e.detail.roles,function(t,s){return a("span",[e._v(e._s(t.name)+"，")])})],2)]),a("el-col",{attrs:{span:24}},[a("h4",{staticClass:"block-title"}),a("p",{staticClass:"fr mar10"},[a("el-button",{attrs:{type:"",icon:"fa fa-unlock-alt"},on:{click:function(t){e.resetPassClick(e.detail)}}},[e._v(" 重置密码")]),a("el-button",{attrs:{type:"",icon:"el-icon-edit"},on:{click:function(t){e.showDialog("edit",e.detail)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){e.delDataClick([e.detail.id])}}},[e._v("删除")])],1)])],1)],1)]),a("el-dialog",{attrs:{title:"new"==e.tempOperateType?"新增":"编辑",visible:e.dialogVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"picture","label-width":"0",label:""}},[a("el-upload",{staticClass:"avatar-wrap avatar-wrap-self",attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,"show-file-list":!1,"on-success":e.uploadSuccess,name:"file"}},[e.form.picture?a("img",{attrs:{width:"100px",height:"100px",src:e.common.picsBasePath+"/"+e.form.picture}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[e._v("上传头像")])])],1)],1),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"account",label:"账号：",rules:[{required:!0,message:"请输入账号",trigger:"blur"},{validator:e.validateAccount,trigger:"blur"}]}},[a("el-input",{attrs:{disabled:"edit"==e.tempOperateType},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),"new"==e.tempOperateType?a("el-form-item",{attrs:{prop:"password",label:"密码：",rules:[{required:!0,message:"请输入密码",trigger:"blur"}]}},[a("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),a("el-form-item",{attrs:{prop:"name",label:"名称：",rules:{required:!0,message:"请输入名称",trigger:"blur"}}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"phoneNum",label:"手机号：",rules:{required:!0,message:"请输入手机号",trigger:"blur"}}},[a("el-input",{model:{value:e.form.phoneNum,callback:function(t){e.$set(e.form,"phoneNum",t)},expression:"form.phoneNum"}})],1),a("el-form-item",{attrs:{label:"邮箱：",prop:"email",rules:[{required:!1,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"roles",label:"角色列表：","label-width":"100px"}},[e._l(e.form.roles,function(t,s){return a("el-tag",{key:t.name,staticClass:"marr10",attrs:{closable:"",type:"info"},on:{close:function(t){e.delRoleDialog(e.form,s,e.tempOperateType)}}},[e._v("\n                  "+e._s(t.name)+"\n                ")])}),a("el-button",{attrs:{type:"",icon:"el-icon-circle-plus",size:"mini"},on:{click:function(t){e.showRoleDialog(e.form,e.tempOperateType)}}},[e._v("添加角色")])],2)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:e.loading},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确 定")]),a("el-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){e.resetForm("form")}}},[e._v("重 置")])],1)]),a("el-dialog",{attrs:{title:"授予角色",visible:e.roleDialogVisible,width:"30%"},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[a("el-form",{ref:"roleForm",staticClass:"demo-dynamic",attrs:{model:e.roleForm,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{prop:"role",label:"角色：",rules:[{required:!0,message:"请授予角色",trigger:"blur"}]}},[a("el-select",{attrs:{"value-key":"id",placeholder:"请选择"},model:{value:e.roleForm.role,callback:function(t){e.$set(e.roleForm,"role",t)},expression:"roleForm.role"}},e._l(e.rolesList.rows,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitRoleForm("roleForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"重置密码",visible:e.resetPassDialogVisible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.resetPassDialogVisible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-form",{ref:"resetPasswordForm",staticClass:"demo-ruleForm",attrs:{size:"small",rules:e.resetPasswordFormRules,model:e.resetPasswordForm,"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{attrs:{type:"text"},model:{value:e.resetPasswordForm.password,callback:function(t){e.$set(e.resetPasswordForm,"password",t)},expression:"resetPasswordForm.password"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:e.loading},on:{click:function(t){e.resetPassDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){e.resetPassword("resetPasswordForm")}}},[e._v("确 定")])],1)])],1):e._e()},El=[],Ml={methods:{getqQueryDetail:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/hr_users/details"),{params:{id:this.$route.params.id}}).then(function(t){e.detail=t.data.data}).catch(function(e){})},validateAccount:function(e,t,a){"edit"!=this.tempOperateType||this.tempOPerateData.account!=t?this._validateAccount(t).then(function(e){a()}).catch(function(e){a(new Error(e))}):a()},uploadSuccess:function(e){0==e.meta.code&&(this.form.picture=e.data.path)},resetPassClick:function(e){this.resetPassDialogVisible=!0,this.resetPasswordForm.userId=e.id,this.$refs.resetPasswordForm&&this.$refs.resetPasswordForm.resetFields()},resetPassword:function(e){var t=this,a=this;a.$refs[e].validate(function(e){if(!e)return!1;t.axios.post("".concat(t.common.basePath,"/hr_users/pwd/reset"),t.resetPasswordForm).then(function(e){t.$message.success(e.data.meta.message)}).catch(function(e){t.$message.error(e)}),t.resetPassDialogVisible=!1})},delRoleDialog:function(e,t){var a=this;this.axios.delete("".concat(this.common.basePath,"/user_roles/").concat(t)).then(function(t){a.getQueryRolesListByUserId(e.id).then(function(t){e.roles=t}).catch(function(e){a.$message.error(e)}),a.$message.success(t.data.meta.message)}).catch(function(e){a.$message.error(e)})},showDialog:function(e,t){this.$refs.form&&this.$refs.form.resetFields(),this.dialogVisible=!0,this.tempOperateType=e,"edit"==e&&this.getQueryUserDetailById(t.id)},getQueryUserDetailById:function(e){var t=this;this.loading=!0,this.axios.get("".concat(this.common.basePath,"/hr_users/details"),{params:{id:e}}).then(function(e){t.form=t.tempOPerateData=e.data.data,t.loading=!1}).catch(function(e){t.loading=!1,t.$message.error(e)})},delDataClick:function(e){var t=this;this.$confirm("确认要删除吗？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(function(){t.axios.delete("".concat(t.common.basePath,"/hr_users/ids/delete"),{data:e}).then(function(e){t.$router.push({path:"/system_management/user"})}).catch(function(e){t.$message.error(e)})}).catch(function(e){})},showRoleDialog:function(e,t){this.roleDialogVisible=!0,this.$refs.roleForm&&this.$refs.roleForm.resetFields(),this.roleForm.user_id=e.id,"cell"==t&&(this.tempOPerateData=e),this.tempOperateType=t},submitRoleForm:function(e){if(!this._validateRoleIsExist())return this.$message.error("已存在此角色，请重新选择！"),!1;"new"!=this.tempOperateType&&"edit"!=this.tempOperateType||(this.form.roles.push(this.roleForm.role),this.roleDialogVisible=!1)},_validateRoleIsExist:function(){var e=this,t=!0;return this.tempOPerateData.roles.forEach(function(a){"edit"==e.tempOperateType||"new"==e.tempOperateType?e.roleForm.role.id==a.id&&(t=!1):e.roleForm.role.id==a.roleId&&(t=!1)}),t},getQueryRoleList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/roles/list"),"").then(function(t){e.rolesList=t.data.data}).catch(function(t){e.$message.error(t)})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;"new"==t.tempOperateType?t._addForm():t._editForm(),t.dialogVisible=!1})},_editForm:function(){var e=this;this.axios.patch("".concat(this.common.basePath,"/hr_users/user/update/").concat(this.form.id),this.form).then(function(t){e.getqQueryDetail(),e.$message.success(t.data.meta.message)}).catch(function(t){e.$message.error(t)})},resetForm:function(e){if("edit"==this.tempOperateType){var t=JSON.parse(JSON.stringify(this.form));this.$refs[e].resetFields(),this.form.account=t.account}}},mounted:function(){this.getQueryRoleList(),this.getqQueryDetail()},data:function(){var e=function(e,t,a){t?t.length<6?a(new Error("密码长度必须是6位以上!")):a():a(new Error("请输入密码"))};return{loading:!1,detail:null,dialogVisible:!1,roleDialogVisible:!1,resetPassDialogVisible:!1,tempOperateType:"new",token:{Authorization:"Bearer ".concat(JSON.parse(sessionStorage.getItem("token")))},form:{account:null,curStatus:0,email:null,name:null,picture:null,phoneNum:null,roles:[]},tempOPerateData:null,roleForm:{role_id:null,user_id:null},rolesList:{rows:[],total:0},resetPasswordForm:{password:null,userId:null},resetPasswordFormRules:{password:[{required:!0,message:"请输入密码"},{validator:e,trigger:"blur"}]}}}},Rl=Ml,Jl=Object(u["a"])(Rl,Vl,El,!1,null,null,null);Jl.options.__file="UserDetail.vue";var Ul=Jl.exports,ql=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},Ql=[],Hl={},Kl=Hl,Wl=Object(u["a"])(Kl,ql,Ql,!1,null,null,null);Wl.options.__file="Index.vue";var Gl=Wl.exports,Xl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("系统日志")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("系统日志")]),a("div",{staticClass:"block-body"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{fixed:"",type:"index",index:e.indexMethod,align:"center","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"create_time",label:"时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.common._convertDate(t.row.create_time,"yyyy年MM月dd日"))+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"history_type",label:"异常对象",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.common._controlTable(t.row.history_type))+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"history_type",label:"异常信息","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.message)+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.handleClick(t.row)}}},[a("i",{staticClass:"fa fa-eye"}),e._v(" 查看")])]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{staticClass:"ce-pagination",attrs:{span:24,"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":function(t){e.handleSizeChange(t)},"current-change":function(t){e.handleCurrentChange(t)}}})],1)]),a("el-dialog",{attrs:{title:"查看详情",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.currentRowDetail?a("div",{staticClass:"block-wrap"},[a("div",{staticClass:"block-body not-auto-expand"},[a("el-form",{ref:"projectForm",staticClass:"show-form",attrs:{model:e.currentRowDetail,size:"middle"}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-list-alt title-icon"}),e._v(" 基本信息 ")]),a("el-form-item",{attrs:{label:"时间："}},[e._v(e._s(e.common._convertDate(e.currentRowDetail.create_time,"yyyy年MM月dd日"))+" ")]),a("el-form-item",{attrs:{label:"异常类型："}},[e._v(e._s(e.currentRowDetail.exception_type)+" ")]),a("el-form-item",{attrs:{label:"异常信息："}},[e._v(e._s(e.currentRowDetail.message)+" ")]),a("el-form-item",{attrs:{label:"url："}},[e._v(e._s(e.currentRowDetail.from_url)+" ")]),a("el-form-item",{attrs:{label:"异常数据："}},[e._v(e._s(e.currentRowDetail.date)+" ")]),a("el-form-item",{attrs:{label:"用户："}},[e._v(e._s(e.currentRowDetail.creator)+" ")])],1)],1)],1)],1)]):e._e()])],1)},Yl=[],Zl={methods:{getQueryList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/exceptionLog"),this._queryListParams()).then(function(t){e.tableData=t.data.data}).catch(function(t){e.$message.error(t)})},_queryListParams:function(){return{params:{pageNum:this.elementPageData.pageNum,pageSize:this.elementPageData.pageSize}}},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getQueryList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getQueryList()},indexMethod:function(e){return 1*e+1},handleClick:function(e){this.dialogVisible=!0,this.currentRowDetail=e}},mounted:function(){this.getQueryList()},data:function(){return{dialogVisible:!1,tableData:{rows:[],total:0},currentRowDetail:null,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault}}}},ec=Zl,tc=(a("8bb2"),Object(u["a"])(ec,Xl,Yl,!1,null,null,null));tc.options.__file="System.vue";var ac=tc.exports,sc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("用户日志")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("用户日志")]),a("div",{staticClass:"block-body"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{fixed:"",type:"index",index:e.indexMethod,align:"center","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"create_time",label:"时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.common._convertDate(t.row.create_time,"yyyy年MM月dd日"))+"\n\t\t\t\t\t\t\t\t")]}}])}),a("el-table-column",{attrs:{prop:"creator",label:"用户",width:"200"}}),a("el-table-column",{attrs:{prop:"history_type",label:"操作对象","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e.common._controlTable(t.row.history_type))+"\n                ")]}}])}),a("el-table-column",{attrs:{prop:"operate",label:"操作类型",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(e.common._controlTable(t.row.operate))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"120","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.handleClick(t.row)}}},[a("i",{staticClass:"fa fa-eye"}),e._v(" 查看")])]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{staticClass:"ce-pagination",attrs:{span:24,"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":function(t){e.handleSizeChange(t)},"current-change":function(t){e.handleCurrentChange(t)}}})],1)]),a("el-dialog",{attrs:{title:"查看详情",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.currentRowDetail?a("div",{staticClass:"block-wrap"},[a("div",{staticClass:"block-body not-auto-expand"},[a("el-form",{ref:"projectForm",staticClass:"show-form",attrs:{model:e.currentRowDetail,size:"middle"}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-list-alt title-icon"}),e._v("基本信息")]),a("el-form-item",{attrs:{label:"时间："}},[a("span",[e._v(e._s(e.common._convertDate(e.currentRowDetail.create_time,"yyyy年MM月dd日")))])]),a("el-form-item",{attrs:{label:"用户："}},[a("span",[e._v(e._s(e.currentRowDetail.creator))])]),a("el-form-item",{attrs:{label:"操作类型："}},[a("span",[e._v(e._s(e.common._controlTable(e.currentRowDetail.history_type)))])]),a("el-form-item",{attrs:{label:"操作对象："}},[a("span",[e._v(e._s(e.common._controlTable(e.currentRowDetail.operate)))])]),a("el-form-item",{attrs:{label:"操作描述："}},[a("ul",e._l(e.toJson(e.currentRowDetail.info).opera,function(t){return a("li",[e._v(e._s(t.column+" : "+(t.oldValue||null)+" ~ "+(t.newValue||null)))])}))])],1)],1)],1)],1)]):e._e()])],1)},rc=[],ic={methods:{toJson:function(e){return new Function("","return "+e)()},getQueryList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/hrLog"),this._queryListParams()).then(function(t){e.tableData=t.data.data}).catch(function(t){e.$message.error(t)})},_queryListParams:function(){return{params:{pageNum:this.elementPageData.pageNum,pageSize:this.elementPageData.pageSize}}},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getQueryList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getQueryList()},indexMethod:function(e){return 1*e+1},handleClick:function(e){this.dialogVisible=!0,this.currentRowDetail=e}},mounted:function(){this.getQueryList()},data:function(){return{dialogVisible:!1,tableData:{rows:[],total:0},currentRowDetail:null,elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault}}}},oc=ic,nc=(a("9971"),Object(u["a"])(oc,sc,rc,!1,null,null,null));nc.options.__file="User.vue";var lc=nc.exports,cc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"page-title"},[e._v("安全日志")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("安全日志")]),a("div",{staticClass:"block-body"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.rows,stripe:""}},[a("el-table-column",{attrs:{fixed:"",type:"index",index:e.indexMethod,align:"center","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"create_time",label:"日期",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.common._convertDate(t.row.create_time,"yyyy年MM月dd日"))+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"creator",label:"账号",width:"200"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.common._controlTable(t.row.type))+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"desc_info",label:"信息","show-overflow-tooltip":""}})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{staticClass:"ce-pagination",attrs:{span:24,"current-page":e.elementPageData.pageNum,"page-sizes":e.elementPageData.defaultData.pageSizes,"page-size":e.elementPageData.defaultData.pageSizeDefault,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.total},on:{"size-change":function(t){e.handleSizeChange(t)},"current-change":function(t){e.handleCurrentChange(t)}}})],1)])])},uc=[],mc={methods:{getQueryList:function(){var e=this;this.axios.get("".concat(this.common.basePath,"/securityLog"),this._queryListParams()).then(function(t){e.tableData=t.data.data}).catch(function(t){e.$message.error(t)})},_queryListParams:function(){return{params:{pageNum:this.elementPageData.pageNum,pageSize:this.elementPageData.pageSize}}},handleCurrentChange:function(e){this.elementPageData.pageNum=e,this.getQueryList()},handleSizeChange:function(e){this.elementPageData.pageSize=e,this.getQueryList()},indexMethod:function(e){return 1*e+1}},mounted:function(){this.getQueryList()},data:function(){return{tableData:{rows:[],total:0},elementPageData:{defaultData:this.common.elementPagination,pageNum:this.common.elementPagination.pageNumDefault,pageSize:this.common.elementPagination.pageSizeDefault}}}},dc=mc,pc=(a("f578"),Object(u["a"])(dc,cc,uc,!1,null,null,null));pc.options.__file="Security.vue";var hc=pc.exports,fc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view")},gc=[],bc={},vc=bc,_c=Object(u["a"])(vc,fc,gc,!1,null,null,null);_c.options.__file="Index.vue";var yc=_c.exports,wc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("h2",{staticClass:"page-title"},[e._v("新增资讯")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("信息表单")]),a("div",{staticClass:"block-body"},[a("information-form",{attrs:{type:"new",refName:"addForm"}})],1)])])},xc=[],Cc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:e.refName,class:"view"==e.type?"show-form":"",attrs:{model:e.informationForm,rules:e.rules,"label-width":"150px",size:"middle"}},[a("el-row",{attrs:{gutter:0}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-vcard-o title-icon"}),e._v("基本信息")]),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"标题：",prop:"aName"}},["view"!=e.type?a("el-input",{model:{value:e.informationForm.aName,callback:function(t){e.$set(e.informationForm,"aName",t)},expression:"informationForm.aName"}}):a("span",[e._v(e._s(e.informationForm.aName))])],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"链接：",prop:"aCover"}},["view"!=e.type?a("el-input",{model:{value:e.informationForm.aCover,callback:function(t){e.$set(e.informationForm,"aCover",t)},expression:"informationForm.aCover"}}):a("span",[e._v(e._s(e.informationForm.aCover))])],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"简介：",prop:"aContent"}},["view"!=e.type?a("el-input",{attrs:{type:"textarea",rows:10},model:{value:e.informationForm.aContent,callback:function(t){e.$set(e.informationForm,"aContent",t)},expression:"informationForm.aContent"}}):a("span",[e._v(e._s(e.informationForm.aContent))])],1)],1)],1),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:24}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-file title-icon"}),e._v("其他信息")]),a("el-form-item",{attrs:{label:"附件材料："}},[a("el-upload",{attrs:{action:e.common.basePath+"/file/-1/uplode",headers:e.token,multiple:"",limit:3,"on-success":e.uploadAttachmentSuccess,"file-list":e.fileAttachment}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1),a("el-row",{attrs:{gutter:0}},[a("h4",{staticClass:"block-depart-title"},[a("i",{staticClass:"fa fa-database title-icon"}),e._v("行业分类")]),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"分类：","label-width":"150px",prop:"atTypes"}},[a("el-tree",{ref:"industryTree",attrs:{data:e.industryTree,"node-key":"id",props:e.treeProps,"show-checkbox":"",accordion:""},on:{"check-change":e.handleCheckChange}})],1)],1)],1),"view"!=e.type?a("div",{staticClass:"text-center"},[a("el-button",{attrs:{size:"middle",type:"primary"},on:{click:function(t){e.submitForm("informationForm")}}},[e._v("提交")]),a("el-button",{attrs:{size:"middle"},on:{click:function(t){e.resetForm("informationForm")}}},[e._v("重置")])],1):e._e()],1)},Fc=[],kc={data:function(){return{formLoading:!1,userList:[],industryTree:[],treeProps:{label:"name",children:"childrens"},token:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},informationForm:{privateFile:"",aName:null,aCover:null,aContent:null,atTypes:null},fileAttachment:[],rules:{aName:[{required:!0,message:"请输入资讯标题",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],aContent:[{required:!0,message:"请输入资讯内容",trigger:"change"}],atTypes:[{required:!0,message:"请选择分类",trigger:"change"}]}}},props:{type:{required:!0,type:String},id:{type:Number},refName:{required:!0,type:String}},components:{"file-list":Sa},mounted:function(){this.init()},methods:{init:function(){var e=this;this.formLoading=!0,this.common.getDictionaryData(6).then(function(t){e.industryTree=t,e.formLoading=!1}),"new"!=this.type&&this.getDetailData()},getDetailData:function(){var e=this;e.formLoading=!0;var t={method:"post",url:"".concat(e.common.basePath,"/a_info/detail/").concat(this.id)};console.log(this.id),e.axios(t).then(function(t){e.informationForm=t.data.data,e.$refs.industryTree.setCheckedKeys(e.informationForm.atTypesVo.map(function(e){return e.id})),e.fileAttachment=JSON.parse(t.data.data.privateFile)||[],e.formLoading=!1}).catch(function(t){e.$message.error(t),e.formLoading=!1})},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.informationForm.atTypes=r},submitForm:function(e){var t=this,a=this;a.$confirm("确定提交吗?","确认提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(s){a.$refs[t.refName].validate(function(s){if(!s)return a.$message.error("请检查表单是否填写正确"),!1;var r={method:"new"==a.type?"post":"put",url:"new"==a.type?"".concat(a.common.basePath,"/a_info/add"):"".concat(a.common.basePath,"/a_info/update/").concat(a.id),data:a[e]};t.handleForm(e),a.axios(r).then(function(e){a.$router.push({name:"InformationManagement"}),a.$message.success(e.data.meta.message)}).catch(function(e){a.$message.error(e)})})})},handleForm:function(e){this[e].privateFile=JSON.stringify(this.fileAttachment)},resetForm:function(e){var t=this;this.fileAttachment=[],this.$refs[this.refName].resetFields(),this.$refs.industryTree.setCheckedNodes([]),this.$nextTick(function(){t[e].atTypes=null,t.$refs[t.refName].clearValidate()}),this.$message.success("已清空")},uploadAttachmentSuccess:function(e,t,a){this.fileAttachment=this.getFileList(a)},getFileList:function(e){var t=JSON.parse(JSON.stringify(e));return t.map(function(e,t){return e.response?{name:e.name,path:e.response.data.path,url:e.url}:e})}}},Sc=kc,Dc=Object(u["a"])(Sc,Cc,Fc,!1,null,null,null);Dc.options.__file="Form.vue";var Pc=Dc.exports,$c={data:function(){return{formLoading:!1,userList:[],industryTree:[],treeProps:{label:"name",children:"childrens"},token:{Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("token"))},projectForm:{additional:"",budget_user:null,cellphone:null,create_basis:"",creator:JSON.parse(sessionStorage.getItem("userData")).id,cur_status:1,feasibility_statement:null,implementation:"",name:null,necessity_statement:null,dateRange:[],plan_begin_time:null,plan_end_time:null,profession:null,raise_money:null,application_money:null,total:null,target:null},fileBasis:[],filePlan:[],fileAttachment:[],rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择预算单位",trigger:"change"}],subject:[{required:!0,message:"请选择预算科目",trigger:"change"}],profession:[{required:!0,message:"请选择行业",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],budget_user:[{required:!0,message:"请选择预算单位",trigger:"change"}]}}},components:{"information-form":Pc},mounted:function(){var e=this;this.formLoading=!0,this.common.getDictionaryData(2).then(function(t){e.industryTree=t,e.formLoading=!1}),this.getUserListData()},methods:{getUserListData:function(){var e=this,t=this;this.formLoading=!0;var a={method:"post",url:"".concat(t.common.basePath,"/hr_users/user/list"),data:{id:6}};t.axios(a).then(function(a){t.userList=a.data.data,e.formLoading=!1}).catch(function(a){t.$message.error(a),e.formLoading=!1})},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.projectForm.profession=r.join(",")},submitForm:function(e){var t=this,a=this;a.$confirm("确定提交吗?","确认提交",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(s){a.$refs[e].validate(function(s){if(!s)return a.$message.error("请检查表单是否填写正确"),!1;var r={method:"post",url:"".concat(a.common.basePath,"/budget"),data:a[e]};t.handleForm(e),a.axios(r).then(function(e){a.$router.push({name:"ProjectManagement"}),a.$message.success(e.data.meta.message)}).catch(function(e){a.$message.error(e)})})})},handleForm:function(e){this[e].dateRange&&this[e].dateRange.length>0&&(this[e].plan_begin_time=this[e].dateRange[0],this[e].plan_end_time=this[e].dateRange[1]),this[e].create_basis=JSON.stringify(this.fileBasis),this[e].implementation=JSON.stringify(this.filePlan),this[e].additional=JSON.stringify(this.fileAttachment),delete this[e].dateRange},resetForm:function(e){this.$refs[e].resetFields()},getFileList:function(e){var t=JSON.parse(JSON.stringify(e));return t.map(function(e,t){return e.response?{name:e.name,path:e.response.data.path,url:e.url}:e})},uploadBasisSuccess:function(e,t,a){this.fileBasis=this.getFileList(a)},uploadPlanSuccess:function(e,t,a){this.filePlan=this.getFileList(a)},uploadAttachmentSuccess:function(e,t,a){this.fileAttachment=this.getFileList(a)}}},Nc=$c,Ic=Object(u["a"])(Nc,wc,xc,!1,null,null,null);Ic.options.__file="Add.vue";var jc=Ic.exports,Tc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailVisible,expression:"!detailVisible"}]},[a("h2",{staticClass:"page-title"},[e._v("资讯管理")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("信息列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-form",{ref:"searchForm",staticClass:"padt10",attrs:{model:e.searchForm,size:"middle","label-width":"100px",inline:""}},[a("el-form-item",{attrs:{label:"名称",prop:"keyWords"}},[a("el-input",{attrs:{placeholder:"请输入资讯名称"},model:{value:e.searchForm.keyWords,callback:function(t){e.$set(e.searchForm,"keyWords",t)},expression:"searchForm.keyWords"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getTableListData("manual")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("el-row",{staticClass:"body-content"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,width:"60",label:"序号",fixed:"left","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"aName",label:"标题","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.common._convertDate(t.row.createTime,"yyyy年MM月dd日"))+"\n                  ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"280","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-center"},[t.row.aCover?a("a",{staticClass:"marr10",attrs:{href:t.row.aCover,target:"view_window"}},[a("el-button",{attrs:{type:"success",size:"small"}},[a("i",{staticClass:"fa fa-eye fa-in-button"}),e._v("查看")])],1):a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.$router.push({name:"InformationDetail",params:{id:t.row.id,type:"view"}})}}},[a("i",{staticClass:"fa fa-eye fa-in-button"}),e._v("查看\n\t\t\t\t\t\t\t\t\t\t\t")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.$router.push({name:"InformationDetail",params:{id:t.row.id,type:"edit"}})}}},[a("i",{staticClass:"fa fa-edit fa-in-button"}),e._v("编辑\n                      ")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.deleteInformation(t.row.id)}}},[a("i",{staticClass:"fa fa-trash fa-in-button"}),e._v("删除\n                      ")])],1)]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":e.currentPerPage,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])])},Ac=[],zc={data:function(){return{loading:!1,tableData:[],multipleSelection:[],currentPage:1,currentPerPage:10,total:0,searchForm:{keyWords:null},detailVisible:!1,mode:"view",itemId:null,industryTree:[],treeProps:{label:"name",children:"childrens"}}},components:{"information-form":Pc},watch:{editDialogVisible:{handler:function(e,t){e||e==t||this.resetForm("expertForm")},deep:!0}},mounted:function(){var e=this;e.common.getDictionaryData(2).then(function(t){e.industryTree=t}),e.getTableListData()},methods:{indexMethod:function(e){return e+1+(this.currentPage-1)*this.currentPerPage},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.currentPerPage=e,this.getTableListData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableListData()},getTableListData:function(e){var t=this;this.loading=!0,"manual"==e&&(this.currentPage=1),this.searchForm.pageNum=this.currentPage,this.searchForm.pageSize=this.currentPerPage;var a={method:"post",url:"".concat(this.common.basePath,"/a_info/list"),data:this.searchForm};this.axios(a).then(function(e){t.tableData=e.data.data.rows,t.total=e.data.data.total,t.loading=!1}).catch(function(e){t.$message.error(e),t.loading=!1})},resetSearchForm:function(){this.$refs.searchForm.resetFields()},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.expertForm.profession=r.join(",")},tableItemClick:function(e,t){this.mode=e,this.itemId=t,this.detailVisible=!0,document.getElementsByClassName("content-wrap")[0].scrollTo(0,0)},deleteInformation:function(e){var t=this,a={method:"patch",url:"".concat(t.common.basePath,"/a_info/delete/").concat(e),data:{}};t.$confirm("删除后需要重新添加","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.getTableListData()}).catch(function(e){t.$message.error(e)})})}}},Bc=zc,Lc=Object(u["a"])(Bc,Tc,Ac,!1,null,null,null);Lc.options.__file="Management.vue";var Oc=Lc.exports,Vc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("el-button",{staticClass:"back-button",attrs:{type:"primary",icon:"el-icon-back",size:"middle"},on:{click:function(t){e.common.backForward()}}},[e._v("返回")]),a("h2",{staticClass:"page-title"},[e._v("\n    "+e._s("view"==e.type?"资讯详情":"编辑资讯")+"\n  ")]),a("div",{staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v(e._s("view"==e.type?"资讯详情":"资讯内容表单"))]),a("div",{staticClass:"block-body no-bottom"},["edit"==e.type?a("information-form",{attrs:{type:e.type,id:e.id,refName:"type == 'view' ? 'viewForm' : 'editForm'"}}):a("div",[a("h3",{staticClass:"text-center information-title"},[e._v(e._s(e.detailData.aName))]),a("p",{staticClass:"information-content"},[e._v(e._s(e.detailData.aContent))]),a("el-form",[a("el-form-item",{attrs:{label:"附件列表："}},[e.privateFile&&e.privateFile.length>0?a("file-list",{attrs:{fileList:e.privateFile}}):e._e()],1)],1)],1)],1)])],1)},Ec=[],Mc={data:function(){return{formLoading:!1,id:this.$route.params.id,type:this.$route.params.type,detailData:{},privateFile:[]}},components:{"information-form":Pc,"file-list":Sa},watch:{mode:{handler:function(e,t){this.init()},deep:!0},id:{handler:function(e,t){console.log(e)},deep:!0}},mounted:function(){this.init()},methods:{init:function(){"view"==this.type&&this.getDetailData()},getDetailData:function(){var e=this;e.formLoading=!0;var t={method:"post",url:"".concat(e.common.basePath,"/a_info/detail/").concat(this.id)};console.log(this.id),e.axios(t).then(function(t){e.detailData=t.data.data,e.privateFile=JSON.parse(t.data.data.privateFile),console.log(e.privateFile),e.formLoading=!1}).catch(function(t){e.$message.error(t),e.formLoading=!1})}}},Rc=Mc,Jc=(a("c25a"),Object(u["a"])(Rc,Vc,Ec,!1,null,"1aa850a9",null));Jc.options.__file="Detail.vue";var Uc=Jc.exports,qc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailVisible,expression:"!detailVisible"}]},[a("h2",{staticClass:"page-title"},[e._v("资讯管理")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"block-wrap"},[a("div",{staticClass:"block-body"},[a("el-row",{attrs:{gutter:20}},e._l(e.industryTree,function(t,s){return e.industryTree?a("el-col",{key:s+"行业树",attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("h4",{staticClass:"block-title"},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\t"),a("i",{staticClass:"el-icon-d-arrow-right fr more",on:{click:function(a){e.$router.push({name:"InformationMoreColumn",params:{id:t.id}})}}},[e._v("更多")])]),a("el-row",{staticClass:"body-content"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"aName",label:"标题","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"",width:"100","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-center"},[t.row.aCover?a("a",{attrs:{href:t.row.aCover,target:"view_window"}},[a("el-button",{attrs:{type:"success",size:"small"}},[a("i",{staticClass:"fa fa-eye fa-in-button"}),e._v("查看\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1):a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.$router.push({name:"InformationDetail",params:{id:t.row.id,type:"view"}})}}},[a("i",{staticClass:"fa fa-eye fa-in-button"}),e._v("查看\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1)]}}])})],1)],1)],1)],1)]):e._e()}))],1)])])])},Qc=[],Hc=(a("f400"),{data:function(){return Object(la["a"])({loading:!1,tableData:[],tableData_:[{time:"2017年08月31日",name:"五部门印发通知推进落实政务信息系统整合共享方案",link:"http://www.cac.gov.cn/2017-08/31/c_1121575524.htm"},{time:"2017年05月19日",name:'网信办等三部门联合发文推进"十三五"信息化标准工作',link:"http://www.cac.gov.cn/2017-05/19/c_1121003521.htm"}],multipleSelection:[],currentPage:1,currentPerPage:10,total:0,searchForm:{keyWords:null,pageNum:null,currentPerPage:null,atType:null},detailVisible:!1,mode:"view",itemId:null,industryTree:[],treeProps:{label:"name",children:"childrens"},idArr:null},"tableData_",new Map)},components:{"information-form":Pc},watch:{editDialogVisible:{handler:function(e,t){e||e==t||this.resetForm("expertForm")},deep:!0}},mounted:function(){var e=this;e.getDictionary()},methods:{indexMethod:function(e){return e+1+(this.currentPage-1)*this.currentPerPage},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.currentPerPage=e,this.getTableListData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableListData()},getDictionary:function(){var e=this;this.common.getDictionaryData(6).then(function(t){for(var a=function(a){console.log("我是第介个",a),e.industryTree.push(t[a]),e.getTableListData(t[a]).then(function(s){t[a].tableData=s.data.data.rows,e.industryTree.splice(a,t[a]),e.loading=!1,console.log(t[a],"添加了一个列表")}).catch(function(t){e.$message.error(t)})},s=0;s<t.length;s++)a(s);console.log(t,"看见哈萨克接电话")})},getTableListData:function(e){var t=this;this.loading=!0,this.searchForm.pageNum=this.currentPage,this.searchForm.pageSize=this.currentPerPage,this.searchForm.atType=e.id;var a={method:"post",url:"".concat(this.common.basePath,"/a_info/list"),data:{pageNum:this.currentPage,pageSize:this.currentPerPage,atType:e.id}};return console.log(a.data),new Promise(function(e,s){t.axios(a).then(function(t){e(t)}).catch(function(e){s(e)})})},resetSearchForm:function(){this.$refs.searchForm.resetFields()},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.expertForm.profession=r.join(",")},tableItemClick:function(e,t){this.mode=e,this.itemId=t,this.detailVisible=!0,document.getElementsByClassName("content-wrap")[0].scrollTo(0,0)},deleteInformation:function(e){var t=this,a={method:"patch",url:"".concat(t.common.basePath,"/a_info/delete/").concat(e),data:{}};t.$confirm("删除后需要重新添加","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.getTableListData()}).catch(function(e){t.$message.error(e)})})}}}),Kc=Hc,Wc=(a("e2a9"),Object(u["a"])(Kc,qc,Qc,!1,null,"83315b7c",null));Wc.options.__file="Column.vue";var Gc=Wc.exports,Xc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailVisible,expression:"!detailVisible"}]},[a("h2",{staticClass:"page-title"},[e._v("资讯管理")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"block-wrap"},[a("h4",{staticClass:"block-title"},[e._v("资讯列表")]),a("div",{staticClass:"block-body"},[a("div",{staticClass:"body-operation"},[a("el-form",{ref:"searchForm",staticClass:"padt10",attrs:{model:e.searchForm,size:"middle","label-width":"100px",inline:""}},[a("el-form-item",{attrs:{label:"名称",prop:"keyWords"}},[a("el-input",{attrs:{placeholder:"请输入资讯名称"},model:{value:e.searchForm.keyWords,callback:function(t){e.$set(e.searchForm,"keyWords",t)},expression:"searchForm.keyWords"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.getTableListData("manual")}}},[e._v("搜索")]),a("el-button",{attrs:{type:"default"},on:{click:e.resetSearchForm}},[e._v("重置")])],1)],1)],1),a("el-row",{staticClass:"body-content"},[a("el-col",{attrs:{span:24}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,width:"60",label:"序号",fixed:"left","class-name":"border-index"}}),a("el-table-column",{attrs:{prop:"aName",label:"标题","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e.common._convertDate(t.row.createTime,"yyyy年MM月dd日"))+"\n                  ")]}}])}),a("el-table-column",{attrs:{prop:"creator",label:"创建者"}}),a("el-table-column",{attrs:{label:"操作",width:"180","header-align":"center",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-center"},[t.row.aCover?a("a",{attrs:{href:t.row.aCover,target:"view_window"}},[a("el-button",{attrs:{type:"success",size:"small"}},[a("i",{staticClass:"fa fa-eye fa-in-button"}),e._v("查看\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1):a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.$router.push({name:"InformationDetail",params:{id:t.row.id,type:"view"}})}}},[a("i",{staticClass:"fa fa-eye fa-in-button"}),e._v("查看\n\t\t\t\t\t\t\t\t\t\t\t")])],1)]}}])})],1)],1)],1)],1),a("div",{staticClass:"block-bottom"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":e.currentPerPage,background:"",small:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])])},Yc=[],Zc={data:function(){return{loading:!1,tableData:[],multipleSelection:[],currentPage:1,currentPerPage:10,total:0,searchForm:{keyWords:null},detailVisible:!1,mode:"view",itemId:null,industryTree:[],treeProps:{label:"name",children:"childrens"}}},components:{"information-form":Pc},watch:{editDialogVisible:{handler:function(e,t){e||e==t||this.resetForm("expertForm")},deep:!0}},mounted:function(){var e=this;e.common.getDictionaryData(2).then(function(t){e.industryTree=t}),e.getTableListData()},methods:{indexMethod:function(e){return e+1+(this.currentPage-1)*this.currentPerPage},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.currentPerPage=e,this.getTableListData()},handleCurrentChange:function(e){this.currentPage=e,this.getTableListData()},getTableListData:function(e){var t=this;this.loading=!0,"manual"==e&&(this.currentPage=1),this.searchForm.pageNum=this.currentPage,this.searchForm.pageSize=this.currentPerPage,this.searchForm.atType=this.$route.params.id;var a={method:"post",url:"".concat(this.common.basePath,"/a_info/list"),data:this.searchForm};this.axios(a).then(function(e){t.tableData=e.data.data.rows,t.total=e.data.data.total,t.loading=!1}).catch(function(e){t.$message.error(e),t.loading=!1})},resetSearchForm:function(){this.$refs.searchForm.resetFields()},handleCheckChange:function(e,t,a){var s=JSON.parse(JSON.stringify(this.$refs.industryTree.getCheckedNodes())),r=s.map(function(e){return e.id});this.expertForm.profession=r.join(",")},tableItemClick:function(e,t){this.mode=e,this.itemId=t,this.detailVisible=!0,document.getElementsByClassName("content-wrap")[0].scrollTo(0,0)},deleteInformation:function(e){var t=this,a={method:"patch",url:"".concat(t.common.basePath,"/a_info/delete/").concat(e),data:{}};t.$confirm("删除后需要重新添加","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(e){t.axios(a).then(function(e){t.$message.success(e.data.meta.message),t.getTableListData()}).catch(function(e){t.$message.error(e)})})}}},eu=Zc,tu=Object(u["a"])(eu,Xc,Yc,!1,null,null,null);tu.options.__file="MoreColumn.vue";var au=tu.exports;s["default"].use(ie["a"]);var su=new ie["a"]({mode:"history",base:"/web/",routes:[{path:"/",name:"Dashboard",component:it,meta:{showNav:!0}},{path:"/login",name:"LoginIndex",navName:"登录",component:ht,meta:{showNav:!1}},{path:"/reg",name:"RegIndex",navName:"注册",component:yt,meta:{showNav:!1}},{path:"/notices",name:"Notices",navName:"相关通知",component:At,meta:{showNav:!0}},{path:"/information",name:"Information",navName:"政策法规",navIcon:"project",component:yc,meta:{showNav:!0},children:[{path:"column",name:"InformationColumn",navName:"政策法规",component:Gc,redirect:"",meta:{showNav:!0}},{path:"management",name:"InformationManagement",navName:"信息管理",component:Oc,redirect:"",meta:{showNav:!0}},{path:"add",name:"AddInformation",navName:"新增信息",component:jc,redirect:"",meta:{showNav:!0}},{path:"detail/:id/:type",name:"InformationDetail",navName:"详情",component:Uc,redirect:"",meta:{showNav:!0}},{path:"more_column/:id",name:"InformationMoreColumn",navName:"政策法规0",component:au,redirect:"",meta:{showNav:!0}}]},{path:"/project_set_up",name:"ProjectSetUpIndex",navName:"申报项目管理",navIcon:"apply",component:Et,meta:{showNav:!0},children:[{path:"",name:"DeclareNew",navName:"新建申报项目",component:ia,meta:{showNav:!0}},{path:"declare",navName:"补充申报材料",component:Qt,meta:{showNav:!0},children:[{path:"",name:"DeclareList",navName:"项目申报列表",component:Zt,meta:{showNav:!0}},{path:"form",name:"DeclareForm",navName:"项目申报表单",component:ia,meta:{showNav:!0}},{path:"form_again/:id/:type/:budgetRotation/:expertRotation",name:"DeclareAgain",navName:"重新项目申报表单",component:da,meta:{showNav:!0}},{path:"detail/:id",name:"DeclareDetail",navName:"项目申报详情",component:La,meta:{showNav:!0}}]},{path:"acceptance",navName:"项目受理",component:Ja,meta:{showNav:!0},children:[{path:"",name:"AcceptanceList",navName:"项目受理列表",component:Wa,meta:{showNav:!0}},{path:"project",name:"AcceptanceProject",navName:"项目受理表单",component:ts,meta:{showNav:!0}}]},{path:"pretrial",navName:"项目预审",component:ns,meta:{showNav:!0},children:[{path:"",name:"PretrialList",navName:"项目预审",component:ps,meta:{showNav:!0}},{path:"expert",name:"PretrialExpert",navName:"项目预审",component:_s,meta:{showNav:!0}},{path:"expert_group",name:"PretrialExpertGroup",navName:"项目预审",component:ks,meta:{showNav:!0}}]},{path:"review",navName:"专家评审",component:Is,redirect:"",meta:{showNav:!0},children:[{path:"",name:"ReviewList",navName:"待评审项目列表",component:Ls,redirect:"",meta:{showNav:!0}},{path:"record",name:"ReviewRecord",navName:"会议评审结果录入",component:Js,redirect:"",meta:{showNav:!0}},{path:"approval",name:"ReviewApproval",navName:"评审修改结果审批",component:Ws,redirect:"",meta:{showNav:!0}}]},{path:"leader",navName:"网信会议",component:tr,redirect:"",meta:{showNav:!0},children:[{path:"",name:"LeaderList",navName:"待领导审批项目列表",component:nr,redirect:"",meta:{showNav:!0}},{path:"record",name:"LeaderRecord",navName:"会议材料录入",component:pr,redirect:"",meta:{showNav:!0}},{path:"approval",name:"LeaderApproval",navName:"领导会议审批",component:_r,redirect:"",meta:{showNav:!0}}]},{path:"financial",navName:"财政意见",component:kr,redirect:"",meta:{showNav:!0},children:[{path:"",name:"FinancialList",navName:"待财政审批列表",component:Ir,redirect:"",meta:{showNav:!0}},{path:"approval/:id",name:"FinancialApproval",navName:"财政审批",component:Lr,redirect:"",meta:{showNav:!0}}]},{path:"file",navName:"审核财政意见",component:Jr,redirect:"",meta:{showNav:!0},children:[{path:"",name:"FileList",navName:"待归档项目列表",component:Wr,redirect:"",meta:{showNav:!0}},{path:"project/:id",name:"FileProject",navName:"项目归档",component:ti,redirect:"",meta:{showNav:!0}}]},{path:"track",navName:"进度汇报",component:ni,redirect:"",meta:{showNav:!0},children:[{path:"",name:"ApprovalList",navName:"项目审批列表",component:pi,redirect:"",meta:{showNav:!0}},{path:"track_list/:id",name:"TrackList",navName:"进度汇报",component:_i,redirect:"",meta:{showNav:!0}},{path:"track_list_",name:"TrackList_",navName:"项目跟踪图",component:Di,redirect:"",meta:{showNav:!0}}]},{path:"director",name:"ProjectDirector",navName:"项目查询",component:Xi,redirect:"",meta:{showNav:!0}},{path:"reporting",name:"ProjectReporting",navName:"我的项目查询",component:ho,redirect:"",meta:{showNav:!0}},{path:"total",name:"Dashboard",navName:"统计报表",component:it,redirect:"",meta:{showNav:!0}}]},{path:"/project_schedule",name:"ProjectScheduleIndex",navName:"项目进度管理",navIcon:"process",component:yo,meta:{showNav:!0},children:[{path:"report",navName:"项目进度汇报",component:So,redirect:"",meta:{showNav:!0},children:[{path:"",name:"ReportList",navName:"项目进度汇报列表",component:jo,redirect:"",meta:{showNav:!0}},{path:"detail",name:"ReportDetail",navName:"项目进度汇报详情",component:Oo,redirect:"",meta:{showNav:!0}}]},{path:"supervise",name:"ScheduleSupervise",navName:"项目进度监管",component:Uo,redirect:"",meta:{showNav:!0}}]},{path:"/project_library",name:"ProjectLibraryIndex",navName:"项目库管理",navIcon:"lib",component:Go,meta:{showNav:!0},children:[{path:"management",name:"ProjectManagement",navName:"项目管理",component:fn,redirect:"",meta:{showNav:!0}},{path:"add",name:"ProjectAdd",navName:"新建项目",component:an,redirect:"",meta:{showNav:!0}},{path:"query",name:"ProjectQuery",navName:"项目库查询",component:wn,redirect:"",meta:{showNav:!0}}]},{path:"/expert_library",name:"ExpertLibraryIndex",navName:"专家库管理",navIcon:"expert",component:Dn,meta:{showNav:!0},children:[{path:"expert",name:"ExpertManagement",navName:"专家管理",component:Vn,redirect:"",meta:{showNav:!0}},{path:"add",name:"ExpertAdd",navName:"新增专家",component:Tn,redirect:"",meta:{showNav:!0}}]},{path:"/system_management",name:"SystemManagementIndex",navName:"系统管理",navIcon:"system",component:Gn,meta:{showNav:!0},children:[{path:"dictionary",name:"SystemDictionary",navName:"字典管理",component:al,redirect:"",meta:{showNav:!0}},{path:"menu",name:"SystemMenu",navName:"菜单管理",component:hl,redirect:"",meta:{showNav:!0}},{path:"organization",name:"SystemOrganization",navName:"组织管理",component:yl,redirect:"",meta:{showNav:!0}},{path:"role",name:"SystemRole",navName:"角色管理",component:jl,redirect:"",meta:{showNav:!0}},{path:"user",navName:"用户管理",component:Gn,redirect:"",meta:{showNav:!0},children:[{path:"",name:"SystemUser",navName:"用户管理",component:Ol,redirect:"",meta:{showNav:!0}},{path:"detail/:id",name:"SystemUserDetail",navName:"用户详情",component:Ul,redirect:"",meta:{showNav:!0}}]},{path:"jurisdiction",name:"SystemJurisdiction",navName:"权限管理",component:ll,redirect:"",meta:{showNav:!0}}]},{path:"/log_management",name:"LogManagementIndex",navName:"日志管理",navIcon:"log",component:Gl,meta:{showNav:!0},children:[{path:"user",name:"LogUser",navName:"用户日志",component:lc,redirect:"",meta:{showNav:!0}},{path:"system",name:"LogSystem",navName:"系统日志",component:ac,redirect:"",meta:{showNav:!0}},{path:"security",name:"LogSecurity",navName:"安全日志",component:hc,redirect:"",meta:{showNav:!0}}]}]}),ru=a("2f62");s["default"].use(ru["a"]);var iu=new ru["a"].Store({state:{noticeNum:null,timeInterval:null,time:5,interval:!0},mutations:{change:function(e,t){e.noticeNum=t},changeInterval:function(e,t){e.inteval=t},increaseTime:function(e){e.timeInterval?console.log("已有正在开启的计时器"):e.timeInterval=setInterval(function(){e.time>0?e.time--:clearInterval(e.timeInterval),console.log(e.time)},1e3)},resetTime:function(e,t){clearInterval(e.timeInterval),e.timeInterval=null,e.time=t||5}},actions:{}}),ou=a("5c96"),nu=a.n(ou);a("c69f");s["default"].use(nu.a);a("51da"),a("7f10");var lu=new s["default"]({router:su}),cu={basePath:"".concat(window.location.origin,"/api"),webSocketSever:"".concat(window.location.host,"/api/websocket"),ws:{},noticeNum:null,picsBasePath:"".concat(window.location.origin,"/pics"),elementPagination:{pageSizes:[10,20,30],pageSizeDefault:10,pageNumDefault:1},startInterval:!1,emailReg:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,mobileReg:/^1[34578]\d{9}$/,traverseTree:function(e){if(e)if(e.childrens&&e.childrens.length>0){var t=0;for(t=0;t<e.childrens.length;t++)this.traverseTree(e.childrens[t])}else delete e.childrens},getDictionaryData:function(e){var t={method:"get",url:"".concat(this.basePath,"/contrast/all/tree"),params:{typeId:e}},a=new Promise(function(e,a){lu.axios(t).then(function(t){e(t.data.data)}).catch(function(e){lu.$message.error(e),a([])})});return a},_convertDate:function(e,t){return e?new Date(e).Format(t):"无"},showStatusText:function(e){switch(e){case 1:return{name:"补充材料阶段",stageColor:"stageColor1"};case 2:return{name:"项目受理阶段",stageColor:"stageColor2"};case 3:return{name:"专家预审阶段",stageColor:"stageColor3"};case 4:return{name:"专家评审阶段",stageColor:"stageColor4"};case 5:return{name:"网信会议阶段",stageColor:"stageColor5"};case 6:return{name:"提交财政意见阶段",stageColor:"stageColor6"};case 7:return{name:"审核财政意见阶段",stageColor:"stageColor7"};case 8:return{name:"项目实施阶段",stageColor:"stageColor8"};case 9:return{name:"已完结",stageColor:"stageColor9"};case 19:return{name:"已关闭",stageColor:"stageColor19"};default:return{name:"全部",stageColor:"stageColor-none"}}},projectStatusData:function(){return[{id:1,name:"补充材料阶段"},{id:2,name:"项目受理阶段"},{id:3,name:"专家预审阶段"},{id:4,name:"专家评审阶段"},{id:5,name:"网信会议阶段"},{id:6,name:"提交财政意见阶段"},{id:7,name:"审核财政意见阶段"},{id:8,name:"项目实施阶段"},{id:9,name:"已完结"},{id:19,name:"已关闭"}]},downloadFileByUrl:function(e){window.open(e)},_controlTable:function(e){var t,a=JSON.parse(sessionStorage.getItem("controlTable"));return a?(a.forEach(function(a){e==a.id&&(t=a.name)}),t||"无"):"无"},backForward:function(){var e=sessionStorage.getItem("historyPath")||"/";lu.$router.push({path:e})}};Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},s["default"].config.productionTip=!1,s["default"].prototype.common=cu,ct.a.defaults.headers["X-Requested-With"]="XMLHttpRequest",s["default"].prototype.axios=ct.a,sessionStorage.getItem("token")&&(s["default"].prototype.axios.defaults.headers.common["Authorization"]="Bearer ".concat(JSON.parse(sessionStorage.getItem("token")))),s["default"].prototype.axios.interceptors.response.use(function(e){return"blob"!=e.config.responseType?"401"==e.data.meta.code?(setTimeout(function(){window.location.href=window.location.origin+"/web/login"},1500),Promise.reject("未登陆或登陆信息失效!")):0!=e.data.meta.code?Promise.reject(e.data.meta.message):e:e},function(e){return"403"==e.response.status?Promise.reject("权限不足!"):Promise.reject("请求失败!")}),new s["default"]({router:su,store:iu,render:function(e){var t=this.$route.meta,a={};return t&&t.showNav?a.layout="nav-layout":a.layout="blank-layout",e(re,{props:a})}}).$mount("#app")},"579d":function(e,t,a){"use strict";var s=a("8cd8"),r=a.n(s);r.a},"58e1":function(e,t,a){"use strict";var s=a("e72d"),r=a.n(s);r.a},"5aa4":function(e,t,a){},"5dac":function(e,t,a){"use strict";var s=a("bf6f"),r=a.n(s);r.a},"5efe":function(e,t,a){},"5f36":function(e,t,a){},"5fec":function(e,t,a){},"62ef":function(e,t,a){},6414:function(e,t,a){},"659e":function(e,t,a){},"65a8":function(e,t,a){},"6c8a":function(e,t,a){},"7d70":function(e,t,a){"use strict";var s=a("f9e3"),r=a.n(s);r.a},"7fb9":function(e,t,a){"use strict";var s=a("524d"),r=a.n(s);r.a},8017:function(e,t,a){},8021:function(e,t,a){},8347:function(e,t,a){},"83eb":function(e,t,a){"use strict";var s=a("5efe"),r=a.n(s);r.a},"85eb":function(e,t,a){},8825:function(e,t,a){},8977:function(e,t,a){"use strict";var s=a("5316"),r=a.n(s);r.a},"8a6a":function(e,t,a){"use strict";var s=a("9013"),r=a.n(s);r.a},"8bb2":function(e,t,a){"use strict";var s=a("a3b4"),r=a.n(s);r.a},"8cd8":function(e,t,a){},"8dc7":function(e,t,a){"use strict";var s=a("5fec"),r=a.n(s);r.a},9013:function(e,t,a){},9304:function(e,t,a){},"938a":function(e,t,a){"use strict";var s=a("1520"),r=a.n(s);r.a},"972d":function(e,t,a){e.exports=a.p+"a5f65a74a9803a5ca13e8d7087bad0d0.jpg"},9780:function(e,t,a){},9795:function(e,t,a){"use strict";var s=a("d356"),r=a.n(s);r.a},9971:function(e,t,a){"use strict";var s=a("4cd8"),r=a.n(s);r.a},"9a1a":function(e,t,a){},"9d14":function(e,t,a){},"9fa8":function(e,t,a){"use strict";var s=a("29cc"),r=a.n(s);r.a},a101:function(e,t,a){"use strict";var s=a("dd62"),r=a.n(s);r.a},a10b:function(e,t,a){"use strict";var s=a("a4b0"),r=a.n(s);r.a},a2df:function(e,t,a){},a32e:function(e,t,a){e.exports=a.p+"6b3f398d444793f8f0bb0abe789c4c50.jpg"},a3b4:function(e,t,a){},a4b0:function(e,t,a){},a6d0:function(e,t,a){e.exports=a.p+"2fd088859dc634303b35b595b2799919.jpg"},a826:function(e,t,a){"use strict";var s=a("9a1a"),r=a.n(s);r.a},a853:function(e,t,a){},ac9b:function(e,t,a){"use strict";var s=a("c0bf"),r=a.n(s);r.a},af48:function(e,t,a){"use strict";var s=a("6414"),r=a.n(s);r.a},b1ba:function(e,t,a){},b34b:function(e,t,a){},b95e:function(e,t,a){"use strict";var s=a("6c8a"),r=a.n(s);r.a},ba69:function(e,t,a){},bc39:function(e,t,a){"use strict";var s=a("1de5"),r=a.n(s);r.a},bccc:function(e,t,a){},bd31:function(e,t,a){},be73:function(e,t,a){"use strict";var s=a("bd31"),r=a.n(s);r.a},bf6f:function(e,t,a){},bfe2:function(e,t,a){"use strict";var s=a("65a8"),r=a.n(s);r.a},c0a1:function(e,t,a){"use strict";var s=a("206e"),r=a.n(s);r.a},c0bf:function(e,t,a){},c25a:function(e,t,a){"use strict";var s=a("5aa4"),r=a.n(s);r.a},c34c:function(e,t,a){"use strict";var s=a("9780"),r=a.n(s);r.a},c419:function(e,t,a){"use strict";var s=a("096c"),r=a.n(s);r.a},c531:function(e,t,a){},c69f:function(e,t,a){},c715:function(e,t,a){"use strict";var s=a("85eb"),r=a.n(s);r.a},ca03:function(e,t,a){"use strict";var s=a("3109"),r=a.n(s);r.a},ca5d:function(e,t,a){"use strict";var s=a("3dfd"),r=a.n(s);r.a},ce39:function(e,t,a){"use strict";var s=a("3c0a"),r=a.n(s);r.a},cf5c:function(e,t,a){"use strict";var s=a("62ef"),r=a.n(s);r.a},d0d8:function(e,t,a){"use strict";var s=a("3ac8"),r=a.n(s);r.a},d356:function(e,t,a){},db4f:function(e,t,a){"use strict";var s=a("efa4"),r=a.n(s);r.a},dd62:function(e,t,a){},df51:function(e,t,a){"use strict";var s=a("bccc"),r=a.n(s);r.a},df63:function(e,t,a){"use strict";var s=a("b1ba"),r=a.n(s);r.a},e056:function(e,t,a){"use strict";var s=a("8017"),r=a.n(s);r.a},e077:function(e,t,a){"use strict";var s=a("1381"),r=a.n(s);r.a},e0a8:function(e,t,a){e.exports=a.p+"e99ae34e0489a06fc5dc91d8774f08cb.png"},e21a:function(e,t,a){"use strict";var s=a("f67b"),r=a.n(s);r.a},e2a9:function(e,t,a){"use strict";var s=a("3342"),r=a.n(s);r.a},e2af:function(e,t,a){"use strict";var s=a("659e"),r=a.n(s);r.a},e446:function(e,t,a){"use strict";var s=a("8347"),r=a.n(s);r.a},e467:function(e,t,a){},e498:function(e,t,a){"use strict";var s=a("a2df"),r=a.n(s);r.a},e4af:function(e,t,a){},e564:function(e,t,a){},e72d:function(e,t,a){},e91b:function(e,t,a){"use strict";var s=a("8021"),r=a.n(s);r.a},ea54:function(e,t,a){"use strict";var s=a("0310"),r=a.n(s);r.a},efa4:function(e,t,a){},f20e:function(e,t,a){},f475:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACAAIADASIAAhEBAxEB/8QAGwABAAIDAQEAAAAAAAAAAAAAAAYHAQUIBAP/xAA2EAABAwMCBAQFAwIHAQAAAAABAgMEAAURBhIHITFREyJBcRRhgZGhFTJCCBcWI1JiscHRJP/EABkBAQADAQEAAAAAAAAAAAAAAAACAwQFAf/EAB0RAQACAwEBAQEAAAAAAAAAAAABAgMRITESBGH/2gAMAwEAAhEDEQA/AJ3SlKyOSUpSgUpWrvWoLdp+OmRclutMqOA4llS0g9iQMD6169iJmdQ2lKq678XI8OUldqMa4xVdWltuMuoPvzChUdncXrsbsJduQGoykJC4kjDiNw6lJABGeVSjHMro/PeV50qgonFO6wLquRGZR8C6dy4DiytCFfy8MnmkE88cwKsqBxO0/NgNSVurjqLiW3mnMZZznCj3TnlkdM8wKTSYeXwXqmdKwkhSQpJBBGQQc5FZqKkpSleBSlKBSlKBSlYUSEkpSVEDISDjPyoNFq6/jTtjclJdjIfUdrXxCiBnvtHNWOw+uK52u9/ul7kqeuM56QonopWEj2T0Fe7Wd1uF11JJcuD7S3G1FCUMub22h/pSRyOPUjqajtaKV1DoYsUUj+lKUqa4pmlKCwLDxXu9mgRoDkWNLjR07Ele5K9voNwPp7VdNhvCL7aGbg22ltLg/al5LmPqn/g4NcrVYOgOILmnnW7dPSlVscVzWlIC2Sf5ZH7h3B59qrvTccZ82GJjdY6vqlYQtLiErQoKQoApUDkEHoRWapYSlKV4FKUoFRHiRcZdt0dJciPoYLhDSnCfNg/xQP8AUe/oMmpdVUcaXn1M2yK2FFlIW+5gchzCE5+5+9TpG5WYY3eFNmlKsrTXBq/3m6Ialf8AxwksNSJEgpKikLTuCEj+S9pGR0GedaHSVrSuhdNcA40ya5PvxejQivLFuQ5l3Z6F1wdCepCe/UdKln9jdLSZypE5Dq2k+VmJHPgstJ7cvMo91FRJoOTqV2dG4V6HiNhDemoCgPV1BcP3UTXzn8JNDXBktuaeitZ/lH3NKH1SRQca0rpXWXAiyJ01Id0008zc2AXUBx9Sw8AOaOfQn0PeuaiMGg6N4aSJT+iYYkkL8PKGnArIU36D3HNJHyqXVXnB4PjSbxW6hbBkqLYBO5BwNwI+xHvVh1mt65uWNXkpSlRVlKUoFQfitEek6KdVHZK1NvIW4UjmltOSST2BxU4qI63upVGOmYVvkXG6XRhaW2GOqU4/efbH4PSpV94sxb+4050QhTiwhIJUogAfOu9YTPgQmGT1bbSn7ACuP9D6NnzuJNrss+I9HW28H5LbqSkpbR5ieffGB710Br7iFftOTBDsOk59yWjCnpSo7hYAPPCSkeY9z0HzrS6SyKVUVk46xJH+VetOXW3upHnW0yXkJ9+QUPsasux363ajtiLja3y9GWSkKKFIII6ghQBBFBsqVrr3fbfp22LuN0f8GMghJUEKWSTyAASCSTVZ3vjrEjnwrLpy63B5Q8inWSyhXzHIqP2FBbihlJHcYrgiW2WpbzahgpcUkj2NdYaB4hX7UUwwr9pOfbVrypmUmM4GCBzwoqHlPY9D8qobXWh7hG4o3CyWuK5LckuGTGaZG5Xhryr8cx9KCweElvehaN8V1SCiW+Xm9pzhOAnn2OUmp5UP0Ncksxv8LyrbJttytjKfEjyOZWk894PzJ/NTCs1t765uXf3OylKVFWUpSgVBtTw1I19Y3TIXHYu7K7Q683+5veeRHvux7Zqc1EuIsF+Rpf42ICZVsfRNbA/2Hn+Of0qVJ1ZZht83h4tC/pi/6iLw3aYvw0OLFeZQ3kkbkFCFEZ6AnOBVy6k03D1PAaiTVvJbaeQ8PDXjcUn9qh0UkjIIPfvVKWOVAt/HGzX+C4f07VMVbqT12POZC0fRxI9s10JWl0lRWjgs5aNU3O7w9QPxEub1QExklJYUVZG8Z2rSOm3oQfSphdS6jXulW1uZKo03xNuUpUQlrnjPfNS2oEq8M3nX+nnmGnEIYVdIuV485b8NKlDB6ZB+1BOJKHVx3EsuJbdKCELUncEqxyJHrg+lVPduCn6rqi2XZ++vyUNbFTxKBWqSpJySOeEpV024wB0q3aUGn03p2Lpm1mBEceW2XVOkur3HKj0A6JAGAAOXKqZ12LYn+oizN3aL8TDlxmWVt5OCpZWhJOOoBxkVf1c93yVb7hxyvF+muH9O0tFQ8o9At5sDYj3Lijy9cUH30zDUviBfHRIXIYtDKLQ08v8Ac4UHmT7bce2KnNRLh1Cfj6YM6WkiVc5C5rgP+88vxz+tS2s953Zzs1t3kpSlQVFKUoFYUkKSUqAKSMEH1FZpQU9r3SjGkxCv1qkSG2WpyViKTlDKj5tyO3NI5e1dQR30SY7bzZyhxAWk9wRkVTev7Yq7aJucdAJcQ2HkADmSg7sfbNTXhTfU6g4cWiRv3OsMiK93C2/Lz9wAfrWjHO4dDBebV6mlV/YrjF0u+u036I5DX8fKXEuL6E/Duh11TgSl3PlUQcbVYyRjnU/UoIGSQB3JrQ3y7wvg3o7UeLdngoJdgCQyFkZ58lkDI64OKmueRzWCZ9yRA0/CduZS+huTMbx8KwnI35czhSgn+Kc88A4qVVFtK3PwoHw1y+BgSFyXfhoSXWQpDRUS2nagkbtvXFShKgsZSQR3BzQfOQ8iPHcecOENpK1H5AZrl/QelWNW/HX66yJC2XZylmKDhDyh5ty++Co8very4q31On+HN3k79rzzJjM46lbnl5ewJP0qE6AtirToi2R1pKXFt+OsEcwVnd/xioXnUKc95rXiSABKQlIASBgADkBWaUqhzylKV4FKUoFKUoBAIIIBB9D61AdK3b+1evn7TOUUabvK/EYdV+1hfQE9sZ2n5bT6VPq1WotPwtS2ly3zU+VXmbcA8zavRQ/89RU6W1K3Dk+J74s6bCiXaC5EmMNSIrycLbcTuSsdefeofd9DtoW0i0ae0q/BSjBjTYexQVk5UlxIV17FP1qAaT4gXPh3Ka01rNLjtrHlhXJCSran0B9SkduqfmKu223a33iImVbpjEthQyHGHAsfitDoRMTG4RC0aGbWt1F307pViCpGBGhRCtalZGCXFBPTsE/WpjChRLTBbiQ2Go8VlOENNjalA68hWLldrfaIqpVxmMRGEjJcfcCB+apLVnEC58RJTumdFpcath8s25rBTuR6geoSfurpyFCZiOy8uq7t/dPXzFogqK9OWdfiPuj9r7nQkH1zjaPluNT4AAYAAA6AelarTun4WmrS3b4SfKPM44R5nFeqj/56CttWe9ty5+bJ9zzwpSlQVFKUoFKUoFKUoFKUoPNOt8O5xFRZ0ZqQwrq24nI9/kfnUJf4TWpMhT1ruVxtqldUsuZH/R/NT+lSi0x4lXJavkoAxwntSn0vXS5XG5KT0S85tH/Z/NTaBb4dsiJiwYzUdhPRttOB7/M/OvTSk2mfS2S1vZKUpUUSlKUClKUH/9k="},f578:function(e,t,a){"use strict";var s=a("5687"),r=a.n(s);r.a},f5a4:function(e,t,a){"use strict";var s=a("02c8"),r=a.n(s);r.a},f67b:function(e,t,a){},f9e3:function(e,t,a){},fb22:function(e,t,a){e.exports=a.p+"957f50d9c16e88c17319e51622f78424.png"}});
//# sourceMappingURL=app.3ea4cda9.js.map